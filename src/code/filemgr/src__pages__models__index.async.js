"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[974],{68996:function(N,y,e){e.d(y,{r:function(){return r}});var B=e(97857),u=e.n(B),i=e(86074);function r(E){var C=E.disabled,V=E.children,I=E.message;return(0,i.jsxs)("div",{style:u()({position:"relative"},C?{cursor:"not-allowed",display:"block",maxHeight:"100vh",overflow:"hidden"}:{}),children:[C&&(0,i.jsx)("div",{style:{position:"absolute",fontWeight:"bold",zIndex:1,transform:"translate(0, -50%)",top:"50%",left:0,right:0,textAlign:"center"},children:I||"\u60A8\u672A\u6302\u8F7D NAS\uFF0C\u65E0\u6CD5\u5F00\u542F\u6587\u4EF6\u7BA1\u7406\u529F\u80FD\u3002"}),(0,i.jsx)("div",{style:C?{pointerEvents:"none",filter:"opacity(0.5) grayscale(1)"}:{},children:V})]})}},68797:function(N,y,e){e.d(y,{Q:function(){return se}});var B=e(97857),u=e.n(B),i=e(15009),r=e.n(i),E=e(99289),C=e.n(E),V=e(5574),I=e.n(V),X=e(36147),Y=e(71577),U=e(62435),T=e(86074);function se(f){var le=f.modalProps,F=f.buttonProps,_=f.children,J=f.beforeRequest,k=f.afterRequest,S=f.request,q=f.setVisibleCallback,G=U.useState(!1),K=I()(G,2),ee=K[0],Z=K[1];return U.useEffect(function(){q&&q(Z)},[Z]),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(X.Z,u()(u()({open:ee,onCancel:function(){return Z(!1)},maskClosable:!0,destroyOnClose:!0,onOk:C()(r()().mark(function o(){var s;return r()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(S){t.next=2;break}return t.abrupt("return");case 2:return J&&J(),t.prev=3,t.next=6,S();case 6:s=t.sent,s.success?(k&&k(!0),Z(!1)):k&&k(!1,"".concat(s.errMsg)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),k&&k(!1,"".concat(t.t0));case 13:case"end":return t.stop()}},o,null,[[3,10]])})),okButtonProps:S?{}:{style:{display:"none"}}},le),{},{children:ee&&_})),(0,T.jsx)(Y.ZP,u()({onClick:function(){return Z(!0)}},F))]})}},1149:function(N,y,e){e.r(y),e.d(y,{default:function(){return R}});var B=e(15009),u=e.n(B),i=e(99289),r=e.n(i),E=e(6154),C="http://server-ai-backend-agwwspzdwb.cn-hangzhou.devsapp.net";function V(){return I.apply(this,arguments)}function I(){return I=r()(u()().mark(function P(){var m;return u()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,E.Z.get("".concat(C,"/oss_models/list"));case 2:return m=x.sent,x.abrupt("return",m.data);case 4:case"end":return x.stop()}},P)})),I.apply(this,arguments)}var X=e(85504),Y=e(57213),U=e(42075),T=e(99138),se=e(26196),f=e(62435),le=e(68996),F=e(5574),_=e.n(F),J=e(36306),k=e(21687),S=e(71230),q=e(15746),G=e(92380),K=e(4393),ee=e(43384),Z=e(51904),o=e(19632),s=e.n(o),c=e(97857),t=e.n(c),g=e(96695),l=e.n(g),a=e(43331),A=e(53371),D=e(73532),h=e(33009),v=e(77794),L=e(63232),d=e(79531),$=e(68797),M=e(50942),n=e(86074);function z(P){var m=P.model,j=f.useContext(X._),x=j.info,ie=D.Z(),w=_()(ie,2),ue=w[0],O=w[1],te=O.set,ce=O.get;f.useEffect(function(){var b=l()(m.files),p;try{for(b.s();!(p=b.n()).done;){var oe=p.value;te(oe.filename,!0)}}catch(H){b.e(H)}finally{b.f()}},[m.files]);var W=f.useRef();return(0,n.jsx)($.Q,{setVisibleCallback:function(p){return W.current=p},modalProps:{title:"\u6587\u4EF6\u4E0B\u8F7D\u786E\u8BA4",okButtonProps:{type:"primary"},okText:"\u4E0B\u8F7D\u9009\u4E2D\u7684\u6A21\u578B",cancelText:"\u53D6\u6D88\u4E0B\u8F7D",onOk:function(){var p=l()(m.files),oe;try{var H=function(){var ae=oe.value;if(ce(ae.filename)){var ve=ae.ossname?"".concat(C,"/oss_models/url/").concat((x==null?void 0:x.region)||"public","/").concat(ae.ossname):ae.url,he=new a.tw(ve,ae.filename);he.run(),j.setCtx(function(fe){return t()(t()({},fe),{},{tasks:[].concat(s()((fe==null?void 0:fe.tasks)||[]),[he])})}),h.Z.success({message:"\u5F00\u59CB\u4E0B\u8F7D ".concat((0,A.Us)(ae.filename))})}W.current&&W.current(!1)};for(p.s();!(oe=p.n()).done;)H()}catch(re){p.e(re)}finally{p.f()}}},buttonProps:{children:"\u4E0B\u8F7D\u6A21\u578B"},children:(0,n.jsx)(v.Z,{header:(0,n.jsxs)("span",{style:{color:"red"},children:["\u6A21\u578B\u5C06\u4F1A\u88AB\u4E0B\u8F7D\u81F3 ",(0,n.jsx)(M.rU,{to:"files",children:"\u6587\u4EF6\u7BA1\u7406"}),"\uFF08NAS\uFF09"," ","\u4E2D\uFF0C\u8FD9\u4F1A\u4EA7\u751F\u4E00\u5B9A\u7684\u5B58\u50A8\u8D39\u7528\uFF0C\u5177\u4F53\u8BA1\u8D39\u89C1"," ",(0,n.jsx)("a",{href:"https://nasnext.console.aliyun.com",target:"_blank",rel:"noreferrer",children:"\u963F\u91CC\u4E91\u6587\u4EF6\u5B58\u50A8 NAS"})]}),dataSource:m.files,renderItem:function(p){return(0,n.jsx)(v.Z.Item,{children:(0,n.jsxs)(U.Z.Compact,{style:{width:"100%"},children:[(0,n.jsx)(L.Z,{checked:!!ce(p.filename),onChange:function(H){var re;return te(p.filename,!!(H!=null&&(re=H.target)!==null&&re!==void 0&&re.checked))},style:{marginRight:12}}),(0,n.jsx)(d.Z,{value:p.filename,disabled:!0,style:{width:"100%"}})]})})}})})}function Q(P){var m=P.model;return(0,n.jsx)(K.Z,{actions:[(0,n.jsx)(z,{model:m})],cover:m.image&&(0,n.jsx)(ee.Z,{src:m.image}),children:(0,n.jsxs)(U.Z,{direction:"vertical",style:{width:"100%"},children:[(0,n.jsx)(K.Z.Meta,{title:m.name,description:(0,G.t)(m.size)}),(0,n.jsx)(U.Z,{children:m.tags.map(function(j){return(0,n.jsx)(Z.Z,{children:j},j)})})]})})}function ne(P){var m=P.models,j=m===void 0?[]:m,x=P.loading,ie=f.useState(3),w=_()(ie,2),ue=w[0],O=w[1],te=J.Z(document.body);f.useEffect(function(){te&&O(Math.max(1,Math.round(te.width/400)))},[te]);var ce=f.useMemo(function(){for(var W=[],b=0;b<ue;b++)W.push([]);if(j)for(var p=0;p<(j==null?void 0:j.length);p++)W[p%ue].push(j[p]);return W},[ue,j]);return(0,n.jsx)(k.Z,{active:!0,title:!0,loading:x,children:(0,n.jsx)("div",{style:{display:"flex",alignItems:"flex-start"},children:ce.map(function(W,b){return(0,n.jsx)(S.Z,{style:{width:"".concat(1/ue*100,"%")},children:W.map(function(p){return(0,n.jsx)(q.Z,{span:24,style:{padding:20},children:(0,n.jsx)(Q,{model:p})})})})})})})}function de(){var P,m=Y.Z(r()(u()().mark(function w(){return u()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,V();case 2:return O.abrupt("return",O.sent);case 3:case"end":return O.stop()}},w)}))),j=m.data,x=m.loading,ie=f.useContext(X._);return(0,n.jsx)(le.r,{disabled:!((P=ie.info)!==null&&P!==void 0&&P.withNas),message:"\u60A8\u672A\u6302\u8F7D NAS\uFF0C\u65E0\u6CD5\u4F7F\u7528\u6A21\u578B\u4E0B\u8F7D\u529F\u80FD\u3002",children:(0,n.jsxs)(U.Z,{direction:"vertical",style:{width:"100%",padding:20},children:[(0,n.jsx)(T.Z,{message:"\u6A21\u578B\u5E93\u4F7F\u7528\u8BF4\u660E",description:(0,n.jsxs)(se.Z.Paragraph,{children:["\u6A21\u578B\u5E93\u529F\u80FD\u7531\u963F\u91CC\u4E91 OSS \u63D0\u4F9B\uFF0C\u6A21\u578B/\u6570\u636E\u96C6/\u6587\u4EF6\u5747\u6765\u6E90\u4E8E\u7B2C\u4E09\u65B9\uFF0C\u963F\u91CC\u4E91\u4E0D\u4FDD\u8BC1\u5408\u89C4\u6027\uFF0C\u8BF7\u60A8\u5728\u4F7F\u7528\u524D\u614E\u91CD\u8003\u8651\u3002\u6B64\u5916\uFF0C\u60A8\u8FD8\u5E94\u4E25\u683C\u9075\u5B88\u6CD5\u5F8B\u6CD5\u89C4\u3001\u7B2C\u4E09\u65B9\u8981\u6C42\u7B49\uFF0C\u7279\u522B\u662F\u4E0D\u5F97\u5229\u7528\u672C\u670D\u52A1\u4ECE\u4E8B\u8FDD\u6CD5\u8FDD\u89C4\u884C\u4E3A\uFF08\u5982\u4E0A\u4F20/\u8F93\u5165/\u751F\u6210/\u4E0B\u8F7D/\u4F7F\u7528\u8FDD\u6CD5\u6216\u4E0D\u826F\u4FE1\u606F\u7B49\uFF09\u3002\u5177\u4F53\u8BE6\u89C1"," ",(0,n.jsx)("a",{href:"http://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud201912232313_55403.html",target:"_blank",rel:"noreferrer",children:"\u300A\u5BF9\u8C61\u5B58\u50A8\uFF08OSS\uFF09\u5BF9\u8C61\u5B58\u50A8\uFF08OSS\uFF09\u670D\u52A1\u6761\u6B3E\u300B"})," ","\u53CA\u9875\u9762\u5C55\u793A\u4FE1\u606F\u7B49\u3002\u5982\u60A8\u53D1\u73B0\u4EFB\u4F55\u6A21\u578B/\u6570\u636E\u96C6/\u6587\u4EF6\u7B49\u6709\u95EE\u9898\uFF0C\u8BF7\u53CA\u65F6\u8054\u7CFB\u6211\u4EEC\u5904\u7406\u3002",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:"https://www.yuque.com/publicmodel/kaq1i2/dds7alalpgv6fsbv",target:"_blank",rel:"noreferrer",children:"\u76F8\u5173\u6A21\u578B\u4ECB\u7ECD"})]})}),(0,n.jsx)(ne,{models:j,loading:x})]})})}function R(){return(0,n.jsx)(de,{})}},70507:function(N,y,e){var B=e(50942),u=e(6154);u.Z.interceptors.response.use(function(i){return i},function(i){return i.response&&(i.response.status===401&&B.m8.push("/login"),i.response.status!==200)?i.response:Promise.reject(i)}),y.Z=u.Z},43331:function(N,y,e){e.d(y,{Vz:function(){return ee},tw:function(){return Z}});var B=e(15009),u=e.n(B),i=e(99289),r=e.n(i),E=e(25098),C=e.n(E),V=e(31996),I=e.n(V),X=e(26037),Y=e.n(X),U=e(12444),T=e.n(U),se=e(72004),f=e.n(se),le=e(9783),F=e.n(le),_=function(){function o(s){T()(this,o),F()(this,"maxRunning",void 0),F()(this,"running",void 0),this.maxRunning=s,this.running=0}return f()(o,[{key:"getToken",value:function(){var s=r()(u()().mark(function t(){var g=this;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(this.running>=this.maxRunning)){a.next=3;break}return a.next=3,new Promise(function(A){var D=setInterval(function(){g.running<g.maxRunning&&(clearInterval(D),A(void 0))},100)});case 3:this.running++;case 4:case"end":return a.stop()}},t,this)}));function c(){return s.apply(this,arguments)}return c}()},{key:"releaseToken",value:function(){this.running--}}]),o}(),J=e(70507);function k(o,s,c){return S.apply(this,arguments)}function S(){return S=r()(u()().mark(function o(s,c,t){var g;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,J.Z.post("/api/upload/chunk?filename=".concat(encodeURIComponent(s),"&start=").concat(encodeURIComponent(c)),t);case 2:return g=a.sent,a.abrupt("return",g.data);case 4:case"end":return a.stop()}},o)})),S.apply(this,arguments)}function q(o,s,c,t){return G.apply(this,arguments)}function G(){return G=r()(u()().mark(function o(s,c,t,g){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,new Promise(function(A,D){var h=new WebSocket("".concat(location.protocol.replace("http","ws"),"//").concat(location.hostname,":").concat(location.port,"/api/upload/url?filename=").concat(encodeURIComponent(s),"&url=").concat(encodeURIComponent(c)));h.onerror=D,h.onopen=function(){h.send("client send hi")};var v=!1,L="";h.onmessage=function($){try{var M=JSON.parse($.data),n=M.current,z=M.total,Q=M.success,ne=M.errMsg;Q===!0?v=!0:Q===!1?(v=!1,L=ne):t(n,z)}catch(de){console.error(de),console.log($)}},h.onclose=function(){A(void 0),h.close(),g(v,L)}});case 2:return a.abrupt("return",{success:!0});case 3:case"end":return a.stop()}},o)})),G.apply(this,arguments)}var K=function(){function o(){T()(this,o),F()(this,"key",""),F()(this,"type","unknown"),F()(this,"target",""),F()(this,"current",0),F()(this,"total",0),F()(this,"finished",!1),F()(this,"error",""),this.key=Math.random().toString(36).substr(2,8)}return f()(o,[{key:"getKey",value:function(){return this.key}},{key:"getCurrent",value:function(){return this.current}},{key:"getTotal",value:function(){return this.total}},{key:"getProgress",value:function(){return this.total===0?0:this.current/this.total}},{key:"getFileName",value:function(){return this.target}},{key:"isFinished",value:function(){return this.finished}},{key:"getError",value:function(){return this.error}},{key:"run",value:function(){}}]),o}(),ee=function(o){I()(c,o);var s=Y()(c);function c(t,g){var l;return T()(this,c),l=s.call(this),F()(C()(l),"type","chunk"),F()(C()(l),"file",void 0),l.file=t,l.target=g,l}return f()(c,[{key:"uploadWithRetry",value:function(){var t=r()(u()().mark(function l(a,A,D){var h,v;return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:h=5,v="";case 2:if(!(h>0)){d.next=16;break}return d.prev=3,d.next=6,k(a,A,D);case 6:return d.abrupt("return",d.sent);case 9:return d.prev=9,d.t0=d.catch(3),h--,v=d.t0.toString(),d.abrupt("continue",2);case 14:d.next=2;break;case 16:throw v;case 17:case"end":return d.stop()}},l,null,[[3,9]])}));function g(l,a,A){return t.apply(this,arguments)}return g}()},{key:"run",value:function(){var t=r()(u()().mark(function l(){var a=this,A,D,h,v,L,d,$,M,n,z,Q,ne;return u()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:A=this.file,D=this.target,this.total=A.size,h=new _(10),v=1048576,L=Math.ceil(this.file.size/v),d=[],$=0,M="",n=0;case 10:if(!(n<L)){R.next=22;break}return z=n*v,Q=Math.min(z+v,A.size),ne=A.slice(z,Q),R.next=16,h.getToken();case 16:if(d.push(this.uploadWithRetry(D,z,ne).catch(function(P){M="".concat(P)}).then(function(){$++,a.current=$*v,h.releaseToken()})),!M){R.next=19;break}return R.abrupt("break",22);case 19:n++,R.next=10;break;case 22:return R.next=24,Promise.all(d);case 24:M?this.error=M:this.finished=!0;case 25:case"end":return R.stop()}},l,this)}));function g(){return t.apply(this,arguments)}return g}()}]),c}(K),Z=function(o){I()(c,o);var s=Y()(c);function c(t,g){var l;return T()(this,c),l=s.call(this),F()(C()(l),"type","url"),F()(C()(l),"url",void 0),l.url=t,l.target=g,l}return f()(c,[{key:"run",value:function(){var t=r()(u()().mark(function l(){var a=this;return u()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,q(this.target,this.url,function(h,v){a.current=h,a.total=v},function(h,v){a.finished=h,a.error=v||""});case 2:case"end":return D.stop()}},l,this)}));function g(){return t.apply(this,arguments)}return g}()}]),c}(K)},92380:function(N,y,e){e.d(y,{t:function(){return B}});function B(u){for(var i=["B","KB","MB","GB","TB"],r=0;u>1024;)u/=1024,r++;return"".concat(u.toFixed(2)," ").concat(i[r])}},85504:function(N,y,e){e.d(y,{_:function(){return i},i:function(){return u}});var B=e(62435),u={info:void 0,tasks:[],setCtx:function(){},setIframeVisible:function(){},setIframeSrc:function(){}},i=B.createContext(u)},53371:function(N,y,e){e.d(y,{Dy:function(){return i},Us:function(){return u},XP:function(){return B}});function B(r){var E=r.lastIndexOf("/");return E===-1?"/":r.substring(0,E)}function u(r){var E=r.lastIndexOf("/");return E===-1?r:r.substring(E+1)}function i(){for(var r=arguments.length,E=new Array(r),C=0;C<r;C++)E[C]=arguments[C];return E.join("/").replace(/\/+/g,"/")}}}]);
