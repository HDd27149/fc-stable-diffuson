"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[974],{68996:function(z,D,e){e.d(D,{r:function(){return a}});var B=e(97857),t=e.n(B),i=e(86074);function a(C){var y=C.disabled,G=C.children,O=C.message;return(0,i.jsxs)("div",{style:t()({position:"relative"},y?{cursor:"not-allowed",display:"block",maxHeight:"100vh",overflow:"hidden"}:{}),children:[y&&(0,i.jsx)("div",{style:{position:"absolute",fontWeight:"bold",zIndex:1,transform:"translate(0, -50%)",top:"50%",left:0,right:0,textAlign:"center"},children:O||"\u60A8\u672A\u6302\u8F7D NAS\uFF0C\u65E0\u6CD5\u5F00\u542F\u6587\u4EF6\u7BA1\u7406\u529F\u80FD\u3002"}),(0,i.jsx)("div",{style:y?{pointerEvents:"none",filter:"opacity(0.5) grayscale(1)"}:{},children:G})]})}},68797:function(z,D,e){e.d(D,{Q:function(){return ae}});var B=e(97857),t=e.n(B),i=e(15009),a=e.n(i),C=e(99289),y=e.n(C),G=e(5574),O=e.n(G),H=e(36147),X=e(71577),I=e(62435),x=e(86074);function ae(v){var se=v.modalProps,F=v.buttonProps,_=v.children,Y=v.beforeRequest,b=v.afterRequest,k=v.request,J=v.setVisibleCallback,N=I.useState(!1),S=O()(N,2),q=S[0],U=S[1];return I.useEffect(function(){J&&J(U)},[U]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(H.Z,t()(t()({open:q,onCancel:function(){return U(!1)},maskClosable:!0,destroyOnClose:!0,onOk:y()(a()().mark(function o(){var s;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(k){u.next=2;break}return u.abrupt("return");case 2:return Y&&Y(),u.prev=3,u.next=6,k();case 6:s=u.sent,s.success?(b&&b(!0),U(!1)):b&&b(!1,"".concat(s.errMsg)),u.next=13;break;case 10:u.prev=10,u.t0=u.catch(3),b&&b(!1,"".concat(u.t0));case 13:case"end":return u.stop()}},o,null,[[3,10]])})),okButtonProps:k?{}:{style:{display:"none"}}},se),{},{children:q&&_})),(0,x.jsx)(X.ZP,t()({onClick:function(){return U(!0)}},F))]})}},1149:function(z,D,e){e.r(D),e.d(D,{default:function(){return oe}});var B=e(15009),t=e.n(B),i=e(99289),a=e.n(i),C=e(6154),y="http://server-ai-backend-agwwspzdwb.cn-hangzhou.devsapp.net";function G(){return O.apply(this,arguments)}function O(){return O=a()(t()().mark(function f(){var h;return t()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,C.Z.get("".concat(y,"/oss_models/list"));case 2:return h=A.sent,A.abrupt("return",h.data);case 4:case"end":return A.stop()}},f)})),O.apply(this,arguments)}var H=e(85504),X=e(57213),I=e(42075),x=e(99138),ae=e(26196),v=e(62435),se=e(68996),F=e(5574),_=e.n(F),Y=e(36306),b=e(21687),k=e(71230),J=e(15746),N=e(92380),S=e(4393),q=e(43384),U=e(51904),o=e(19632),s=e.n(o),c=e(97857),u=e.n(c),E=e(96695),l=e.n(E),r=e(43331),M=e(53371),j=e(73532),m=e(33009),p=e(77794),W=e(63232),d=e(79531),K=e(68797),n=e(86074);function L(f){var h=f.model,P=v.useContext(H._),A=P.info,le=j.Z(),w=_()(le,2),ne=w[0],T=w[1],te=T.set,de=T.get;v.useEffect(function(){var R=l()(h.files),g;try{for(R.s();!(g=R.n()).done;){var ie=g.value;te(ie.filename,!0)}}catch(Q){R.e(Q)}finally{R.f()}},[h.files]);var Z=v.useRef();return(0,n.jsx)(K.Q,{setVisibleCallback:function(g){return Z.current=g},modalProps:{title:"\u6587\u4EF6\u4E0B\u8F7D\u786E\u8BA4",okButtonProps:{type:"primary"},okText:"\u4E0B\u8F7D\u9009\u4E2D\u7684\u6A21\u578B",cancelText:"\u53D6\u6D88\u4E0B\u8F7D",onOk:function(){var g=l()(h.files),ie;try{var Q=function(){var re=ie.value;if(de(re.filename)){var he=re.ossname?"".concat(y,"/oss_models/url/").concat((A==null?void 0:A.region)||"public","/").concat(re.ossname):re.url,fe=new r.tw(he,re.filename);fe.run(),P.setCtx(function(ce){return u()(u()({},ce),{},{tasks:[].concat(s()((ce==null?void 0:ce.tasks)||[]),[fe])})}),m.Z.success({message:"\u5F00\u59CB\u4E0B\u8F7D ".concat((0,M.Us)(re.filename))})}Z.current&&Z.current(!1)};for(g.s();!(ie=g.n()).done;)Q()}catch(ue){g.e(ue)}finally{g.f()}}},buttonProps:{children:"\u4E0B\u8F7D\u6A21\u578B"},children:(0,n.jsx)(p.Z,{dataSource:h.files,renderItem:function(g){return(0,n.jsx)(p.Z.Item,{children:(0,n.jsxs)(I.Z.Compact,{style:{width:"100%"},children:[(0,n.jsx)(W.Z,{checked:!!de(g.filename),onChange:function(Q){var ue;return te(g.filename,!!(Q!=null&&(ue=Q.target)!==null&&ue!==void 0&&ue.checked))},style:{marginRight:12}}),(0,n.jsx)(d.Z,{value:g.filename,disabled:!0,style:{width:"100%"}})]})})}})})}function $(f){var h=f.model;return(0,n.jsx)(S.Z,{actions:[(0,n.jsx)(L,{model:h})],cover:h.image&&(0,n.jsx)(q.Z,{src:h.image}),children:(0,n.jsxs)(I.Z,{direction:"vertical",style:{width:"100%"},children:[(0,n.jsx)(S.Z.Meta,{title:h.name,description:(0,N.t)(h.size)}),(0,n.jsx)(I.Z,{children:h.tags.map(function(P){return(0,n.jsx)(U.Z,{children:P},P)})})]})})}function V(f){var h=f.models,P=h===void 0?[]:h,A=f.loading,le=v.useState(3),w=_()(le,2),ne=w[0],T=w[1],te=Y.Z(document.body);v.useEffect(function(){te&&T(Math.max(1,Math.round(te.width/400)))},[te]);var de=v.useMemo(function(){for(var Z=[],R=0;R<ne;R++)Z.push([]);if(P)for(var g=0;g<(P==null?void 0:P.length);g++)Z[g%ne].push(P[g]);return Z},[ne,P]);return(0,n.jsx)(b.Z,{active:!0,title:!0,loading:A,children:(0,n.jsx)("div",{style:{display:"flex",alignItems:"flex-start"},children:de.map(function(Z,R){return(0,n.jsx)(k.Z,{style:{width:"".concat(1/ne*100,"%")},children:Z.map(function(g){return(0,n.jsx)(J.Z,{span:24,style:{padding:20},children:(0,n.jsx)($,{model:g})})})})})})})}function ee(){var f,h=X.Z(a()(t()().mark(function w(){return t()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,G();case 2:return T.abrupt("return",T.sent);case 3:case"end":return T.stop()}},w)}))),P=h.data,A=h.loading,le=v.useContext(H._);return(0,n.jsx)(se.r,{disabled:!((f=le.info)!==null&&f!==void 0&&f.withNas),message:"\u60A8\u672A\u6302\u8F7D NAS\uFF0C\u65E0\u6CD5\u4F7F\u7528\u6A21\u578B\u4E0B\u8F7D\u529F\u80FD\u3002",children:(0,n.jsxs)(I.Z,{direction:"vertical",style:{width:"100%",padding:20},children:[(0,n.jsx)(x.Z,{message:"\u6A21\u578B\u5E93\u4F7F\u7528\u8BF4\u660E",description:(0,n.jsxs)(ae.Z.Paragraph,{children:["\u5982\u4E0A\u5C55\u793A\u6A21\u578B/\u6570\u636E\u96C6/\u6587\u4EF6\u5747\u6765\u6E90\u4E8E\u7B2C\u4E09\u65B9\uFF0C\u963F\u91CC\u4E91\u4E0D\u4FDD\u8BC1\u5408\u89C4\u6027\uFF0C\u8BF7\u60A8\u5728\u4F7F\u7528\u524D\u614E\u91CD\u8003\u8651\u3002\u6B64\u5916\uFF0C\u60A8\u8FD8\u5E94\u4E25\u683C\u9075\u5B88\u6CD5\u5F8B\u6CD5\u89C4\u3001\u7B2C\u4E09\u65B9\u8981\u6C42\u7B49\uFF0C\u7279\u522B\u662F\u4E0D\u5F97\u5229\u7528\u672C\u670D\u52A1\u4ECE\u4E8B\u8FDD\u6CD5\u8FDD\u89C4\u884C\u4E3A\uFF08\u5982\u4E0A\u4F20/\u8F93\u5165/\u751F\u6210/\u4E0B\u8F7D/\u4F7F\u7528\u8FDD\u6CD5\u6216\u4E0D\u826F\u4FE1\u606F\u7B49\uFF09\u3002\u5177\u4F53\u8BE6\u89C1"," ",(0,n.jsx)("a",{href:"http://terms.aliyun.com/legal-agreement/terms/suit_bu1_ali_cloud/suit_bu1_ali_cloud201912232313_55403.html",target:"_blank",rel:"noreferrer",children:"\u300A\u5BF9\u8C61\u5B58\u50A8\uFF08OSS\uFF09\u5BF9\u8C61\u5B58\u50A8\uFF08OSS\uFF09\u670D\u52A1\u6761\u6B3E\u300B"})," ","\u53CA\u9875\u9762\u5C55\u793A\u4FE1\u606F\u7B49\u3002\u5982\u60A8\u53D1\u73B0\u4EFB\u4F55\u6A21\u578B/\u6570\u636E\u96C6/\u6587\u4EF6\u7B49\u6709\u95EE\u9898\uFF0C\u8BF7\u53CA\u65F6\u8054\u7CFB\u6211\u4EEC\u5904\u7406\u3002",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("a",{href:"https://www.yuque.com/publicmodel/kaq1i2/dds7alalpgv6fsbv",target:"_blank",rel:"noreferrer",children:"\u76F8\u5173\u6A21\u578B\u4ECB\u7ECD"})]})}),(0,n.jsx)(V,{models:P,loading:A})]})})}function oe(){return(0,n.jsx)(ee,{})}},70507:function(z,D,e){var B=e(82188),t=e(6154);t.Z.interceptors.response.use(function(i){return i},function(i){return i.response&&(i.response.status===401&&B.m8.push("/login"),i.response.status!==200)?i.response:Promise.reject(i)}),D.Z=t.Z},43331:function(z,D,e){e.d(D,{Vz:function(){return q},tw:function(){return U}});var B=e(15009),t=e.n(B),i=e(99289),a=e.n(i),C=e(25098),y=e.n(C),G=e(31996),O=e.n(G),H=e(26037),X=e.n(H),I=e(12444),x=e.n(I),ae=e(72004),v=e.n(ae),se=e(9783),F=e.n(se),_=function(){function o(s){x()(this,o),F()(this,"maxRunning",void 0),F()(this,"running",void 0),this.maxRunning=s,this.running=0}return v()(o,[{key:"getToken",value:function(){var s=a()(t()().mark(function u(){var E=this;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(this.running>=this.maxRunning)){r.next=3;break}return r.next=3,new Promise(function(M){var j=setInterval(function(){E.running<E.maxRunning&&(clearInterval(j),M(void 0))},100)});case 3:this.running++;case 4:case"end":return r.stop()}},u,this)}));function c(){return s.apply(this,arguments)}return c}()},{key:"releaseToken",value:function(){this.running--}}]),o}(),Y=e(70507);function b(o,s,c){return k.apply(this,arguments)}function k(){return k=a()(t()().mark(function o(s,c,u){var E;return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Y.Z.post("/api/upload/chunk?filename=".concat(encodeURIComponent(s),"&start=").concat(encodeURIComponent(c)),u);case 2:return E=r.sent,r.abrupt("return",E.data);case 4:case"end":return r.stop()}},o)})),k.apply(this,arguments)}function J(o,s,c,u){return N.apply(this,arguments)}function N(){return N=a()(t()().mark(function o(s,c,u,E){return t()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,new Promise(function(M,j){var m=new WebSocket("".concat(location.protocol.replace("http","ws"),"//").concat(location.hostname,":").concat(location.port,"/api/upload/url?filename=").concat(encodeURIComponent(s),"&url=").concat(encodeURIComponent(c)));m.onerror=j,m.onopen=function(){m.send("client send hi")};var p=!1,W="";m.onmessage=function(K){try{var n=JSON.parse(K.data),L=n.current,$=n.total,V=n.success,ee=n.errMsg;V===!0?p=!0:V===!1?(p=!1,W=ee):u(L,$)}catch(oe){console.error(oe),console.log(K)}},m.onclose=function(){M(void 0),m.close(),E(p,W)}});case 2:return r.abrupt("return",{success:!0});case 3:case"end":return r.stop()}},o)})),N.apply(this,arguments)}var S=function(){function o(){x()(this,o),F()(this,"key",""),F()(this,"type","unknown"),F()(this,"target",""),F()(this,"current",0),F()(this,"total",0),F()(this,"finished",!1),F()(this,"error",""),this.key=Math.random().toString(36).substr(2,8)}return v()(o,[{key:"getKey",value:function(){return this.key}},{key:"getCurrent",value:function(){return this.current}},{key:"getTotal",value:function(){return this.total}},{key:"getProgress",value:function(){return this.total===0?0:this.current/this.total}},{key:"getFileName",value:function(){return this.target}},{key:"isFinished",value:function(){return this.finished}},{key:"getError",value:function(){return this.error}},{key:"run",value:function(){}}]),o}(),q=function(o){O()(c,o);var s=X()(c);function c(u,E){var l;return x()(this,c),l=s.call(this),F()(y()(l),"type","chunk"),F()(y()(l),"file",void 0),l.file=u,l.target=E,l}return v()(c,[{key:"uploadWithRetry",value:function(){var u=a()(t()().mark(function l(r,M,j){var m,p;return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:m=5,p="";case 2:if(!(m>0)){d.next=16;break}return d.prev=3,d.next=6,b(r,M,j);case 6:return d.abrupt("return",d.sent);case 9:return d.prev=9,d.t0=d.catch(3),m--,p=d.t0.toString(),d.abrupt("continue",2);case 14:d.next=2;break;case 16:throw p;case 17:case"end":return d.stop()}},l,null,[[3,9]])}));function E(l,r,M){return u.apply(this,arguments)}return E}()},{key:"run",value:function(){var u=a()(t()().mark(function l(){var r=this,M,j,m,p,W,d,K,n,L,$,V,ee;return t()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:M=this.file,j=this.target,this.total=M.size,m=new _(10),p=1048576,W=Math.ceil(this.file.size/p),d=[],K=0,n="",L=0;case 10:if(!(L<W)){f.next=22;break}return $=L*p,V=Math.min($+p,M.size),ee=M.slice($,V),f.next=16,m.getToken();case 16:if(d.push(this.uploadWithRetry(j,$,ee).catch(function(h){n="".concat(h)}).then(function(){K++,r.current=K*p,m.releaseToken()})),!n){f.next=19;break}return f.abrupt("break",22);case 19:L++,f.next=10;break;case 22:return f.next=24,Promise.all(d);case 24:n?this.error=n:this.finished=!0;case 25:case"end":return f.stop()}},l,this)}));function E(){return u.apply(this,arguments)}return E}()}]),c}(S),U=function(o){O()(c,o);var s=X()(c);function c(u,E){var l;return x()(this,c),l=s.call(this),F()(y()(l),"type","url"),F()(y()(l),"url",void 0),l.url=u,l.target=E,l}return v()(c,[{key:"run",value:function(){var u=a()(t()().mark(function l(){var r=this;return t()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,J(this.target,this.url,function(m,p){r.current=m,r.total=p},function(m,p){r.finished=m,r.error=p||""});case 2:case"end":return j.stop()}},l,this)}));function E(){return u.apply(this,arguments)}return E}()}]),c}(S)},92380:function(z,D,e){e.d(D,{t:function(){return B}});function B(t){for(var i=["B","KB","MB","GB","TB"],a=0;t>1024;)t/=1024,a++;return"".concat(t.toFixed(2)," ").concat(i[a])}},85504:function(z,D,e){e.d(D,{_:function(){return i},i:function(){return t}});var B=e(62435),t={info:void 0,tasks:[],setCtx:function(){}},i=B.createContext(t)},53371:function(z,D,e){e.d(D,{Dy:function(){return i},Us:function(){return t},XP:function(){return B}});function B(a){var C=a.lastIndexOf("/");return C===-1?"/":a.substring(0,C)}function t(a){var C=a.lastIndexOf("/");return C===-1?a:a.substring(C+1)}function i(){for(var a=arguments.length,C=new Array(a),y=0;y<a;y++)C[y]=arguments[y];return C.join("/").replace(/\/+/g,"/")}}}]);
