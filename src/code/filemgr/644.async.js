"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[644],{68996:function(K,C,e){e.d(C,{r:function(){return t}});var T=e(97857),r=e.n(T),p=e(86074);function t(h){var E=h.disabled,I=h.children,B=h.message;return(0,p.jsxs)("div",{style:r()({position:"relative"},E?{cursor:"not-allowed",display:"block",maxHeight:"100vh",overflow:"hidden"}:{}),children:[E&&(0,p.jsx)("div",{style:{position:"absolute",fontWeight:"bold",zIndex:1,transform:"translate(0, -50%)",top:"50%",left:0,right:0,textAlign:"center"},children:B||"\u60A8\u672A\u6302\u8F7D NAS\uFF0C\u65E0\u6CD5\u5F00\u542F\u6587\u4EF6\u7BA1\u7406\u529F\u80FD\u3002"}),(0,p.jsx)("div",{style:E?{pointerEvents:"none",filter:"opacity(0.5) grayscale(1)"}:{},children:I})]})}},68797:function(K,C,e){e.d(C,{Q:function(){return z}});var T=e(97857),r=e.n(T),p=e(15009),t=e.n(p),h=e(99289),E=e.n(h),I=e(5574),B=e.n(I),L=e(36147),Z=e(71577),A=e(62435),O=e(86074);function z(R){var F=R.modalProps,k=R.buttonProps,S=R.children,$=R.beforeRequest,j=R.afterRequest,o=R.request,d=R.setVisibleCallback,v=A.useState(!1),g=B()(v,2),i=g[0],n=g[1];return A.useEffect(function(){d&&d(n)},[n]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(L.Z,r()(r()({open:i,onCancel:function(){return n(!1)},maskClosable:!0,destroyOnClose:!0,onOk:E()(t()().mark(function V(){var Q;return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(o){s.next=2;break}return s.abrupt("return");case 2:return $&&$(),s.prev=3,s.next=6,o();case 6:Q=s.sent,Q.success?(j&&j(!0),n(!1)):j&&j(!1,"".concat(Q.errMsg)),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(3),j&&j(!1,"".concat(s.t0));case 13:case"end":return s.stop()}},V,null,[[3,10]])})),okButtonProps:o?{}:{style:{display:"none"}}},F),{},{children:i&&S})),(0,O.jsx)(Z.ZP,r()({onClick:function(){return n(!0)}},k))]})}},70507:function(K,C,e){var T=e(50942),r=e(6154);r.Z.interceptors.response.use(function(p){return p},function(p){return p.response&&(p.response.status===401&&T.m8.push("/login"),p.response.status!==200)?p.response:Promise.reject(p)}),C.Z=r.Z},61039:function(K,C,e){e.d(C,{C7:function(){return E},Ri:function(){return $},Yd:function(){return B},ap:function(){return k},cy:function(){return R},jW:function(){return O}});var T=e(15009),r=e.n(T),p=e(99289),t=e.n(p),h=e(70507);function E(o,d){return I.apply(this,arguments)}function I(){return I=t()(r()().mark(function o(d,v){var g;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.Z.get("/api/file/list",{params:{path:d,dir_size:v}});case 2:return g=n.sent,n.abrupt("return",g.data);case 4:case"end":return n.stop()}},o)})),I.apply(this,arguments)}function B(o){return L.apply(this,arguments)}function L(){return L=t()(r()().mark(function o(d){var v;return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,h.Z.delete("/api/file?path=".concat(d));case 2:return v=i.sent,i.abrupt("return",v.data);case 4:case"end":return i.stop()}},o)})),L.apply(this,arguments)}function Z(o){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function o(d){var v;return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,axios.put("/api/folder",null,{params:{path:d}});case 2:return v=i.sent,i.abrupt("return",v.data);case 4:case"end":return i.stop()}},o)})),A.apply(this,arguments)}function O(o,d){return z.apply(this,arguments)}function z(){return z=t()(r()().mark(function o(d,v){var g;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.Z.post("/api/file/move",null,{params:{src:d,dst:v}});case 2:return g=n.sent,n.abrupt("return",g.data);case 4:case"end":return n.stop()}},o)})),z.apply(this,arguments)}function R(o,d){return F.apply(this,arguments)}function F(){return F=t()(r()().mark(function o(d,v){var g;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.Z.post("/api/file/copy",null,{params:{src:d,dst:v}});case 2:return g=n.sent,n.abrupt("return",g.data);case 4:case"end":return n.stop()}},o)})),F.apply(this,arguments)}function k(o){return S.apply(this,arguments)}function S(){return S=t()(r()().mark(function o(d){var v;return r()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,h.Z.get("/api/file/size",{params:{path:d}});case 2:return v=i.sent,i.abrupt("return",v.data);case 4:case"end":return i.stop()}},o)})),S.apply(this,arguments)}function $(o,d){return j.apply(this,arguments)}function j(){return j=t()(r()().mark(function o(d,v){var g;return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.Z.post("/api/file/unzip",null,{params:{src:d,dst:v}});case 2:return g=n.sent,n.abrupt("return",g.data);case 4:case"end":return n.stop()}},o)})),j.apply(this,arguments)}},43331:function(K,C,e){e.d(C,{Vz:function(){return V},qU:function(){return N},tw:function(){return Q}});var T=e(15009),r=e.n(T),p=e(99289),t=e.n(p),h=e(25098),E=e.n(h),I=e(31996),B=e.n(I),L=e(26037),Z=e.n(L),A=e(12444),O=e.n(A),z=e(72004),R=e.n(z),F=e(9783),k=e.n(F),S=function(){function s(_){O()(this,s),k()(this,"maxRunning",void 0),k()(this,"running",void 0),this.maxRunning=_,this.running=0}return R()(s,[{key:"getToken",value:function(){var _=t()(r()().mark(function y(){var b=this;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(this.running>=this.maxRunning)){a.next=3;break}return a.next=3,new Promise(function(D){var P=setInterval(function(){b.running<b.maxRunning&&(clearInterval(P),D(void 0))},100)});case 3:this.running++;case 4:case"end":return a.stop()}},y,this)}));function c(){return _.apply(this,arguments)}return c}()},{key:"releaseToken",value:function(){this.running--}}]),s}(),$=e(61039),j=e(70507);function o(s,_,c){return d.apply(this,arguments)}function d(){return d=t()(r()().mark(function s(_,c,y){var b;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.Z.post("/api/upload/chunk?filename=".concat(encodeURIComponent(_),"&start=").concat(encodeURIComponent(c)),y);case 2:return b=a.sent,a.abrupt("return",b.data);case 4:case"end":return a.stop()}},s)})),d.apply(this,arguments)}function v(s,_,c,y){return g.apply(this,arguments)}function g(){return g=t()(r()().mark(function s(_,c,y,b){return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,new Promise(function(D,P){var f=new WebSocket("".concat(location.protocol.replace("http","ws"),"//").concat(location.hostname,":").concat(location.port,"/api/upload/url?filename=").concat(encodeURIComponent(_),"&url=").concat(encodeURIComponent(c)));f.onerror=P,f.onopen=function(){f.send("client send hi")};var M=!1,m="";f.onmessage=function(l){try{var W=JSON.parse(l.data),G=W.current,H=W.total,Y=W.success,X=W.errMsg;Y===!0?M=!0:Y===!1?(M=!1,m=X):y(G,H)}catch(U){console.error(U),console.log(l)}},f.onclose=function(){D(void 0),f.close(),b(M,m)}});case 2:return a.abrupt("return",{success:!0});case 3:case"end":return a.stop()}},s)})),g.apply(this,arguments)}var i=new S(32),n=function(){function s(){O()(this,s),k()(this,"key",""),k()(this,"type","unknown"),k()(this,"target",""),k()(this,"current",0),k()(this,"total",0),k()(this,"finished",!1),k()(this,"error",""),this.key=Math.random().toString(36).substr(2,8)}return R()(s,[{key:"getKey",value:function(){return this.key}},{key:"getCurrent",value:function(){return this.current}},{key:"getTotal",value:function(){return this.total}},{key:"getProgress",value:function(){return this.total===0?0:this.current/this.total}},{key:"getFileName",value:function(){return this.target}},{key:"isFinished",value:function(){return this.finished}},{key:"getError",value:function(){return this.error}},{key:"run",value:function(){}}]),s}(),V=function(s){B()(c,s);var _=Z()(c);function c(y,b){var u;return O()(this,c),u=_.call(this),k()(E()(u),"type","chunk"),k()(E()(u),"file",void 0),u.file=y,u.target=b,u}return R()(c,[{key:"uploadWithRetry",value:function(){var y=t()(r()().mark(function u(a,D,P){var f,M,m;return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:f=5,M="";case 2:if(!(f>0)){l.next=23;break}return l.prev=3,l.next=6,o(a,D,P);case 6:if(m=l.sent,m.success){l.next=13;break}return f--,M=m.errMsg,l.abrupt("continue",2);case 13:return l.abrupt("return",{success:!0});case 14:l.next=21;break;case 16:return l.prev=16,l.t0=l.catch(3),f--,M=l.t0.toString(),l.abrupt("continue",2);case 21:l.next=2;break;case 23:return l.abrupt("return",{success:!1,errMsg:"retry times exceed, still got error ".concat(M)});case 24:case"end":return l.stop()}},u,null,[[3,16]])}));function b(u,a,D){return y.apply(this,arguments)}return b}()},{key:"run",value:function(){var y=t()(r()().mark(function u(){var a=this,D,P,f,M,m,w,l,W,G,H,Y;return r()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:D=this.file,P=this.target,this.total=D.size,f=1048576,M=Math.ceil(this.file.size/f),m=[],w=0,l="",W=0;case 9:if(!(W<M)){U.next=21;break}return G=W*f,H=Math.min(G+f,D.size),Y=D.slice(G,H),U.next=15,i.getToken();case 15:if(m.push(this.uploadWithRetry(P,G,Y).then(function(x){w++,a.current=w*f,i.releaseToken(),x.success||(a.error=x.errMsg)})),!l){U.next=18;break}return U.abrupt("break",21);case 18:W++,U.next=9;break;case 21:return U.next=23,Promise.all(m);case 23:l?this.error=l:this.finished=!0;case 24:case"end":return U.stop()}},u,this)}));function b(){return y.apply(this,arguments)}return b}()}]),c}(n),Q=function(s){B()(c,s);var _=Z()(c);function c(y,b){var u;return O()(this,c),u=_.call(this),k()(E()(u),"type","url"),k()(E()(u),"url",void 0),u.url=y,u.target=b,u}return R()(c,[{key:"run",value:function(){var y=t()(r()().mark(function u(){var a=this;return r()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,v(this.target,this.url,function(f,M){a.current=f,a.total=M},function(f,M){a.finished=f,a.error=M||""});case 2:case"end":return P.stop()}},u,this)}));function b(){return y.apply(this,arguments)}return b}()}]),c}(n),N=function(s){B()(c,s);var _=Z()(c);function c(y,b){var u;return O()(this,c),u=_.call(this),k()(E()(u),"type","url_unzip"),k()(E()(u),"url",void 0),u.url=y,u.target=b,u}return R()(c,[{key:"run",value:function(){var y=t()(r()().mark(function u(){var a=this,D,P,f;return r()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,v(this.target,this.url,function(w,l){a.current=w,a.total=l},function(w,l){a.error=l||""});case 2:if(D=m.sent,P=D.success,!P){m.next=14;break}return m.next=7,(0,$.Ri)(this.target,this.target.slice(0,-4));case 7:if(f=m.sent,f.success){m.next=12;break}this.error=f.errMsg,m.next=14;break;case 12:return m.next=14,(0,$.Yd)(this.target);case 14:this.finished=!0;case 15:case"end":return m.stop()}},u,this)}));function b(){return y.apply(this,arguments)}return b}()}]),c}(n)},92380:function(K,C,e){e.d(C,{t:function(){return T}});function T(r){for(var p=["B","KB","MB","GB","TB"],t=0;r>1024;)r/=1024,t++;return"".concat(r.toFixed(2)," ").concat(p[t])}},85504:function(K,C,e){e.d(C,{_:function(){return p},i:function(){return r}});var T=e(62435),r={info:void 0,tasks:[],setCtx:function(){},setIframeVisible:function(){},setIframeSrc:function(){}},p=T.createContext(r)},53371:function(K,C,e){e.d(C,{Dy:function(){return p},Us:function(){return r},XP:function(){return T}});function T(t){var h=t.lastIndexOf("/");return h===-1?"/":t.substring(0,h)}function r(t){var h=t.lastIndexOf("/");return h===-1?t:t.substring(h+1)}function p(){for(var t=arguments.length,h=new Array(t),E=0;E<t;E++)h[E]=arguments[E];return h.join("/").replace(/\/+/g,"/")}}}]);
