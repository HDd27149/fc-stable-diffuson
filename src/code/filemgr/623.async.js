(self.webpackChunk=self.webpackChunk||[]).push([[623],{89629:function(){"use strict"},83204:function(re,G,z){"use strict";var $=z(3930),J=z(48002),P=z(59682);function H(L,E,u){u===void 0&&(u={});var g=(0,$.Z)(E);(0,P.Z)(function(){var l=(0,J.n)(u.target,window);if(l!=null&&l.addEventListener){var p=function(c){return g.current(c)};return l.addEventListener(L,p,{capture:u.capture,once:u.once,passive:u.passive}),function(){l.removeEventListener(L,p,{capture:u.capture})}}},[L,u.capture,u.once,u.passive],u.target)}G.Z=H},3930:function(re,G,z){"use strict";var $=z(62435);function J(P){var H=(0,$.useRef)(P);return H.current=P,H}G.Z=J},22638:function(re,G,z){"use strict";var $=z(62435),J=z(92770),P=z(31663);function H(L){P.Z&&((0,J.mf)(L)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof L)));var E=(0,$.useRef)(L);E.current=(0,$.useMemo)(function(){return L},[L]);var u=(0,$.useRef)();return u.current||(u.current=function(){for(var g=[],l=0;l<arguments.length;l++)g[l]=arguments[l];return E.current.apply(this,g)}),u.current}G.Z=H},45210:function(re,G,z){"use strict";var $=z(62435),J=z(3930),P=z(92770),H=z(31663),L=function(E){H.Z&&((0,P.mf)(E)||console.error("useUnmount expected parameter is a function, got ".concat(typeof E)));var u=(0,J.Z)(E);(0,$.useEffect)(function(){return function(){u.current()}},[])};G.Z=L},77348:function(re,G,z){"use strict";z.d(G,{Z:function(){return u}});var $=z(97582),J=z(62435),P=z(3930),H=z(22638),L=z(45210),E;(function(g){g[g.Connecting=0]="Connecting",g[g.Open=1]="Open",g[g.Closing=2]="Closing",g[g.Closed=3]="Closed"})(E||(E={}));function u(g,l){l===void 0&&(l={});var p=l.reconnectLimit,c=p===void 0?3:p,f=l.reconnectInterval,h=f===void 0?3*1e3:f,_=l.manual,t=_===void 0?!1:_,r=l.onOpen,o=l.onClose,i=l.onMessage,n=l.onError,e=l.protocols,a=(0,P.Z)(r),s=(0,P.Z)(o),d=(0,P.Z)(i),y=(0,P.Z)(n),S=(0,J.useRef)(0),C=(0,J.useRef)(),A=(0,J.useRef)(),k=(0,J.useRef)(!1),I=(0,$.__read)((0,J.useState)(),2),O=I[0],b=I[1],v=(0,$.__read)((0,J.useState)(E.Closed),2),m=v[0],w=v[1],D=function(){var Z;S.current<c&&((Z=A.current)===null||Z===void 0?void 0:Z.readyState)!==E.Open&&(C.current&&clearTimeout(C.current),C.current=setTimeout(function(){T(),S.current++},h))},T=function(){C.current&&clearTimeout(C.current),A.current&&A.current.close();var Z=new WebSocket(g,e);w(E.Connecting),Z.onerror=function(K){var R;k.current||(D(),(R=y.current)===null||R===void 0||R.call(y,K,Z),w(Z.readyState||E.Closed))},Z.onopen=function(K){var R;k.current||((R=a.current)===null||R===void 0||R.call(a,K,Z),S.current=0,w(Z.readyState||E.Open))},Z.onmessage=function(K){var R;k.current||((R=d.current)===null||R===void 0||R.call(d,K,Z),b(K))},Z.onclose=function(K){var R;k.current||(D(),(R=s.current)===null||R===void 0||R.call(s,K,Z),w(Z.readyState||E.Closed))},A.current=Z},F=function(Z){var K;if(m===E.Open)(K=A.current)===null||K===void 0||K.send(Z);else throw new Error("WebSocket disconnected")},N=function(){S.current=0,T()},V=function(){var Z;C.current&&clearTimeout(C.current),S.current=c,(Z=A.current)===null||Z===void 0||Z.close()};return(0,J.useEffect)(function(){t||N()},[g,t]),(0,L.Z)(function(){k.current=!0,V()}),{latestMessage:O,sendMessage:(0,H.Z)(F),connect:(0,H.Z)(N),disconnect:(0,H.Z)(V),readyState:m,webSocketIns:A.current}}},40351:function(re,G,z){"use strict";var $=z(62435),J=z(45210),P=z(8224),H=z(48002),L=function(E){var u=function(g,l,p){var c=(0,$.useRef)(!1),f=(0,$.useRef)([]),h=(0,$.useRef)([]),_=(0,$.useRef)();E(function(){var t,r=Array.isArray(p)?p:[p],o=r.map(function(i){return(0,H.n)(i)});if(!c.current){c.current=!0,f.current=o,h.current=l,_.current=g();return}(o.length!==f.current.length||!(0,P.Z)(o,f.current)||!(0,P.Z)(l,h.current))&&((t=_.current)===null||t===void 0||t.call(_),f.current=o,h.current=l,_.current=g())}),(0,J.Z)(function(){var t;(t=_.current)===null||t===void 0||t.call(_),c.current=!1})};return u};G.Z=L},8224:function(re,G,z){"use strict";z.d(G,{Z:function(){return $}});function $(J,P){if(J===P)return!0;for(var H=0;H<J.length;H++)if(!Object.is(J[H],P[H]))return!1;return!0}},48002:function(re,G,z){"use strict";z.d(G,{n:function(){return P}});var $=z(92770),J=z(52982);function P(H,L){if(J.Z){if(!H)return L;var E;return(0,$.mf)(H)?E=H():"current"in H?E=H.current:E=H,E}}},92770:function(re,G,z){"use strict";z.d(G,{G7:function(){return E},hj:function(){return L},mf:function(){return J}});var $=function(u){return u!==null&&typeof u=="object"},J=function(u){return typeof u=="function"},P=function(u){return typeof u=="string"},H=function(u){return typeof u=="boolean"},L=function(u){return typeof u=="number"},E=function(u){return typeof u=="undefined"}},52982:function(re,G){"use strict";var z=!!(typeof window!="undefined"&&window.document&&window.document.createElement);G.Z=z},31663:function(re,G){"use strict";var z=!1;G.Z=z},59682:function(re,G,z){"use strict";var $=z(62435),J=z(40351),P=(0,J.Z)($.useEffect);G.Z=P},53291:function(re,G,z){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var $=z(62435);function J(H){var L=(0,$.useRef)(H);return L.current=H,L}var P=J;G.default=P},70717:function(re,G,z){"use strict";var $=z(64836);Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var J=$(z(18698)),P=z(62435),H=z(51390),L=$(z(526));function E(g){L.default&&((0,H.isFunction)(g)||console.error("useMemoizedFn expected parameter is a function, got ".concat((0,J.default)(g))));var l=(0,P.useRef)(g);l.current=(0,P.useMemo)(function(){return g},[g]);var p=(0,P.useRef)();return p.current||(p.current=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];return l.current.apply(this,c)}),p.current}var u=E;G.default=u},51040:function(re,G,z){"use strict";var $=z(64836);Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var J=$(z(18698)),P=z(62435),H=$(z(53291)),L=z(51390),E=$(z(526)),u=function(p){E.default&&((0,L.isFunction)(p)||console.error("useUnmount expected parameter is a function, got ".concat((0,J.default)(p))));var c=(0,H.default)(p);(0,P.useEffect)(function(){return function(){c.current()}},[])},g=u;G.default=g},66898:function(re,G,z){"use strict";var $,J=z(64836);$={value:!0},G.kQ=void 0,$=l;var P=z(97582),H=z(62435),L=J(z(53291)),E=J(z(70717)),u=J(z(51040)),g;G.kQ=g,function(p){p[p.Connecting=0]="Connecting",p[p.Open=1]="Open",p[p.Closing=2]="Closing",p[p.Closed=3]="Closed"}(g||(G.kQ=g={}));function l(p,c){c===void 0&&(c={});var f=c.reconnectLimit,h=f===void 0?3:f,_=c.reconnectInterval,t=_===void 0?3*1e3:_,r=c.manual,o=r===void 0?!1:r,i=c.onOpen,n=c.onClose,e=c.onMessage,a=c.onError,s=c.protocols,d=(0,L.default)(i),y=(0,L.default)(n),S=(0,L.default)(e),C=(0,L.default)(a),A=(0,H.useRef)(0),k=(0,H.useRef)(),I=(0,H.useRef)(),O=(0,H.useRef)(!1),b=(0,P.__read)((0,H.useState)(),2),v=b[0],m=b[1],w=(0,P.__read)((0,H.useState)(g.Closed),2),D=w[0],T=w[1],F=function(){var Y;A.current<h&&((Y=I.current)===null||Y===void 0?void 0:Y.readyState)!==g.Open&&(k.current&&clearTimeout(k.current),k.current=setTimeout(function(){N(),A.current++},t))},N=function(){k.current&&clearTimeout(k.current),I.current&&I.current.close();var Y=new WebSocket(p,s);T(g.Connecting),Y.onerror=function(j){var W;O.current||(F(),(W=C.current)===null||W===void 0||W.call(C,j,Y),T(Y.readyState||g.Closed))},Y.onopen=function(j){var W;O.current||((W=d.current)===null||W===void 0||W.call(d,j,Y),A.current=0,T(Y.readyState||g.Open))},Y.onmessage=function(j){var W;O.current||((W=S.current)===null||W===void 0||W.call(S,j,Y),m(j))},Y.onclose=function(j){var W;O.current||(F(),(W=y.current)===null||W===void 0||W.call(y,j,Y),T(Y.readyState||g.Closed))},I.current=Y},V=function(Y){var j;if(D===g.Open)(j=I.current)===null||j===void 0||j.send(Y);else throw new Error("WebSocket disconnected")},Z=function(){A.current=0,N()},K=function(){var Y;k.current&&clearTimeout(k.current),A.current=h,(Y=I.current)===null||Y===void 0||Y.close()};return(0,H.useEffect)(function(){o||Z()},[p,o]),(0,u.default)(function(){O.current=!0,K()}),{latestMessage:v,sendMessage:(0,E.default)(V),connect:(0,E.default)(Z),disconnect:(0,E.default)(K),readyState:D,webSocketIns:I.current}}},51390:function(re,G,z){"use strict";var $=z(64836);Object.defineProperty(G,"__esModule",{value:!0}),G.isUndef=G.isString=G.isObject=G.isNumber=G.isFunction=G.isBoolean=void 0;var J=$(z(18698)),P=function(p){return p!==null&&(0,J.default)(p)==="object"};G.isObject=P;var H=function(p){return typeof p=="function"};G.isFunction=H;var L=function(p){return typeof p=="string"};G.isString=L;var E=function(p){return typeof p=="boolean"};G.isBoolean=E;var u=function(p){return typeof p=="number"};G.isNumber=u;var g=function(p){return typeof p=="undefined"};G.isUndef=g},526:function(re,G){"use strict";Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var z=!1,$=z;G.default=$},98866:function(re,G,z){"use strict";z.d(G,{n:function(){return P}});var $=z(62435);const J=$.createContext(!1),P=H=>{let{children:L,disabled:E}=H;const u=$.useContext(J);return $.createElement(J.Provider,{value:E!=null?E:u},L)};G.Z=J},80110:function(re,G,z){"use strict";z.d(G,{c:function(){return P}});function $(H,L,E){const{focusElCls:u,focus:g,borderElCls:l}=E,p=l?"> *":"",c=["hover",g?"focus":null,"active"].filter(Boolean).map(f=>`&:${f} ${p}`).join(",");return{[`&-item:not(${L}-last-item)`]:{marginInlineEnd:-H.lineWidth},"&-item":Object.assign(Object.assign({[c]:{zIndex:2}},u?{[`&${u}`]:{zIndex:2}}:{}),{[`&[disabled] ${p}`]:{zIndex:0}})}}function J(H,L,E){const{borderElCls:u}=E,g=u?`> ${u}`:"";return{[`&-item:not(${L}-first-item):not(${L}-last-item) ${g}`]:{borderRadius:0},[`&-item:not(${L}-last-item)${L}-first-item`]:{[`& ${g}, &${H}-sm ${g}, &${H}-lg ${g}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${L}-first-item)${L}-last-item`]:{[`& ${g}, &${H}-sm ${g}, &${H}-lg ${g}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function P(H){let L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:E}=H,u=`${E}-compact`;return{[u]:Object.assign(Object.assign({},$(H,u,L)),J(E,u,L))}}},12617:function(re){(function(G,z){re.exports=z()})(self,function(){return(()=>{"use strict";var G={775:($,J)=>{Object.defineProperty(J,"__esModule",{value:!0}),J.FitAddon=void 0;var P=function(){function H(){}return H.prototype.activate=function(L){this._terminal=L},H.prototype.dispose=function(){},H.prototype.fit=function(){var L=this.proposeDimensions();if(L&&this._terminal){var E=this._terminal._core;this._terminal.rows===L.rows&&this._terminal.cols===L.cols||(E._renderService.clear(),this._terminal.resize(L.cols,L.rows))}},H.prototype.proposeDimensions=function(){if(this._terminal&&this._terminal.element&&this._terminal.element.parentElement){var L=this._terminal._core;if(L._renderService.dimensions.actualCellWidth!==0&&L._renderService.dimensions.actualCellHeight!==0){var E=window.getComputedStyle(this._terminal.element.parentElement),u=parseInt(E.getPropertyValue("height")),g=Math.max(0,parseInt(E.getPropertyValue("width"))),l=window.getComputedStyle(this._terminal.element),p=u-(parseInt(l.getPropertyValue("padding-top"))+parseInt(l.getPropertyValue("padding-bottom"))),c=g-(parseInt(l.getPropertyValue("padding-right"))+parseInt(l.getPropertyValue("padding-left")))-L.viewport.scrollBarWidth;return{cols:Math.max(2,Math.floor(c/L._renderService.dimensions.actualCellWidth)),rows:Math.max(1,Math.floor(p/L._renderService.dimensions.actualCellHeight))}}}},H}();J.FitAddon=P}},z={};return function $(J){if(z[J])return z[J].exports;var P=z[J]={exports:{}};return G[J](P,P.exports,$),P.exports}(775)})()})},88830:function(re,G,z){"use strict";z.d(G,{O:function(){return J}});var $=function(P){var H={};function L(E){if(H[E])return H[E].exports;var u=H[E]={i:E,l:!1,exports:{}};return P[E].call(u.exports,u,u.exports,L),u.l=!0,u.exports}return L.m=P,L.c=H,L.d=function(E,u,g){L.o(E,u)||Object.defineProperty(E,u,{enumerable:!0,get:g})},L.r=function(E){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})},L.t=function(E,u){if(1&u&&(E=L(E)),8&u||4&u&&typeof E=="object"&&E&&E.__esModule)return E;var g=Object.create(null);if(L.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:E}),2&u&&typeof E!="string")for(var l in E)L.d(g,l,function(p){return E[p]}.bind(null,l));return g},L.n=function(E){var u=E&&E.__esModule?function(){return E.default}:function(){return E};return L.d(u,"a",u),u},L.o=function(E,u){return Object.prototype.hasOwnProperty.call(E,u)},L.p="",L(L.s=70)}([function(P,H,L){P.exports=L(64)()},function(P,H,L){(function(E){var u=function(g){return g&&g.Math==Math&&g};P.exports=u(typeof globalThis=="object"&&globalThis)||u(typeof window=="object"&&window)||u(typeof self=="object"&&self)||u(typeof E=="object"&&E)||Function("return this")()}).call(this,L(31))},function(P,H){P.exports=function(L){try{return!!L()}catch(E){return!0}}},function(P,H){var L={}.hasOwnProperty;P.exports=function(E,u){return L.call(E,u)}},function(P,H,L){var E=L(2);P.exports=!E(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(P,H){P.exports=function(L){return typeof L=="object"?L!==null:typeof L=="function"}},function(P,H,L){var E=L(4),u=L(17),g=L(11);P.exports=E?function(l,p,c){return u.f(l,p,g(1,c))}:function(l,p,c){return l[p]=c,l}},function(P,H,L){"use strict";P.exports=L(62)},function(P,H,L){var E=L(12),u=L(14);P.exports=function(g){return E(u(g))}},function(P,H,L){var E=L(1),u=L(6);P.exports=function(g,l){try{u(E,g,l)}catch(p){E[g]=l}return l}},function(P,H,L){var E=L(4),u=L(32),g=L(11),l=L(8),p=L(15),c=L(3),f=L(16),h=Object.getOwnPropertyDescriptor;H.f=E?h:function(_,t){if(_=l(_),t=p(t,!0),f)try{return h(_,t)}catch(r){}if(c(_,t))return g(!u.f.call(_,t),_[t])}},function(P,H){P.exports=function(L,E){return{enumerable:!(1&L),configurable:!(2&L),writable:!(4&L),value:E}}},function(P,H,L){var E=L(2),u=L(13),g="".split;P.exports=E(function(){return!Object("z").propertyIsEnumerable(0)})?function(l){return u(l)=="String"?g.call(l,""):Object(l)}:Object},function(P,H){var L={}.toString;P.exports=function(E){return L.call(E).slice(8,-1)}},function(P,H){P.exports=function(L){if(L==null)throw TypeError("Can't call method on "+L);return L}},function(P,H,L){var E=L(5);P.exports=function(u,g){if(!E(u))return u;var l,p;if(g&&typeof(l=u.toString)=="function"&&!E(p=l.call(u))||typeof(l=u.valueOf)=="function"&&!E(p=l.call(u))||!g&&typeof(l=u.toString)=="function"&&!E(p=l.call(u)))return p;throw TypeError("Can't convert object to primitive value")}},function(P,H,L){var E=L(4),u=L(2),g=L(33);P.exports=!E&&!u(function(){return Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a!=7})},function(P,H,L){var E=L(4),u=L(16),g=L(18),l=L(15),p=Object.defineProperty;H.f=E?p:function(c,f,h){if(g(c),f=l(f,!0),g(h),u)try{return p(c,f,h)}catch(_){}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(c[f]=h.value),c}},function(P,H,L){var E=L(5);P.exports=function(u){if(!E(u))throw TypeError(String(u)+" is not an object");return u}},function(P,H,L){var E=L(20),u=Function.toString;typeof E.inspectSource!="function"&&(E.inspectSource=function(g){return u.call(g)}),P.exports=E.inspectSource},function(P,H,L){var E=L(1),u=L(9),g=E["__core-js_shared__"]||u("__core-js_shared__",{});P.exports=g},function(P,H,L){var E=L(38),u=L(20);(P.exports=function(g,l){return u[g]||(u[g]=l!==void 0?l:{})})("versions",[]).push({version:"3.6.5",mode:E?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},function(P,H){var L=0,E=Math.random();P.exports=function(u){return"Symbol("+String(u===void 0?"":u)+")_"+(++L+E).toString(36)}},function(P,H){P.exports={}},function(P,H,L){var E=L(25),u=Math.min;P.exports=function(g){return g>0?u(E(g),9007199254740991):0}},function(P,H){var L=Math.ceil,E=Math.floor;P.exports=function(u){return isNaN(u=+u)?0:(u>0?E:L)(u)}},function(P,H,L){"use strict";var E=L(50).forEach,u=L(58),g=L(59),l=u("forEach"),p=g("forEach");P.exports=l&&p?[].forEach:function(c){return E(this,c,arguments.length>1?arguments[1]:void 0)}},function(P,H,L){var E=L(2);P.exports=!!Object.getOwnPropertySymbols&&!E(function(){return!String(Symbol())})},function(P,H,L){P.exports=function(E){var u={};function g(l){if(u[l])return u[l].exports;var p=u[l]={i:l,l:!1,exports:{}};return E[l].call(p.exports,p,p.exports,g),p.l=!0,p.exports}return g.m=E,g.c=u,g.d=function(l,p,c){g.o(l,p)||Object.defineProperty(l,p,{enumerable:!0,get:c})},g.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},g.t=function(l,p){if(1&p&&(l=g(l)),8&p||4&p&&typeof l=="object"&&l&&l.__esModule)return l;var c=Object.create(null);if(g.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:l}),2&p&&typeof l!="string")for(var f in l)g.d(c,f,function(h){return l[h]}.bind(null,f));return c},g.n=function(l){var p=l&&l.__esModule?function(){return l.default}:function(){return l};return g.d(p,"a",p),p},g.o=function(l,p){return Object.prototype.hasOwnProperty.call(l,p)},g.p="",g(g.s=32)}([function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(){this._listeners=[],this._disposed=!1}return Object.defineProperty(p.prototype,"event",{get:function(){var c=this;return this._event||(this._event=function(f){return c._listeners.push(f),{dispose:function(){if(!c._disposed){for(var h=0;h<c._listeners.length;h++)if(c._listeners[h]===f)return void c._listeners.splice(h,1)}}}}),this._event},enumerable:!0,configurable:!0}),p.prototype.fire=function(c,f){for(var h=[],_=0;_<this._listeners.length;_++)h.push(this._listeners[_]);for(_=0;_<h.length;_++)h[_].call(void 0,c,f)},p.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},p}();u.EventEmitter=l},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(14);u.IBufferService=l.createDecorator("BufferService"),u.ICoreMouseService=l.createDecorator("CoreMouseService"),u.ICoreService=l.createDecorator("CoreService"),u.ICharsetService=l.createDecorator("CharsetService"),u.IDirtyRowService=l.createDecorator("DirtyRowService"),u.IInstantiationService=l.createDecorator("InstantiationService"),u.ILogService=l.createDecorator("LogService"),u.IOptionsService=l.createDecorator("OptionsService"),u.IUnicodeService=l.createDecorator("UnicodeService")},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(){this._disposables=[],this._isDisposed=!1}return p.prototype.dispose=function(){this._isDisposed=!0,this._disposables.forEach(function(c){return c.dispose()}),this._disposables.length=0},p.prototype.register=function(c){this._disposables.push(c)},p.prototype.unregister=function(c){var f=this._disposables.indexOf(c);f!==-1&&this._disposables.splice(f,1)},p}();u.Disposable=l},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.DEFAULT_COLOR=256,u.DEFAULT_ATTR=256|u.DEFAULT_COLOR<<9,u.CHAR_DATA_ATTR_INDEX=0,u.CHAR_DATA_CHAR_INDEX=1,u.CHAR_DATA_WIDTH_INDEX=2,u.CHAR_DATA_CODE_INDEX=3,u.NULL_CELL_CHAR="",u.NULL_CELL_WIDTH=1,u.NULL_CELL_CODE=0,u.WHITESPACE_CELL_CHAR=" ",u.WHITESPACE_CELL_WIDTH=1,u.WHITESPACE_CELL_CODE=32},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(14);u.ICharSizeService=l.createDecorator("CharSizeService"),u.ICoreBrowserService=l.createDecorator("CoreBrowserService"),u.IMouseService=l.createDecorator("MouseService"),u.IRenderService=l.createDecorator("RenderService"),u.ISelectionService=l.createDecorator("SelectionService"),u.ISoundService=l.createDecorator("SoundService")},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(_,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])})(_,t)},function(_,t){function r(){this.constructor=_}l(_,t),_.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0});var c=g(7),f=g(3),h=function(_){function t(){var r=_!==null&&_.apply(this,arguments)||this;return r.content=0,r.fg=0,r.bg=0,r.combinedData="",r}return p(t,_),t.fromCharData=function(r){var o=new t;return o.setFromCharData(r),o},t.prototype.isCombined=function(){return 2097152&this.content},t.prototype.getWidth=function(){return this.content>>22},t.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?c.stringFromCodePoint(2097151&this.content):""},t.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},t.prototype.setFromCharData=function(r){this.fg=r[f.CHAR_DATA_ATTR_INDEX],this.bg=0;var o=!1;if(r[f.CHAR_DATA_CHAR_INDEX].length>2)o=!0;else if(r[f.CHAR_DATA_CHAR_INDEX].length===2){var i=r[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){var n=r[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=n&&n<=57343?this.content=1024*(i-55296)+n-56320+65536|r[f.CHAR_DATA_WIDTH_INDEX]<<22:o=!0}else o=!0}else this.content=r[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|r[f.CHAR_DATA_WIDTH_INDEX]<<22;o&&(this.combinedData=r[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|r[f.CHAR_DATA_WIDTH_INDEX]<<22)},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(g(6).AttributeData);u.CellData=h},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(){this.fg=0,this.bg=0}return p.toColorRGB=function(c){return[c>>>16&255,c>>>8&255,255&c]},p.fromColorRGB=function(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]},p.prototype.clone=function(){var c=new p;return c.fg=this.fg,c.bg=this.bg,c},p.prototype.isInverse=function(){return 67108864&this.fg},p.prototype.isBold=function(){return 134217728&this.fg},p.prototype.isUnderline=function(){return 268435456&this.fg},p.prototype.isBlink=function(){return 536870912&this.fg},p.prototype.isInvisible=function(){return 1073741824&this.fg},p.prototype.isItalic=function(){return 67108864&this.bg},p.prototype.isDim=function(){return 134217728&this.bg},p.prototype.getFgColorMode=function(){return 50331648&this.fg},p.prototype.getBgColorMode=function(){return 50331648&this.bg},p.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},p.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},p.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},p.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},p.prototype.isFgDefault=function(){return(50331648&this.fg)==0},p.prototype.isBgDefault=function(){return(50331648&this.bg)==0},p.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},p.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},p.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},p}();u.AttributeData=l},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},u.utf32ToString=function(c,f,h){f===void 0&&(f=0),h===void 0&&(h=c.length);for(var _="",t=f;t<h;++t){var r=c[t];r>65535?(r-=65536,_+=String.fromCharCode(55296+(r>>10))+String.fromCharCode(r%1024+56320)):_+=String.fromCharCode(r)}return _};var l=function(){function c(){this._interim=0}return c.prototype.clear=function(){this._interim=0},c.prototype.decode=function(f,h){var _=f.length;if(!_)return 0;var t=0,r=0;this._interim&&(56320<=(n=f.charCodeAt(r++))&&n<=57343?h[t++]=1024*(this._interim-55296)+n-56320+65536:(h[t++]=this._interim,h[t++]=n),this._interim=0);for(var o=r;o<_;++o){var i=f.charCodeAt(o);if(55296<=i&&i<=56319){if(++o>=_)return this._interim=i,t;var n;56320<=(n=f.charCodeAt(o))&&n<=57343?h[t++]=1024*(i-55296)+n-56320+65536:(h[t++]=i,h[t++]=n)}else h[t++]=i}return t},c}();u.StringToUtf32=l;var p=function(){function c(){this.interim=new Uint8Array(3)}return c.prototype.clear=function(){this.interim.fill(0)},c.prototype.decode=function(f,h){var _=f.length;if(!_)return 0;var t,r,o,i,n=0,e=0,a=0;if(this.interim[0]){var s=!1,d=this.interim[0];d&=(224&d)==192?31:(240&d)==224?15:7;for(var y=0,S=void 0;(S=63&this.interim[++y])&&y<4;)d<<=6,d|=S;for(var C=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,A=C-y;a<A;){if(a>=_)return 0;if((192&(S=f[a++]))!=128){a--,s=!0;break}this.interim[y++]=S,d<<=6,d|=63&S}s||(C===2?d<128?a--:h[n++]=d:C===3?d<2048||d>=55296&&d<=57343||(h[n++]=d):d<65536||d>1114111||(h[n++]=d)),this.interim.fill(0)}for(var k=_-4,I=a;I<_;){for(;!(!(I<k)||128&(t=f[I])||128&(r=f[I+1])||128&(o=f[I+2])||128&(i=f[I+3]));)h[n++]=t,h[n++]=r,h[n++]=o,h[n++]=i,I+=4;if((t=f[I++])<128)h[n++]=t;else if((224&t)==192){if(I>=_)return this.interim[0]=t,n;if((192&(r=f[I++]))!=128){I--;continue}if((e=(31&t)<<6|63&r)<128){I--;continue}h[n++]=e}else if((240&t)==224){if(I>=_)return this.interim[0]=t,n;if((192&(r=f[I++]))!=128){I--;continue}if(I>=_)return this.interim[0]=t,this.interim[1]=r,n;if((192&(o=f[I++]))!=128){I--;continue}if((e=(15&t)<<12|(63&r)<<6|63&o)<2048||e>=55296&&e<=57343)continue;h[n++]=e}else if((248&t)==240){if(I>=_)return this.interim[0]=t,n;if((192&(r=f[I++]))!=128){I--;continue}if(I>=_)return this.interim[0]=t,this.interim[1]=r,n;if((192&(o=f[I++]))!=128){I--;continue}if(I>=_)return this.interim[0]=t,this.interim[1]=r,this.interim[2]=o,n;if((192&(i=f[I++]))!=128){I--;continue}if((e=(7&t)<<18|(63&r)<<12|(63&o)<<6|63&i)<65536||e>1114111)continue;h[n++]=e}}return n},c}();u.Utf8ToUtf32=p},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.addDisposableDomListener=function(l,p,c,f){l.addEventListener(p,c,f);var h=!1;return{dispose:function(){h||(h=!0,l.removeEventListener(p,c,f))}}}},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.INVERTED_DEFAULT_COLOR=257,u.DIM_OPACITY=.5,u.CHAR_ATLAS_CELL_SPACING=1},function(E,u,g){"use strict";var l,p,c,f;function h(t){var r=t.toString(16);return r.length<2?"0"+r:r}function _(t,r){return t<r?(r+.05)/(t+.05):(t+.05)/(r+.05)}Object.defineProperty(u,"__esModule",{value:!0}),function(t){t.toCss=function(r,o,i,n){return n!==void 0?"#"+h(r)+h(o)+h(i)+h(n):"#"+h(r)+h(o)+h(i)},t.toRgba=function(r,o,i,n){return n===void 0&&(n=255),(r<<24|o<<16|i<<8|n)>>>0}}(l=u.channels||(u.channels={})),(p=u.color||(u.color={})).blend=function(t,r){var o=(255&r.rgba)/255;if(o===1)return{css:r.css,rgba:r.rgba};var i=r.rgba>>24&255,n=r.rgba>>16&255,e=r.rgba>>8&255,a=t.rgba>>24&255,s=t.rgba>>16&255,d=t.rgba>>8&255,y=a+Math.round((i-a)*o),S=s+Math.round((n-s)*o),C=d+Math.round((e-d)*o);return{css:l.toCss(y,S,C),rgba:l.toRgba(y,S,C)}},p.ensureContrastRatio=function(t,r,o){var i=f.ensureContrastRatio(t.rgba,r.rgba,o);if(i)return f.toColor(i>>24&255,i>>16&255,i>>8&255)},p.opaque=function(t){var r=(255|t.rgba)>>>0,o=f.toChannels(r),i=o[0],n=o[1],e=o[2];return{css:l.toCss(i,n,e),rgba:r}},(u.css||(u.css={})).toColor=function(t){return{css:t,rgba:(parseInt(t.slice(1),16)<<8|255)>>>0}},function(t){function r(o,i,n){var e=o/255,a=i/255,s=n/255;return .2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))}t.relativeLuminance=function(o){return r(o>>16&255,o>>8&255,255&o)},t.relativeLuminance2=r}(c=u.rgb||(u.rgb={})),function(t){function r(i,n,e){for(var a=i>>24&255,s=i>>16&255,d=i>>8&255,y=n>>24&255,S=n>>16&255,C=n>>8&255,A=_(c.relativeLuminance2(y,C,S),c.relativeLuminance2(a,s,d));A<e&&(y>0||S>0||C>0);)y-=Math.max(0,Math.ceil(.1*y)),S-=Math.max(0,Math.ceil(.1*S)),C-=Math.max(0,Math.ceil(.1*C)),A=_(c.relativeLuminance2(y,C,S),c.relativeLuminance2(a,s,d));return(y<<24|S<<16|C<<8|255)>>>0}function o(i,n,e){for(var a=i>>24&255,s=i>>16&255,d=i>>8&255,y=n>>24&255,S=n>>16&255,C=n>>8&255,A=_(c.relativeLuminance2(y,C,S),c.relativeLuminance2(a,s,d));A<e&&(y<255||S<255||C<255);)y=Math.min(255,y+Math.ceil(.1*(255-y))),S=Math.min(255,S+Math.ceil(.1*(255-S))),C=Math.min(255,C+Math.ceil(.1*(255-C))),A=_(c.relativeLuminance2(y,C,S),c.relativeLuminance2(a,s,d));return(y<<24|S<<16|C<<8|255)>>>0}t.ensureContrastRatio=function(i,n,e){var a=c.relativeLuminance(i>>8),s=c.relativeLuminance(n>>8);if(_(a,s)<e)return s<a?r(i,n,e):o(i,n,e)},t.reduceLuminance=r,t.increaseLuminance=o,t.toChannels=function(i){return[i>>24&255,i>>16&255,i>>8&255,255&i]},t.toColor=function(i,n,e){return{css:l.toCss(i,n,e),rgba:l.toRgba(i,n,e)}}}(f=u.rgba||(u.rgba={})),u.toPaddedHex=h,u.contrastRatio=_},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=typeof navigator=="undefined",p=l?"node":navigator.userAgent,c=l?"node":navigator.platform;function f(h,_){return h.indexOf(_)>=0}u.isFirefox=!!~p.indexOf("Firefox"),u.isSafari=/^((?!chrome|android).)*safari/i.test(p),u.isMac=f(["Macintosh","MacIntel","MacPPC","Mac68K"],c),u.isIpad=c==="iPad",u.isIphone=c==="iPhone",u.isWindows=f(["Windows","Win16","Win32","WinCE"],c),u.isLinux=c.indexOf("Linux")>=0},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL="\x7F"}(u.C0||(u.C0={})),function(l){l.PAD="\x80",l.HOP="\x81",l.BPH="\x82",l.NBH="\x83",l.IND="\x84",l.NEL="\x85",l.SSA="\x86",l.ESA="\x87",l.HTS="\x88",l.HTJ="\x89",l.VTS="\x8A",l.PLD="\x8B",l.PLU="\x8C",l.RI="\x8D",l.SS2="\x8E",l.SS3="\x8F",l.DCS="\x90",l.PU1="\x91",l.PU2="\x92",l.STS="\x93",l.CCH="\x94",l.MW="\x95",l.SPA="\x96",l.EPA="\x97",l.SOS="\x98",l.SGCI="\x99",l.SCI="\x9A",l.CSI="\x9B",l.ST="\x9C",l.OSC="\x9D",l.PM="\x9E",l.APC="\x9F"}(u.C1||(u.C1={}))},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(3),p=g(9),c=g(23),f=g(6),h=g(26),_=g(10),t=function(){function r(o,i,n,e,a,s,d,y){this._container=o,this._alpha=e,this._colors=a,this._rendererId=s,this._bufferService=d,this._optionsService=y,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+i+"-layer"),this._canvas.style.zIndex=n.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return r.prototype.dispose=function(){var o;this._container.removeChild(this._canvas),(o=this._charAtlas)===null||o===void 0||o.dispose()},r.prototype._initCanvas=function(){this._ctx=h.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},r.prototype.onOptionsChanged=function(){},r.prototype.onBlur=function(){},r.prototype.onFocus=function(){},r.prototype.onCursorMove=function(){},r.prototype.onGridChanged=function(o,i){},r.prototype.onSelectionChanged=function(o,i,n){n===void 0&&(n=!1)},r.prototype.setColors=function(o){this._refreshCharAtlas(o)},r.prototype._setTransparency=function(o){if(o!==this._alpha){var i=this._canvas;this._alpha=o,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,i),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},r.prototype._refreshCharAtlas=function(o){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=c.acquireCharAtlas(this._optionsService.options,this._rendererId,o,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},r.prototype.resize=function(o){this._scaledCellWidth=o.scaledCellWidth,this._scaledCellHeight=o.scaledCellHeight,this._scaledCharWidth=o.scaledCharWidth,this._scaledCharHeight=o.scaledCharHeight,this._scaledCharLeft=o.scaledCharLeft,this._scaledCharTop=o.scaledCharTop,this._canvas.width=o.scaledCanvasWidth,this._canvas.height=o.scaledCanvasHeight,this._canvas.style.width=o.canvasWidth+"px",this._canvas.style.height=o.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},r.prototype._fillCells=function(o,i,n,e){this._ctx.fillRect(o*this._scaledCellWidth,i*this._scaledCellHeight,n*this._scaledCellWidth,e*this._scaledCellHeight)},r.prototype._fillBottomLineAtCells=function(o,i,n){n===void 0&&(n=1),this._ctx.fillRect(o*this._scaledCellWidth,(i+1)*this._scaledCellHeight-window.devicePixelRatio-1,n*this._scaledCellWidth,window.devicePixelRatio)},r.prototype._fillLeftLineAtCell=function(o,i,n){this._ctx.fillRect(o*this._scaledCellWidth,i*this._scaledCellHeight,window.devicePixelRatio*n,this._scaledCellHeight)},r.prototype._strokeRectAtCell=function(o,i,n,e){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(o*this._scaledCellWidth+window.devicePixelRatio/2,i*this._scaledCellHeight+window.devicePixelRatio/2,n*this._scaledCellWidth-window.devicePixelRatio,e*this._scaledCellHeight-window.devicePixelRatio)},r.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},r.prototype._clearCells=function(o,i,n,e){this._alpha?this._ctx.clearRect(o*this._scaledCellWidth,i*this._scaledCellHeight,n*this._scaledCellWidth,e*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(o*this._scaledCellWidth,i*this._scaledCellHeight,n*this._scaledCellWidth,e*this._scaledCellHeight))},r.prototype._fillCharTrueColor=function(o,i,n){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="middle",this._clipRow(n),this._ctx.fillText(o.getChars(),i*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},r.prototype._drawChars=function(o,i,n){var e,a,s=this._getContrastColor(o);s||o.isFgRGB()||o.isBgRGB()?this._drawUncachedChars(o,i,n,s):(o.isInverse()?(e=o.isBgDefault()?p.INVERTED_DEFAULT_COLOR:o.getBgColor(),a=o.isFgDefault()?p.INVERTED_DEFAULT_COLOR:o.getFgColor()):(a=o.isBgDefault()?l.DEFAULT_COLOR:o.getBgColor(),e=o.isFgDefault()?l.DEFAULT_COLOR:o.getFgColor()),e+=this._optionsService.options.drawBoldTextInBrightColors&&o.isBold()&&e<8?8:0,this._currentGlyphIdentifier.chars=o.getChars()||l.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=o.getCode()||l.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=a,this._currentGlyphIdentifier.fg=e,this._currentGlyphIdentifier.bold=!!o.isBold(),this._currentGlyphIdentifier.dim=!!o.isDim(),this._currentGlyphIdentifier.italic=!!o.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,i*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(o,i,n))},r.prototype._drawUncachedChars=function(o,i,n,e){if(this._ctx.save(),this._ctx.font=this._getFont(!!o.isBold(),!!o.isItalic()),this._ctx.textBaseline="middle",o.isInverse())if(e)this._ctx.fillStyle=e.css;else if(o.isBgDefault())this._ctx.fillStyle=_.color.opaque(this._colors.background).css;else if(o.isBgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(o.getBgColor()).join(",")+")";else{var a=o.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&o.isBold()&&a<8&&(a+=8),this._ctx.fillStyle=this._colors.ansi[a].css}else if(e)this._ctx.fillStyle=e.css;else if(o.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(o.isFgRGB())this._ctx.fillStyle="rgb("+f.AttributeData.toColorRGB(o.getFgColor()).join(",")+")";else{var s=o.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&o.isBold()&&s<8&&(s+=8),this._ctx.fillStyle=this._colors.ansi[s].css}this._clipRow(n),o.isDim()&&(this._ctx.globalAlpha=p.DIM_OPACITY),this._ctx.fillText(o.getChars(),i*this._scaledCellWidth+this._scaledCharLeft,n*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2),this._ctx.restore()},r.prototype._clipRow=function(o){this._ctx.beginPath(),this._ctx.rect(0,o*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},r.prototype._getFont=function(o,i){return(i?"italic":"")+" "+(o?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},r.prototype._getContrastColor=function(o){if(this._optionsService.options.minimumContrastRatio!==1){var i=this._colors.contrastCache.getColor(o.bg,o.fg);if(i!==void 0)return i||void 0;var n=o.getFgColor(),e=o.getFgColorMode(),a=o.getBgColor(),s=o.getBgColorMode(),d=!!o.isInverse(),y=!!o.isInverse();if(d){var S=n;n=a,a=S;var C=e;e=s,s=C}var A=this._resolveBackgroundRgba(s,a,d),k=this._resolveForegroundRgba(e,n,d,y),I=_.rgba.ensureContrastRatio(A,k,this._optionsService.options.minimumContrastRatio);if(I){var O={css:_.channels.toCss(I>>24&255,I>>16&255,I>>8&255),rgba:I};return this._colors.contrastCache.setColor(o.bg,o.fg,O),O}this._colors.contrastCache.setColor(o.bg,o.fg,null)}},r.prototype._resolveBackgroundRgba=function(o,i,n){switch(o){case 16777216:case 33554432:return this._colors.ansi[i].rgba;case 50331648:return i<<8;case 0:default:return n?this._colors.foreground.rgba:this._colors.background.rgba}},r.prototype._resolveForegroundRgba=function(o,i,n,e){switch(o){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&e&&i<8&&(i+=8),this._colors.ansi[i].rgba;case 50331648:return i<<8;case 0:default:return n?this._colors.background.rgba:this._colors.foreground.rgba}},r}();u.BaseRenderLayer=t},function(E,u,g){"use strict";function l(p,c,f){c.di$target===c?c.di$dependencies.push({id:p,index:f}):(c.di$dependencies=[{id:p,index:f}],c.di$target=c)}Object.defineProperty(u,"__esModule",{value:!0}),u.serviceRegistry=new Map,u.getServiceDependencies=function(p){return p.di$dependencies||[]},u.createDecorator=function(p){if(u.serviceRegistry.has(p))return u.serviceRegistry.get(p);var c=function(f,h,_){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");l(c,f,_)};return c.toString=function(){return p},u.serviceRegistry.set(p,c),c}},function(E,u,g){"use strict";function l(p,c,f,h){if(f===void 0&&(f=0),h===void 0&&(h=p.length),f>=p.length)return p;f=(p.length+f)%p.length,h=h>=p.length?p.length:(p.length+h)%p.length;for(var _=f;_<h;++_)p[_]=c;return p}Object.defineProperty(u,"__esModule",{value:!0}),u.fill=function(p,c,f,h){return p.fill?p.fill(c,f,h):l(p,c,f,h)},u.fillFallback=l,u.concat=function(p,c){var f=new p.constructor(p.length+c.length);return f.set(p),f.set(c,p.length),f}},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(7),p=g(3),c=g(5),f=g(6);u.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);var h=function(){function _(t,r,o){o===void 0&&(o=!1),this.isWrapped=o,this._combined={},this._data=new Uint32Array(3*t);for(var i=r||c.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),n=0;n<t;++n)this.setCell(n,i);this.length=t}return _.prototype.get=function(t){var r=this._data[3*t+0],o=2097151&r;return[this._data[3*t+1],2097152&r?this._combined[t]:o?l.stringFromCodePoint(o):"",r>>22,2097152&r?this._combined[t].charCodeAt(this._combined[t].length-1):o]},_.prototype.set=function(t,r){this._data[3*t+1]=r[p.CHAR_DATA_ATTR_INDEX],r[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=r[1],this._data[3*t+0]=2097152|t|r[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=r[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|r[p.CHAR_DATA_WIDTH_INDEX]<<22},_.prototype.getWidth=function(t){return this._data[3*t+0]>>22},_.prototype.hasWidth=function(t){return 12582912&this._data[3*t+0]},_.prototype.getFg=function(t){return this._data[3*t+1]},_.prototype.getBg=function(t){return this._data[3*t+2]},_.prototype.hasContent=function(t){return 4194303&this._data[3*t+0]},_.prototype.getCodePoint=function(t){var r=this._data[3*t+0];return 2097152&r?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&r},_.prototype.isCombined=function(t){return 2097152&this._data[3*t+0]},_.prototype.getString=function(t){var r=this._data[3*t+0];return 2097152&r?this._combined[t]:2097151&r?l.stringFromCodePoint(2097151&r):""},_.prototype.loadCell=function(t,r){var o=3*t;return r.content=this._data[o+0],r.fg=this._data[o+1],r.bg=this._data[o+2],2097152&r.content&&(r.combinedData=this._combined[t]),r},_.prototype.setCell=function(t,r){2097152&r.content&&(this._combined[t]=r.combinedData),this._data[3*t+0]=r.content,this._data[3*t+1]=r.fg,this._data[3*t+2]=r.bg},_.prototype.setCellFromCodePoint=function(t,r,o,i,n){this._data[3*t+0]=r|o<<22,this._data[3*t+1]=i,this._data[3*t+2]=n},_.prototype.addCodepointToCell=function(t,r){var o=this._data[3*t+0];2097152&o?this._combined[t]+=l.stringFromCodePoint(r):(2097151&o?(this._combined[t]=l.stringFromCodePoint(2097151&o)+l.stringFromCodePoint(r),o&=-2097152,o|=2097152):o=r|1<<22,this._data[3*t+0]=o)},_.prototype.insertCells=function(t,r,o,i){if((t%=this.length)&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0),r<this.length-t){for(var n=new c.CellData,e=this.length-t-r-1;e>=0;--e)this.setCell(t+r+e,this.loadCell(t+e,n));for(e=0;e<r;++e)this.setCell(t+e,o)}else for(e=t;e<this.length;++e)this.setCell(e,o);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0)},_.prototype.deleteCells=function(t,r,o,i){if(t%=this.length,r<this.length-t){for(var n=new c.CellData,e=0;e<this.length-t-r;++e)this.setCell(t+e,this.loadCell(t+r+e,n));for(e=this.length-r;e<this.length;++e)this.setCell(e,o)}else for(e=t;e<this.length;++e)this.setCell(e,o);t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0),this.getWidth(t)!==0||this.hasContent(t)||this.setCellFromCodePoint(t,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0)},_.prototype.replaceCells=function(t,r,o,i){for(t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0),r<this.length&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0);t<r&&t<this.length;)this.setCell(t++,o)},_.prototype.resize=function(t,r){if(t!==this.length){if(t>this.length){var o=new Uint32Array(3*t);this.length&&(3*t<this._data.length?o.set(this._data.subarray(0,3*t)):o.set(this._data)),this._data=o;for(var i=this.length;i<t;++i)this.setCell(i,r)}else if(t){(o=new Uint32Array(3*t)).set(this._data.subarray(0,3*t)),this._data=o;var n=Object.keys(this._combined);for(i=0;i<n.length;i++){var e=parseInt(n[i],10);e>=t&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=t}},_.prototype.fill=function(t){this._combined={};for(var r=0;r<this.length;++r)this.setCell(r,t)},_.prototype.copyFrom=function(t){for(var r in this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={},t._combined)this._combined[r]=t._combined[r];this.isWrapped=t.isWrapped},_.prototype.clone=function(){var t=new _(0);for(var r in t._data=new Uint32Array(this._data),t.length=this.length,this._combined)t._combined[r]=this._combined[r];return t.isWrapped=this.isWrapped,t},_.prototype.getTrimmedLength=function(){for(var t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0},_.prototype.copyCellsFrom=function(t,r,o,i,n){var e=t._data;if(n)for(var a=i-1;a>=0;a--)for(var s=0;s<3;s++)this._data[3*(o+a)+s]=e[3*(r+a)+s];else for(a=0;a<i;a++)for(s=0;s<3;s++)this._data[3*(o+a)+s]=e[3*(r+a)+s];var d=Object.keys(t._combined);for(s=0;s<d.length;s++){var y=parseInt(d[s],10);y>=r&&(this._combined[y-r+o]=t._combined[y])}},_.prototype.translateToString=function(t,r,o){t===void 0&&(t=!1),r===void 0&&(r=0),o===void 0&&(o=this.length),t&&(o=Math.min(o,this.getTrimmedLength()));for(var i="";r<o;){var n=this._data[3*r+0],e=2097151&n;i+=2097152&n?this._combined[r]:e?l.stringFromCodePoint(e):p.WHITESPACE_CELL_CHAR,r+=n>>22||1}return i},_}();u.BufferLine=h},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.promptLabel="Terminal input",u.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.CHARSETS={},u.DEFAULT_CHARSET=u.CHARSETS.B,u.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},u.CHARSETS.A={"#":"\xA3"},u.CHARSETS.B=null,u.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},u.CHARSETS.C=u.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},u.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},u.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},u.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},u.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},u.CHARSETS.E=u.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},u.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},u.CHARSETS.H=u.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},u.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(c,f){if(c===void 0&&(c=32),f===void 0&&(f=32),this.maxLength=c,this.maxSubParamsLength=f,f>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(c),this.length=0,this._subParams=new Int32Array(f),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(c),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return p.fromArray=function(c){var f=new p;if(!c.length)return f;for(var h=c[0]instanceof Array?1:0;h<c.length;++h){var _=c[h];if(_ instanceof Array)for(var t=0;t<_.length;++t)f.addSubParam(_[t]);else f.addParam(_)}return f},p.prototype.clone=function(){var c=new p(this.maxLength,this.maxSubParamsLength);return c.params.set(this.params),c.length=this.length,c._subParams.set(this._subParams),c._subParamsLength=this._subParamsLength,c._subParamsIdx.set(this._subParamsIdx),c._rejectDigits=this._rejectDigits,c._rejectSubDigits=this._rejectSubDigits,c._digitIsSub=this._digitIsSub,c},p.prototype.toArray=function(){for(var c=[],f=0;f<this.length;++f){c.push(this.params[f]);var h=this._subParamsIdx[f]>>8,_=255&this._subParamsIdx[f];_-h>0&&c.push(Array.prototype.slice.call(this._subParams,h,_))}return c},p.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},p.prototype.addParam=function(c){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=c>2147483647?2147483647:c}},p.prototype.addSubParam=function(c){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=c>2147483647?2147483647:c,this._subParamsIdx[this.length-1]++}},p.prototype.hasSubParams=function(c){return(255&this._subParamsIdx[c])-(this._subParamsIdx[c]>>8)>0},p.prototype.getSubParams=function(c){var f=this._subParamsIdx[c]>>8,h=255&this._subParamsIdx[c];return h-f>0?this._subParams.subarray(f,h):null},p.prototype.getSubParamsAll=function(){for(var c={},f=0;f<this.length;++f){var h=this._subParamsIdx[f]>>8,_=255&this._subParamsIdx[f];_-h>0&&(c[f]=this._subParams.slice(h,_))}return c},p.prototype.addDigit=function(c){var f;if(!(this._rejectDigits||!(f=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var h=this._digitIsSub?this._subParams:this.params,_=h[f-1];h[f-1]=~_?Math.min(10*_+c,2147483647):c}},p}();u.Params=l},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(21),p=g(7),c=function(){function h(){this._state=0,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){}}return h.prototype.addHandler=function(_,t){this._handlers[_]===void 0&&(this._handlers[_]=[]);var r=this._handlers[_];return r.push(t),{dispose:function(){var o=r.indexOf(t);o!==-1&&r.splice(o,1)}}},h.prototype.setHandler=function(_,t){this._handlers[_]=[t]},h.prototype.clearHandler=function(_){this._handlers[_]&&delete this._handlers[_]},h.prototype.setHandlerFallback=function(_){this._handlerFb=_},h.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},h.prototype.reset=function(){this._state===2&&this.end(!1),this._id=-1,this._state=0},h.prototype._start=function(){var _=this._handlers[this._id];if(_)for(var t=_.length-1;t>=0;t--)_[t].start();else this._handlerFb(this._id,"START")},h.prototype._put=function(_,t,r){var o=this._handlers[this._id];if(o)for(var i=o.length-1;i>=0;i--)o[i].put(_,t,r);else this._handlerFb(this._id,"PUT",p.utf32ToString(_,t,r))},h.prototype._end=function(_){var t=this._handlers[this._id];if(t){for(var r=t.length-1;r>=0&&t[r].end(_)===!1;r--);for(r--;r>=0;r--)t[r].end(!1)}else this._handlerFb(this._id,"END",_)},h.prototype.start=function(){this.reset(),this._id=-1,this._state=1},h.prototype.put=function(_,t,r){if(this._state!==3){if(this._state===1)for(;t<r;){var o=_[t++];if(o===59){this._state=2,this._start();break}if(o<48||57<o)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+o-48}this._state===2&&r-t>0&&this._put(_,t,r)}},h.prototype.end=function(_){this._state!==0&&(this._state!==3&&(this._state===1&&this._start(),this._end(_)),this._id=-1,this._state=0)},h}();u.OscParser=c;var f=function(){function h(_){this._handler=_,this._data="",this._hitLimit=!1}return h.prototype.start=function(){this._data="",this._hitLimit=!1},h.prototype.put=function(_,t,r){this._hitLimit||(this._data+=p.utf32ToString(_,t,r),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},h.prototype.end=function(_){var t;return this._hitLimit?t=!1:_&&(t=this._handler(this._data)),this._data="",this._hitLimit=!1,t},h}();u.OscHandler=f},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.PAYLOAD_LIMIT=1e7},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(7),p=g(19),c=g(21),f=[],h=function(){function t(){this._handlers=Object.create(null),this._active=f,this._ident=0,this._handlerFb=function(){}}return t.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},t.prototype.addHandler=function(r,o){this._handlers[r]===void 0&&(this._handlers[r]=[]);var i=this._handlers[r];return i.push(o),{dispose:function(){var n=i.indexOf(o);n!==-1&&i.splice(n,1)}}},t.prototype.setHandler=function(r,o){this._handlers[r]=[o]},t.prototype.clearHandler=function(r){this._handlers[r]&&delete this._handlers[r]},t.prototype.setHandlerFallback=function(r){this._handlerFb=r},t.prototype.reset=function(){this._active.length&&this.unhook(!1),this._active=f,this._ident=0},t.prototype.hook=function(r,o){if(this.reset(),this._ident=r,this._active=this._handlers[r]||f,this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].hook(o);else this._handlerFb(this._ident,"HOOK",o)},t.prototype.put=function(r,o,i){if(this._active.length)for(var n=this._active.length-1;n>=0;n--)this._active[n].put(r,o,i);else this._handlerFb(this._ident,"PUT",l.utf32ToString(r,o,i))},t.prototype.unhook=function(r){if(this._active.length){for(var o=this._active.length-1;o>=0&&this._active[o].unhook(r)===!1;o--);for(o--;o>=0;o--)this._active[o].unhook(!1)}else this._handlerFb(this._ident,"UNHOOK",r);this._active=f,this._ident=0},t}();u.DcsParser=h;var _=function(){function t(r){this._handler=r,this._data="",this._hitLimit=!1}return t.prototype.hook=function(r){this._params=r.clone(),this._data="",this._hitLimit=!1},t.prototype.put=function(r,o,i){this._hitLimit||(this._data+=l.utf32ToString(r,o,i),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},t.prototype.unhook=function(r){var o;return this._hitLimit?o=!1:r&&(o=this._handler(this._data,this._params?this._params:new p.Params)),this._params=void 0,this._data="",this._hitLimit=!1,o},t}();u.DcsHandler=_},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(24),p=g(42),c=[];u.acquireCharAtlas=function(f,h,_,t,r){for(var o=l.generateConfig(t,r,f,_),i=0;i<c.length;i++){var n=(e=c[i]).ownedBy.indexOf(h);if(n>=0){if(l.configEquals(e.config,o))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),c.splice(i,1)):e.ownedBy.splice(n,1);break}}for(i=0;i<c.length;i++){var e=c[i];if(l.configEquals(e.config,o))return e.ownedBy.push(h),e.atlas}var a={atlas:new p.DynamicCharAtlas(document,o),config:o,ownedBy:[h]};return c.push(a),a.atlas},u.removeTerminalFromCache=function(f){for(var h=0;h<c.length;h++){var _=c[h].ownedBy.indexOf(f);if(_!==-1){c[h].ownedBy.length===1?(c[h].atlas.dispose(),c.splice(h,1)):c[h].ownedBy.splice(_,1);break}}}},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(3);u.generateConfig=function(p,c,f,h){var _={foreground:h.foreground,background:h.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:h.ansi.slice(0,16)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:p,scaledCharHeight:c,fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight,fontWeightBold:f.fontWeightBold,allowTransparency:f.allowTransparency,colors:_}},u.configEquals=function(p,c){for(var f=0;f<p.colors.ansi.length;f++)if(p.colors.ansi[f].rgba!==c.colors.ansi[f].rgba)return!1;return p.devicePixelRatio===c.devicePixelRatio&&p.fontFamily===c.fontFamily&&p.fontSize===c.fontSize&&p.fontWeight===c.fontWeight&&p.fontWeightBold===c.fontWeightBold&&p.allowTransparency===c.allowTransparency&&p.scaledCharWidth===c.scaledCharWidth&&p.scaledCharHeight===c.scaledCharHeight&&p.colors.foreground===c.colors.foreground&&p.colors.background===c.colors.background},u.is256Color=function(p){return p<l.DEFAULT_COLOR}},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(10),p=g(44),c=l.css.toColor("#ffffff"),f=l.css.toColor("#000000"),h=l.css.toColor("#ffffff"),_=l.css.toColor("#000000"),t={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};u.DEFAULT_ANSI_COLORS=function(){for(var o=[l.css.toColor("#2e3436"),l.css.toColor("#cc0000"),l.css.toColor("#4e9a06"),l.css.toColor("#c4a000"),l.css.toColor("#3465a4"),l.css.toColor("#75507b"),l.css.toColor("#06989a"),l.css.toColor("#d3d7cf"),l.css.toColor("#555753"),l.css.toColor("#ef2929"),l.css.toColor("#8ae234"),l.css.toColor("#fce94f"),l.css.toColor("#729fcf"),l.css.toColor("#ad7fa8"),l.css.toColor("#34e2e2"),l.css.toColor("#eeeeec")],i=[0,95,135,175,215,255],n=0;n<216;n++){var e=i[n/36%6|0],a=i[n/6%6|0],s=i[n%6];o.push({css:l.channels.toCss(e,a,s),rgba:l.channels.toRgba(e,a,s)})}for(n=0;n<24;n++){var d=8+10*n;o.push({css:l.channels.toCss(d,d,d),rgba:l.channels.toRgba(d,d,d)})}return o}();var r=function(){function o(i,n){this.allowTransparency=n;var e=i.createElement("canvas");e.width=1,e.height=1;var a=e.getContext("2d");if(!a)throw new Error("Could not get rendering context");this._ctx=a,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new p.ColorContrastCache,this.colors={foreground:c,background:f,cursor:h,cursorAccent:_,selection:t,selectionOpaque:l.color.blend(f,t),ansi:u.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return o.prototype.onOptionsChange=function(i){i==="minimumContrastRatio"&&this._contrastCache.clear()},o.prototype.setTheme=function(i){i===void 0&&(i={}),this.colors.foreground=this._parseColor(i.foreground,c),this.colors.background=this._parseColor(i.background,f),this.colors.cursor=this._parseColor(i.cursor,h,!0),this.colors.cursorAccent=this._parseColor(i.cursorAccent,_,!0),this.colors.selection=this._parseColor(i.selection,t,!0),this.colors.selectionOpaque=l.color.blend(this.colors.background,this.colors.selection),this.colors.ansi[0]=this._parseColor(i.black,u.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(i.red,u.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(i.green,u.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(i.yellow,u.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(i.blue,u.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(i.magenta,u.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(i.cyan,u.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(i.white,u.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(i.brightBlack,u.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(i.brightRed,u.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(i.brightGreen,u.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(i.brightYellow,u.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(i.brightBlue,u.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(i.brightMagenta,u.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(i.brightCyan,u.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(i.brightWhite,u.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},o.prototype._parseColor=function(i,n,e){if(e===void 0&&(e=this.allowTransparency),i===void 0)return n;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=i,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+i+" is invalid using fallback "+n.css),n;this._ctx.fillRect(0,0,1,1);var a=this._ctx.getImageData(0,0,1,1).data;if(a[3]!==255){if(!e)return console.warn("Color: "+i+" is using transparency, but allowTransparency is false. Using fallback "+n.css+"."),n;var s=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(k){return Number(k)}),d=s[0],y=s[1],S=s[2],C=s[3],A=Math.round(255*C);return{rgba:l.channels.toRgba(d,y,S,A),css:i}}return{css:this._ctx.fillStyle,rgba:l.channels.toRgba(a[0],a[1],a[2],a[3])}},o}();u.ColorManager=r},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.throwIfFalsy=function(l){if(!l)throw new Error("value must not be falsy");return l}},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(r,o){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var e in n)n.hasOwnProperty(e)&&(i[e]=n[e])})(r,o)},function(r,o){function i(){this.constructor=r}l(r,o),r.prototype=o===null?Object.create(o):(i.prototype=o.prototype,new i)});Object.defineProperty(u,"__esModule",{value:!0});var c=g(6),f=g(3),h=g(5),_=function(r){function o(i,n,e){var a=r.call(this)||this;return a.content=0,a.combinedData="",a.fg=i.fg,a.bg=i.bg,a.combinedData=n,a._width=e,a}return p(o,r),o.prototype.isCombined=function(){return 2097152},o.prototype.getWidth=function(){return this._width},o.prototype.getChars=function(){return this.combinedData},o.prototype.getCode=function(){return 2097151},o.prototype.setFromCharData=function(i){throw new Error("not implemented")},o.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},o}(c.AttributeData);u.JoinedCellData=_;var t=function(){function r(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new h.CellData}return r.prototype.registerCharacterJoiner=function(o){var i={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(i),i.id},r.prototype.deregisterCharacterJoiner=function(o){for(var i=0;i<this._characterJoiners.length;i++)if(this._characterJoiners[i].id===o)return this._characterJoiners.splice(i,1),!0;return!1},r.prototype.getJoinedCharacters=function(o){if(this._characterJoiners.length===0)return[];var i=this._bufferService.buffer.lines.get(o);if(!i||i.length===0)return[];for(var n=[],e=i.translateToString(!0),a=0,s=0,d=0,y=i.getFg(0),S=i.getBg(0),C=0;C<i.getTrimmedLength();C++)if(i.loadCell(C,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==S){if(C-a>1)for(var A=this._getJoinedRanges(e,d,s,i,a),k=0;k<A.length;k++)n.push(A[k]);a=C,d=s,y=this._workCell.fg,S=this._workCell.bg}s+=this._workCell.getChars().length||f.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-a>1)for(A=this._getJoinedRanges(e,d,s,i,a),k=0;k<A.length;k++)n.push(A[k]);return n},r.prototype._getJoinedRanges=function(o,i,n,e,a){for(var s=o.substring(i,n),d=this._characterJoiners[0].handler(s),y=1;y<this._characterJoiners.length;y++)for(var S=this._characterJoiners[y].handler(s),C=0;C<S.length;C++)r._mergeRanges(d,S[C]);return this._stringRangesToCellRanges(d,e,a),d},r.prototype._stringRangesToCellRanges=function(o,i,n){var e=0,a=!1,s=0,d=o[e];if(d){for(var y=n;y<this._bufferService.cols;y++){var S=i.getWidth(y),C=i.getString(y).length||f.WHITESPACE_CELL_CHAR.length;if(S!==0){if(!a&&d[0]<=s&&(d[0]=y,a=!0),d[1]<=s){if(d[1]=y,!(d=o[++e]))break;d[0]<=s?(d[0]=y,a=!0):a=!1}s+=C}}d&&(d[1]=this._bufferService.cols)}},r._mergeRanges=function(o,i){for(var n=!1,e=0;e<o.length;e++){var a=o[e];if(n){if(i[1]<=a[0])return o[e-1][1]=i[1],o;if(i[1]<=a[1])return o[e-1][1]=Math.max(i[1],a[1]),o.splice(e,1),o;o.splice(e,1),e--}else{if(i[1]<=a[0])return o.splice(e,0,i),o;if(i[1]<=a[1])return a[0]=Math.min(i[0],a[0]),o;i[0]<a[1]&&(a[0]=Math.min(i[0],a[0]),n=!0)}}return n?o[o.length-1][1]=i[1]:o.push(i),o},r}();u.CharacterJoinerRegistry=t},function(E,u,g){"use strict";function l(p,c){var f=c.getBoundingClientRect();return[p.clientX-f.left,p.clientY-f.top]}Object.defineProperty(u,"__esModule",{value:!0}),u.getCoordsRelativeToElement=l,u.getCoords=function(p,c,f,h,_,t,r,o){if(_){var i=l(p,c);if(i)return i[0]=Math.ceil((i[0]+(o?t/2:0))/t),i[1]=Math.ceil(i[1]/r),i[0]=Math.min(Math.max(i[0],1),f+(o?1:0)),i[1]=Math.min(Math.max(i[1],1),h),i}},u.getRawByteCoords=function(p){if(p)return{x:p[0]+32,y:p[1]+32}}},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(c){this._renderCallback=c}return p.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},p.prototype.refresh=function(c,f,h){var _=this;this._rowCount=h,c=c!==void 0?c:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return _._innerRefresh()}))},p.prototype._innerRefresh=function(){this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0&&(this._rowStart=Math.max(this._rowStart,0),this._rowEnd=Math.min(this._rowEnd,this._rowCount-1),this._renderCallback(this._rowStart,this._rowEnd),this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0)},p}();u.RenderDebouncer=l},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(f,h){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,t){_.__proto__=t}||function(_,t){for(var r in t)t.hasOwnProperty(r)&&(_[r]=t[r])})(f,h)},function(f,h){function _(){this.constructor=f}l(f,h),f.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)});Object.defineProperty(u,"__esModule",{value:!0});var c=function(f){function h(){var _=f!==null&&f.apply(this,arguments)||this;return _._currentDevicePixelRatio=window.devicePixelRatio,_}return p(h,f),h.prototype.setListener=function(_){var t=this;this._listener&&this.clearListener(),this._listener=_,this._outerListener=function(){t._listener&&(t._listener(window.devicePixelRatio,t._currentDevicePixelRatio),t._updateDpr())},this._updateDpr()},h.prototype.dispose=function(){f.prototype.dispose.call(this),this.clearListener()},h.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},h.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},h}(g(2).Disposable);u.ScreenDprMonitor=c},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.clone=function l(p,c){if(c===void 0&&(c=5),typeof p!="object")return p;var f=Array.isArray(p)?[]:{};for(var h in p)f[h]=c<=1?p[h]:p[h]?l(p[h],c-1):p[h];return f}},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(5),p=g(33),c=g(17),f=g(0),h=g(81),_=function(){function e(a){this._core=new p.Terminal(a),this._addonManager=new h.AddonManager}return Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onData",{get:function(){return this._core.onData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._core.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._parser||(this._parser=new i(this._core)),this._parser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unicode",{get:function(){return new n(this._core)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._core.rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._core.cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return new r(this._core.buffers)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"markers",{get:function(){return this._core.markers},enumerable:!0,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.resize=function(a,s){this._verifyIntegers(a,s),this._core.resize(a,s)},e.prototype.open=function(a){this._core.open(a)},e.prototype.attachCustomKeyEventHandler=function(a){this._core.attachCustomKeyEventHandler(a)},e.prototype.registerLinkMatcher=function(a,s,d){return this._core.registerLinkMatcher(a,s,d)},e.prototype.deregisterLinkMatcher=function(a){this._core.deregisterLinkMatcher(a)},e.prototype.registerLinkProvider=function(a){return this._core.registerLinkProvider(a)},e.prototype.registerCharacterJoiner=function(a){return this._core.registerCharacterJoiner(a)},e.prototype.deregisterCharacterJoiner=function(a){this._core.deregisterCharacterJoiner(a)},e.prototype.registerMarker=function(a){return this._verifyIntegers(a),this._core.addMarker(a)},e.prototype.addMarker=function(a){return this.registerMarker(a)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.select=function(a,s,d){this._verifyIntegers(a,s,d),this._core.select(a,s,d)},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(a,s){this._verifyIntegers(a,s),this._core.selectLines(a,s)},e.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},e.prototype.scrollLines=function(a){this._verifyIntegers(a),this._core.scrollLines(a)},e.prototype.scrollPages=function(a){this._verifyIntegers(a),this._core.scrollPages(a)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(a){this._verifyIntegers(a),this._core.scrollToLine(a)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(a,s){this._core.write(a,s)},e.prototype.writeUtf8=function(a,s){this._core.write(a,s)},e.prototype.writeln=function(a,s){this._core.write(a),this._core.write(`\r
`,s)},e.prototype.paste=function(a){this._core.paste(a)},e.prototype.getOption=function(a){return this._core.optionsService.getOption(a)},e.prototype.setOption=function(a,s){this._core.optionsService.setOption(a,s)},e.prototype.refresh=function(a,s){this._verifyIntegers(a,s),this._core.refresh(a,s)},e.prototype.reset=function(){this._core.reset()},e.prototype.loadAddon=function(a){return this._addonManager.loadAddon(this,a)},Object.defineProperty(e,"strings",{get:function(){return c},enumerable:!0,configurable:!0}),e.prototype._verifyIntegers=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];a.forEach(function(d){if(d===1/0||isNaN(d)||d%1!=0)throw new Error("This API only accepts integers")})},e}();u.Terminal=_;var t=function(){function e(a,s){this._buffer=a,this.type=s}return e.prototype.init=function(a){return this._buffer=a,this},Object.defineProperty(e.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!0,configurable:!0}),e.prototype.getLine=function(a){var s=this._buffer.lines.get(a);if(s)return new o(s)},e.prototype.getNullCell=function(){return new l.CellData},e}(),r=function(){function e(a){var s=this;this._buffers=a,this._onBufferChange=new f.EventEmitter,this._normal=new t(this._buffers.normal,"normal"),this._alternate=new t(this._buffers.alt,"alternate"),this._buffers.onBufferActivate(function(){return s._onBufferChange.fire(s.active)})}return Object.defineProperty(e.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){if(this._buffers.active===this._buffers.normal)return this.normal;if(this._buffers.active===this._buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal.init(this._buffers.normal)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate.init(this._buffers.alt)},enumerable:!0,configurable:!0}),e}(),o=function(){function e(a){this._line=a}return Object.defineProperty(e.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._line.length},enumerable:!0,configurable:!0}),e.prototype.getCell=function(a,s){if(!(a<0||a>=this._line.length))return s?(this._line.loadCell(a,s),s):this._line.loadCell(a,new l.CellData)},e.prototype.translateToString=function(a,s,d){return this._line.translateToString(a,s,d)},e}(),i=function(){function e(a){this._core=a}return e.prototype.registerCsiHandler=function(a,s){return this._core.addCsiHandler(a,function(d){return s(d.toArray())})},e.prototype.addCsiHandler=function(a,s){return this.registerCsiHandler(a,s)},e.prototype.registerDcsHandler=function(a,s){return this._core.addDcsHandler(a,function(d,y){return s(d,y.toArray())})},e.prototype.addDcsHandler=function(a,s){return this.registerDcsHandler(a,s)},e.prototype.registerEscHandler=function(a,s){return this._core.addEscHandler(a,s)},e.prototype.addEscHandler=function(a,s){return this.registerEscHandler(a,s)},e.prototype.registerOscHandler=function(a,s){return this._core.addOscHandler(a,s)},e.prototype.addOscHandler=function(a,s){return this.registerOscHandler(a,s)},e}(),n=function(){function e(a){this._core=a}return e.prototype.register=function(a){this._core.unicodeService.register(a)},Object.defineProperty(e.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(a){this._core.unicodeService.activeVersion=a},enumerable:!0,configurable:!0}),e}()},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(oe,U){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,M){x.__proto__=M}||function(x,M){for(var q in M)M.hasOwnProperty(q)&&(x[q]=M[q])})(oe,U)},function(oe,U){function x(){this.constructor=oe}l(oe,U),oe.prototype=U===null?Object.create(U):(x.prototype=U.prototype,new x)});Object.defineProperty(u,"__esModule",{value:!0});var c=g(34),f=g(35),h=g(36),_=g(12),t=g(37),r=g(39),o=g(49),i=g(50),n=g(11),e=g(8),a=g(17),s=g(53),d=g(54),y=g(55),S=g(56),C=g(58),A=g(0),k=g(16),I=g(59),O=g(25),b=g(60),v=g(1),m=g(61),w=g(4),D=g(62),T=g(63),F=g(2),N=g(69),V=g(70),Z=g(71),K=g(72),R=g(73),Y=g(74),j=g(75),W=g(76),B=g(77),Q=g(78),X=g(80),te=typeof window!="undefined"?window.document:null,ae=function(oe){function U(x){x===void 0&&(x={});var M=oe.call(this)||this;return M.browser=n,M.mouseEvents=0,M._keyDownHandled=!1,M._blankLine=null,M._onCursorMove=new A.EventEmitter,M._onData=new A.EventEmitter,M._onBinary=new A.EventEmitter,M._onKey=new A.EventEmitter,M._onLineFeed=new A.EventEmitter,M._onRender=new A.EventEmitter,M._onResize=new A.EventEmitter,M._onScroll=new A.EventEmitter,M._onSelectionChange=new A.EventEmitter,M._onTitleChange=new A.EventEmitter,M._onFocus=new A.EventEmitter,M._onBlur=new A.EventEmitter,M.onA11yCharEmitter=new A.EventEmitter,M.onA11yTabEmitter=new A.EventEmitter,M._instantiationService=new R.InstantiationService,M.optionsService=new m.OptionsService(x),M._instantiationService.setService(v.IOptionsService,M.optionsService),M._bufferService=M._instantiationService.createInstance(T.BufferService),M._instantiationService.setService(v.IBufferService,M._bufferService),M._logService=M._instantiationService.createInstance(Z.LogService),M._instantiationService.setService(v.ILogService,M._logService),M._coreService=M._instantiationService.createInstance(V.CoreService,function(){return M.scrollToBottom()}),M._instantiationService.setService(v.ICoreService,M._coreService),M._coreService.onData(function(q){return M._onData.fire(q)}),M._coreService.onBinary(function(q){return M._onBinary.fire(q)}),M._coreMouseService=M._instantiationService.createInstance(Y.CoreMouseService),M._instantiationService.setService(v.ICoreMouseService,M._coreMouseService),M._dirtyRowService=M._instantiationService.createInstance(K.DirtyRowService),M._instantiationService.setService(v.IDirtyRowService,M._dirtyRowService),M.unicodeService=M._instantiationService.createInstance(Q.UnicodeService),M._instantiationService.setService(v.IUnicodeService,M.unicodeService),M._charsetService=M._instantiationService.createInstance(X.CharsetService),M._instantiationService.setService(v.ICharsetService,M._charsetService),M._setupOptionsListeners(),M._setup(),M._writeBuffer=new j.WriteBuffer(function(q){return M._inputHandler.parse(q)}),M}return p(U,oe),Object.defineProperty(U.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onA11yChar",{get:function(){return this.onA11yCharEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"onA11yTab",{get:function(){return this.onA11yTabEmitter.event},enumerable:!0,configurable:!0}),U.prototype.dispose=function(){var x,M,q,ne;this._isDisposed||(oe.prototype.dispose.call(this),(x=this._windowsMode)===null||x===void 0||x.dispose(),this._windowsMode=void 0,(M=this._renderService)===null||M===void 0||M.dispose(),this._customKeyEventHandler=null,this.write=function(){},(ne=(q=this.element)===null||q===void 0?void 0:q.parentNode)===null||ne===void 0||ne.removeChild(this.element))},U.prototype._setup=function(){var x=this;this._customKeyEventHandler=null,this.insertMode=!1,this.bracketedPasteMode=!1,this._userScrolling=!1,this._inputHandler?this._inputHandler.reset():(this._inputHandler=new t.InputHandler(this,this._bufferService,this._charsetService,this._coreService,this._dirtyRowService,this._logService,this.optionsService,this._coreMouseService,this.unicodeService,this._instantiationService),this._inputHandler.onRequestBell(function(){return x.bell()}),this._inputHandler.onRequestRefreshRows(function(M,q){return x.refresh(M,q)}),this._inputHandler.onRequestReset(function(){return x.reset()}),this._inputHandler.onCursorMove(function(){return x._onCursorMove.fire()}),this._inputHandler.onLineFeed(function(){return x._onLineFeed.fire()}),this.register(this._inputHandler)),this.linkifier||(this.linkifier=new o.Linkifier(this._bufferService,this._logService,this.optionsService,this.unicodeService)),this.linkifier2||(this.linkifier2=new W.Linkifier2(this._bufferService)),this.options.windowsMode&&this._enableWindowsMode()},U.prototype._enableWindowsMode=function(){var x=this;if(!this._windowsMode){var M=[];M.push(this.onLineFeed(I.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.addCsiHandler({final:"H"},function(){return I.updateWindowsModeWrappedState(x._bufferService),!1})),this._windowsMode={dispose:function(){M.forEach(function(q){return q.dispose()})}}}},Object.defineProperty(U.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),Object.defineProperty(U.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!0,configurable:!0}),U.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},U.prototype._setupOptionsListeners=function(){var x=this;this.optionsService.onOptionChange(function(M){var q,ne,ie,se,ce;switch(M){case"fontFamily":case"fontSize":(q=x._renderService)===null||q===void 0||q.clear(),(ne=x._charSizeService)===null||ne===void 0||ne.measure();break;case"cursorBlink":case"cursorStyle":x.refresh(x.buffer.y,x.buffer.y);break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":x._renderService&&(x._renderService.clear(),x._renderService.onResize(x.cols,x.rows),x.refresh(0,x.rows-1));break;case"rendererType":x._renderService&&(x._renderService.setRenderer(x._createRenderer()),x._renderService.onResize(x.cols,x.rows));break;case"scrollback":x.buffers.resize(x.cols,x.rows),(ie=x.viewport)===null||ie===void 0||ie.syncScrollArea();break;case"screenReaderMode":x.optionsService.options.screenReaderMode?!x._accessibilityManager&&x._renderService&&(x._accessibilityManager=new y.AccessibilityManager(x,x._renderService)):((se=x._accessibilityManager)===null||se===void 0||se.dispose(),x._accessibilityManager=null);break;case"tabStopWidth":x.buffers.setupTabStops();break;case"theme":x._setTheme(x.optionsService.options.theme);break;case"windowsMode":x.optionsService.options.windowsMode?x._enableWindowsMode():((ce=x._windowsMode)===null||ce===void 0||ce.dispose(),x._windowsMode=void 0)}})},U.prototype._onTextAreaFocus=function(x){this.sendFocus&&this._coreService.triggerDataEvent(_.C0.ESC+"[I"),this.updateCursorStyle(x),this.element.classList.add("focus"),this.showCursor(),this._onFocus.fire()},U.prototype.blur=function(){return this.textarea.blur()},U.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.sendFocus&&this._coreService.triggerDataEvent(_.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},U.prototype._initGlobal=function(){var x=this;this._bindKeys(),this.register(e.addDisposableDomListener(this.element,"copy",function(q){x.hasSelection()&&h.copyHandler(q,x._selectionService)}));var M=function(q){return h.handlePasteEvent(q,x.textarea,x.bracketedPasteMode,x._coreService)};this.register(e.addDisposableDomListener(this.textarea,"paste",M)),this.register(e.addDisposableDomListener(this.element,"paste",M)),n.isFirefox?this.register(e.addDisposableDomListener(this.element,"mousedown",function(q){q.button===2&&h.rightClickHandler(q,x.textarea,x.screenElement,x._selectionService,x.options.rightClickSelectsWord)})):this.register(e.addDisposableDomListener(this.element,"contextmenu",function(q){h.rightClickHandler(q,x.textarea,x.screenElement,x._selectionService,x.options.rightClickSelectsWord)})),n.isLinux&&this.register(e.addDisposableDomListener(this.element,"auxclick",function(q){q.button===1&&h.moveTextAreaUnderMouseCursor(q,x.textarea,x.screenElement)}))},U.prototype._bindKeys=function(){var x=this;this.register(e.addDisposableDomListener(this.textarea,"keyup",function(M){return x._keyUp(M)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keydown",function(M){return x._keyDown(M)},!0)),this.register(e.addDisposableDomListener(this.textarea,"keypress",function(M){return x._keyPress(M)},!0)),this.register(e.addDisposableDomListener(this.textarea,"compositionstart",function(){return x._compositionHelper.compositionstart()})),this.register(e.addDisposableDomListener(this.textarea,"compositionupdate",function(M){return x._compositionHelper.compositionupdate(M)})),this.register(e.addDisposableDomListener(this.textarea,"compositionend",function(){return x._compositionHelper.compositionend()})),this.register(this.onRender(function(){return x._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(M){return x._queueLinkification(M.start,M.end)}))},U.prototype.open=function(x){var M=this;if(!x)throw new Error("Terminal requires a parent element.");te.body.contains(x)||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=x.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),x.appendChild(this.element);var q=te.createDocumentFragment();this._viewportElement=te.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),q.appendChild(this._viewportElement),this._viewportScrollArea=te.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=te.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=te.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),q.appendChild(this.screenElement),this.textarea=te.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",a.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(e.addDisposableDomListener(this.textarea,"focus",function(se){return M._onTextAreaFocus(se)})),this.register(e.addDisposableDomListener(this.textarea,"blur",function(){return M._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var ne=this._instantiationService.createInstance(B.CoreBrowserService,this.textarea);this._instantiationService.setService(w.ICoreBrowserService,ne),this._charSizeService=this._instantiationService.createInstance(D.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._compositionView=te.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(q),this._theme=this.options.theme||this._theme,this.options.theme=void 0,this._colorManager=new O.ColorManager(te,this.options.allowTransparency),this.optionsService.onOptionChange(function(se){return M._colorManager.onOptionsChange(se)}),this._colorManager.setTheme(this._theme);var ie=this._createRenderer();this._renderService=this._instantiationService.createInstance(b.RenderService,ie,this.rows,this.screenElement),this._instantiationService.setService(w.IRenderService,this._renderService),this._renderService.onRender(function(se){return M._onRender.fire(se)}),this.onResize(function(se){return M._renderService.resize(se.cols,se.rows)}),this._soundService=this._instantiationService.createInstance(s.SoundService),this._instantiationService.setService(w.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(N.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(f.Viewport,function(se,ce){return M.scrollLines(se,ce)},this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this.viewport),this.register(this.onCursorMove(function(){return M._renderService.onCursorMove()})),this.register(this.onResize(function(){return M._renderService.onResize(M.cols,M.rows)})),this.register(this.onBlur(function(){return M._renderService.onBlur()})),this.register(this.onFocus(function(){return M._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return M.viewport.syncScrollArea()})),this._selectionService=this._instantiationService.createInstance(i.SelectionService,function(se,ce){return M.scrollLines(se,ce)},this.element,this.screenElement),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onSelectionChange(function(){return M._onSelectionChange.fire()})),this.register(this._selectionService.onRedrawRequest(function(se){return M._renderService.onSelectionChanged(se.start,se.end,se.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(se){M.textarea.value=se,M.textarea.focus(),M.textarea.select()})),this.register(this.onScroll(function(){M.viewport.syncScrollArea(),M._selectionService.refresh()})),this.register(e.addDisposableDomListener(this._viewportElement,"scroll",function(){return M._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(d.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return M._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(e.addDisposableDomListener(this.element,"mousedown",function(se){return M._selectionService.onMouseDown(se)})),this.mouseEvents?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new y.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},U.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(r.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(S.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},U.prototype._setTheme=function(x){var M,q,ne;this._theme=x,(M=this._colorManager)===null||M===void 0||M.setTheme(x),(q=this._renderService)===null||q===void 0||q.setColors(this._colorManager.colors),(ne=this.viewport)===null||ne===void 0||ne.onThemeChange(this._colorManager.colors)},U.prototype.bindMouse=function(){var x=this,M=this,q=this.element;function ne(ee){var le,ue,he=M._mouseService.getRawByteCoords(ee,M.screenElement,M.cols,M.rows);if(!he)return!1;switch(ee.overrideType||ee.type){case"mousemove":ue=32,ee.buttons===void 0?(le=3,ee.button!==void 0&&(le=ee.button<3?ee.button:3)):le=1&ee.buttons?0:4&ee.buttons?1:2&ee.buttons?2:3;break;case"mouseup":ue=0,le=ee.button<3?ee.button:3;break;case"mousedown":ue=1,le=ee.button<3?ee.button:3;break;case"wheel":ee.deltaY!==0&&(ue=ee.deltaY<0?0:1),le=4;break;default:return!1}return!(ue===void 0||le===void 0||le>4)&&M._coreMouseService.triggerMouseEvent({col:he.x-33,row:he.y-33,button:le,action:ue,ctrl:ee.ctrlKey,alt:ee.altKey,shift:ee.shiftKey})}var ie={mouseup:null,wheel:null,mousedrag:null,mousemove:null},se=function(ee){return ne(ee),ee.buttons||(x._document.removeEventListener("mouseup",ie.mouseup),ie.mousedrag&&x._document.removeEventListener("mousemove",ie.mousedrag)),x.cancel(ee)},ce=function(ee){return ne(ee),ee.preventDefault(),x.cancel(ee)},de=function(ee){ee.buttons&&ne(ee)},fe=function(ee){ee.buttons||ne(ee)};this._coreMouseService.onProtocolChange(function(ee){x.mouseEvents=ee,ee?(x.optionsService.options.logLevel==="debug"&&x._logService.debug("Binding to mouse events:",x._coreMouseService.explainEvents(ee)),x.element.classList.add("enable-mouse-events"),x._selectionService.disable()):(x._logService.debug("Unbinding from mouse events."),x.element.classList.remove("enable-mouse-events"),x._selectionService.enable()),8&ee?ie.mousemove||(q.addEventListener("mousemove",fe),ie.mousemove=fe):(q.removeEventListener("mousemove",ie.mousemove),ie.mousemove=null),16&ee?ie.wheel||(q.addEventListener("wheel",ce),ie.wheel=ce):(q.removeEventListener("wheel",ie.wheel),ie.wheel=null),2&ee?ie.mouseup||(ie.mouseup=se):(x._document.removeEventListener("mouseup",ie.mouseup),ie.mouseup=null),4&ee?ie.mousedrag||(ie.mousedrag=de):(x._document.removeEventListener("mousemove",ie.mousedrag),ie.mousedrag=null)}),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(e.addDisposableDomListener(q,"mousedown",function(ee){if(ee.preventDefault(),x.focus(),x.mouseEvents&&!x._selectionService.shouldForceSelection(ee))return ne(ee),ie.mouseup&&x._document.addEventListener("mouseup",ie.mouseup),ie.mousedrag&&x._document.addEventListener("mousemove",ie.mousedrag),x.cancel(ee)})),this.register(e.addDisposableDomListener(q,"wheel",function(ee){if(!ie.wheel){if(!x.buffer.hasScrollback){var le=x.viewport.getLinesScrolled(ee);if(le===0)return;for(var ue=_.C0.ESC+(x._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(ee.deltaY<0?"A":"B"),he="",_e=0;_e<Math.abs(le);_e++)he+=ue;x._coreService.triggerDataEvent(he,!0)}}})),this.register(e.addDisposableDomListener(q,"wheel",function(ee){if(!ie.wheel)return x.viewport.onWheel(ee)?void 0:x.cancel(ee)})),this.register(e.addDisposableDomListener(q,"touchstart",function(ee){if(!x.mouseEvents)return x.viewport.onTouchStart(ee),x.cancel(ee)})),this.register(e.addDisposableDomListener(q,"touchmove",function(ee){if(!x.mouseEvents)return x.viewport.onTouchMove(ee)?void 0:x.cancel(ee)}))},U.prototype.refresh=function(x,M){var q;(q=this._renderService)===null||q===void 0||q.refreshRows(x,M)},U.prototype._queueLinkification=function(x,M){var q;(q=this.linkifier)===null||q===void 0||q.linkifyRows(x,M)},U.prototype.updateCursorStyle=function(x){this._selectionService&&this._selectionService.shouldColumnSelect(x)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},U.prototype.showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},U.prototype.scroll=function(x,M){var q;M===void 0&&(M=!1),(q=this._blankLine)&&q.length===this.cols&&q.getFg(0)===x.fg&&q.getBg(0)===x.bg||(q=this.buffer.getBlankLine(x,M),this._blankLine=q),q.isWrapped=M;var ne=this.buffer.ybase+this.buffer.scrollTop,ie=this.buffer.ybase+this.buffer.scrollBottom;if(this.buffer.scrollTop===0){var se=this.buffer.lines.isFull;ie===this.buffer.lines.length-1?se?this.buffer.lines.recycle().copyFrom(q):this.buffer.lines.push(q.clone()):this.buffer.lines.splice(ie+1,0,q.clone()),se?this._userScrolling&&(this.buffer.ydisp=Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this._userScrolling||this.buffer.ydisp++)}else{var ce=ie-ne+1;this.buffer.lines.shiftElements(ne+1,ce-1,-1),this.buffer.lines.set(ie,q.clone())}this._userScrolling||(this.buffer.ydisp=this.buffer.ybase),this._dirtyRowService.markRangeDirty(this.buffer.scrollTop,this.buffer.scrollBottom),this._onScroll.fire(this.buffer.ydisp)},U.prototype.scrollLines=function(x,M){if(x<0){if(this.buffer.ydisp===0)return;this._userScrolling=!0}else x+this.buffer.ydisp>=this.buffer.ybase&&(this._userScrolling=!1);var q=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+x,this.buffer.ybase),0),q!==this.buffer.ydisp&&(M||this._onScroll.fire(this.buffer.ydisp),this.refresh(0,this.rows-1))},U.prototype.scrollPages=function(x){this.scrollLines(x*(this.rows-1))},U.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},U.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},U.prototype.scrollToLine=function(x){var M=x-this.buffer.ydisp;M!==0&&this.scrollLines(M)},U.prototype.paste=function(x){h.paste(x,this.textarea,this.bracketedPasteMode,this._coreService)},U.prototype.attachCustomKeyEventHandler=function(x){this._customKeyEventHandler=x},U.prototype.addEscHandler=function(x,M){return this._inputHandler.addEscHandler(x,M)},U.prototype.addDcsHandler=function(x,M){return this._inputHandler.addDcsHandler(x,M)},U.prototype.addCsiHandler=function(x,M){return this._inputHandler.addCsiHandler(x,M)},U.prototype.addOscHandler=function(x,M){return this._inputHandler.addOscHandler(x,M)},U.prototype.registerLinkMatcher=function(x,M,q){var ne=this.linkifier.registerLinkMatcher(x,M,q);return this.refresh(0,this.rows-1),ne},U.prototype.deregisterLinkMatcher=function(x){this.linkifier.deregisterLinkMatcher(x)&&this.refresh(0,this.rows-1)},U.prototype.registerLinkProvider=function(x){return this.linkifier2.registerLinkProvider(x)},U.prototype.registerCharacterJoiner=function(x){var M=this._renderService.registerCharacterJoiner(x);return this.refresh(0,this.rows-1),M},U.prototype.deregisterCharacterJoiner=function(x){this._renderService.deregisterCharacterJoiner(x)&&this.refresh(0,this.rows-1)},Object.defineProperty(U.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!0,configurable:!0}),U.prototype.addMarker=function(x){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+x)},U.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},U.prototype.select=function(x,M,q){this._selectionService.setSelection(x,M,q)},U.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},U.prototype.getSelectionPosition=function(){if(this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},U.prototype.clearSelection=function(){var x;(x=this._selectionService)===null||x===void 0||x.clearSelection()},U.prototype.selectAll=function(){var x;(x=this._selectionService)===null||x===void 0||x.selectAll()},U.prototype.selectLines=function(x,M){var q;(q=this._selectionService)===null||q===void 0||q.selectLines(x,M)},U.prototype._keyDown=function(x){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1)return!1;if(!this._compositionHelper.keydown(x))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var M=C.evaluateKeyboardEvent(x,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(x),M.type===3||M.type===2){var q=this.rows-1;return this.scrollLines(M.type===2?-q:q),this.cancel(x,!0)}return M.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,x)||(M.cancel&&this.cancel(x,!0),!M.key||(M.key!==_.C0.ETX&&M.key!==_.C0.CR||(this.textarea.value=""),this._onKey.fire({key:M.key,domEvent:x}),this.showCursor(),this._coreService.triggerDataEvent(M.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(x,!0)))},U.prototype._isThirdLevelShift=function(x,M){var q=x.isMac&&!this.options.macOptionIsMeta&&M.altKey&&!M.ctrlKey&&!M.metaKey||x.isWindows&&M.altKey&&M.ctrlKey&&!M.metaKey;return M.type==="keypress"?q:q&&(!M.keyCode||M.keyCode>47)},U.prototype._keyUp=function(x){this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1||(function(M){return M.keyCode===16||M.keyCode===17||M.keyCode===18}(x)||this.focus(),this.updateCursorStyle(x))},U.prototype._keyPress=function(x){var M;if(this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(x)===!1)return!1;if(this.cancel(x),x.charCode)M=x.charCode;else if(x.which===null||x.which===void 0)M=x.keyCode;else{if(x.which===0||x.charCode===0)return!1;M=x.which}return!(!M||(x.altKey||x.ctrlKey||x.metaKey)&&!this._isThirdLevelShift(this.browser,x)||(M=String.fromCharCode(M),this._onKey.fire({key:M,domEvent:x}),this.showCursor(),this._coreService.triggerDataEvent(M,!0),0))},U.prototype.bell=function(){var x=this;this._soundBell()&&this._soundService.playBellSound(),this._visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this._visualBellTimer),this._visualBellTimer=window.setTimeout(function(){x.element.classList.remove("visual-bell-active")},200))},U.prototype.resize=function(x,M){var q,ne;isNaN(x)||isNaN(M)||(x!==this.cols||M!==this.rows?(x<T.MINIMUM_COLS&&(x=T.MINIMUM_COLS),M<T.MINIMUM_ROWS&&(M=T.MINIMUM_ROWS),this.buffers.resize(x,M),this._bufferService.resize(x,M),this.buffers.setupTabStops(this.cols),(q=this._charSizeService)===null||q===void 0||q.measure(),(ne=this.viewport)===null||ne===void 0||ne.syncScrollArea(!0),this.refresh(0,this.rows-1),this._onResize.fire({cols:x,rows:M})):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure())},U.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var x=1;x<this.rows;x++)this.buffer.lines.push(this.buffer.getBlankLine(k.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire(this.buffer.ydisp)}},U.prototype.is=function(x){return(this.options.termName+"").indexOf(x)===0},U.prototype.handleTitle=function(x){this._onTitleChange.fire(x)},U.prototype.reset=function(){var x,M;this.options.rows=this.rows,this.options.cols=this.cols;var q=this._customKeyEventHandler,ne=this._userScrolling;this._setup(),this._bufferService.reset(),this._charsetService.reset(),this._coreService.reset(),this._coreMouseService.reset(),(x=this._selectionService)===null||x===void 0||x.reset(),this._customKeyEventHandler=q,this._userScrolling=ne,this.refresh(0,this.rows-1),(M=this.viewport)===null||M===void 0||M.syncScrollArea()},U.prototype.cancel=function(x,M){if(this.options.cancelEvents||M)return x.preventDefault(),x.stopPropagation(),!1},U.prototype._visualBell=function(){return!1},U.prototype._soundBell=function(){return this.options.bellStyle==="sound"},U.prototype.write=function(x,M){this._writeBuffer.write(x,M)},U.prototype.writeSync=function(x){this._writeBuffer.writeSync(x)},U}(F.Disposable);u.Terminal=ae},function(E,u,g){"use strict";var l=this&&this.__decorate||function(_,t,r,o){var i,n=arguments.length,e=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(_,t,r,o);else for(var a=_.length-1;a>=0;a--)(i=_[a])&&(e=(n<3?i(e):n>3?i(t,r,e):i(t,r))||e);return n>3&&e&&Object.defineProperty(t,r,e),e},p=this&&this.__param||function(_,t){return function(r,o){t(r,o,_)}};Object.defineProperty(u,"__esModule",{value:!0});var c=g(4),f=g(1),h=function(){function _(t,r,o,i,n,e){this._textarea=t,this._compositionView=r,this._bufferService=o,this._optionsService=i,this._charSizeService=n,this._coreService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0}}return _.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._compositionView.classList.add("active")},_.prototype.compositionupdate=function(t){var r=this;this._compositionView.textContent=t.data,this.updateCompositionElements(),setTimeout(function(){r._compositionPosition.end=r._textarea.value.length},0)},_.prototype.compositionend=function(){this._finalizeComposition(!0)},_.prototype.keydown=function(t){if(this._isComposing||this._isSendingComposition){if(t.keyCode===229||t.keyCode===16||t.keyCode===17||t.keyCode===18)return!1;this._finalizeComposition(!1)}return t.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},_.prototype._finalizeComposition=function(t){var r=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,this._clearTextareaPosition(),t){var o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){var n;r._isSendingComposition&&(r._isSendingComposition=!1,n=r._isComposing?r._textarea.value.substring(o.start,o.end):r._textarea.value.substring(o.start),r._coreService.triggerDataEvent(n,!0))},0)}else{this._isSendingComposition=!1;var i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}},_.prototype._handleAnyTextareaChanges=function(){var t=this,r=this._textarea.value;setTimeout(function(){if(!t._isComposing){var o=t._textarea.value.replace(r,"");o.length>0&&t._coreService.triggerDataEvent(o,!0)}},0)},_.prototype.updateCompositionElements=function(t){var r=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var o=Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight),i=this._bufferService.buffer.y*o,n=this._bufferService.buffer.x*this._charSizeService.width;this._compositionView.style.left=n+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var e=this._compositionView.getBoundingClientRect();this._textarea.style.left=n+"px",this._textarea.style.top=i+"px",this._textarea.style.width=e.width+"px",this._textarea.style.height=e.height+"px",this._textarea.style.lineHeight=e.height+"px"}t||setTimeout(function(){return r.updateCompositionElements(!0)},0)}},_.prototype._clearTextareaPosition=function(){this._textarea.style.left="",this._textarea.style.top=""},l([p(2,f.IBufferService),p(3,f.IOptionsService),p(4,c.ICharSizeService),p(5,f.ICoreService)],_)}();u.CompositionHelper=h},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(i,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])})(i,n)},function(i,n){function e(){this.constructor=i}l(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}),c=this&&this.__decorate||function(i,n,e,a){var s,d=arguments.length,y=d<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,e):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(i,n,e,a);else for(var S=i.length-1;S>=0;S--)(s=i[S])&&(y=(d<3?s(y):d>3?s(n,e,y):s(n,e))||y);return d>3&&y&&Object.defineProperty(n,e,y),y},f=this&&this.__param||function(i,n){return function(e,a){n(e,a,i)}};Object.defineProperty(u,"__esModule",{value:!0});var h=g(2),_=g(8),t=g(4),r=g(1),o=function(i){function n(e,a,s,d,y,S,C){var A=i.call(this)||this;return A._scrollLines=e,A._viewportElement=a,A._scrollArea=s,A._bufferService=d,A._optionsService=y,A._charSizeService=S,A._renderService=C,A.scrollBarWidth=0,A._currentRowHeight=0,A._lastRecordedBufferLength=0,A._lastRecordedViewportHeight=0,A._lastRecordedBufferHeight=0,A._lastTouchY=0,A._lastScrollTop=0,A._wheelPartialScroll=0,A._refreshAnimationFrame=null,A._ignoreNextScrollEvent=!1,A.scrollBarWidth=A._viewportElement.offsetWidth-A._scrollArea.offsetWidth||15,A.register(_.addDisposableDomListener(A._viewportElement,"scroll",A._onScroll.bind(A))),setTimeout(function(){return A.syncScrollArea()},0),A}return p(n,i),n.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},n.prototype._refresh=function(e){var a=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return a._innerRefresh()}))},n.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a),this._refreshAnimationFrame=null},n.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);if(this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight){var a=this._bufferService.buffer.ydisp*this._currentRowHeight;this._lastScrollTop===a&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(e)}else this._refresh(e)},n.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent)if(this._ignoreNextScrollEvent)this._ignoreNextScrollEvent=!1;else{var a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(a,!0)}},n.prototype._bubbleScroll=function(e,a){var s=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&s<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},n.prototype.onWheel=function(e){var a=this._getPixelsScrolled(e);return a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(e,a))},n.prototype._getPixelsScrolled=function(e){if(e.deltaY===0)return 0;var a=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a},n.prototype.getLinesScrolled=function(e){if(e.deltaY===0)return 0;var a=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a},n.prototype._applyScrollModifier=function(e,a){var s=this._optionsService.options.fastScrollModifier;return s==="alt"&&a.altKey||s==="ctrl"&&a.ctrlKey||s==="shift"&&a.shiftKey?e*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:e*this._optionsService.options.scrollSensitivity},n.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},n.prototype.onTouchMove=function(e){var a=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(e,a))},c([f(3,r.IBufferService),f(4,r.IOptionsService),f(5,t.ICharSizeService),f(6,t.IRenderService)],n)}(h.Disposable);u.Viewport=o},function(E,u,g){"use strict";function l(h){return h.replace(/\r?\n/g,"\r")}function p(h,_){return _?"\x1B[200~"+h+"\x1B[201~":h}function c(h,_,t,r){h=p(h=l(h),t),r.triggerDataEvent(h,!0),_.value=""}function f(h,_,t){var r=t.getBoundingClientRect(),o=h.clientX-r.left-10,i=h.clientY-r.top-10;_.style.position="absolute",_.style.width="20px",_.style.height="20px",_.style.left=o+"px",_.style.top=i+"px",_.style.zIndex="1000",_.focus(),setTimeout(function(){_.style.position="",_.style.width="",_.style.height="",_.style.left="",_.style.top="",_.style.zIndex=""},200)}Object.defineProperty(u,"__esModule",{value:!0}),u.prepareTextForTerminal=l,u.bracketTextForPaste=p,u.copyHandler=function(h,_){h.clipboardData&&h.clipboardData.setData("text/plain",_.selectionText),h.preventDefault()},u.handlePasteEvent=function(h,_,t,r){h.stopPropagation(),h.clipboardData&&c(h.clipboardData.getData("text/plain"),_,t,r)},u.paste=c,u.moveTextAreaUnderMouseCursor=f,u.rightClickHandler=function(h,_,t,r,o){f(h,_,t),o&&!r.isClickInSelection(h)&&r.selectWordAtCursor(h),_.value=r.selectionText,_.select()}},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(I,O){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,v){b.__proto__=v}||function(b,v){for(var m in v)v.hasOwnProperty(m)&&(b[m]=v[m])})(I,O)},function(I,O){function b(){this.constructor=I}l(I,O),I.prototype=O===null?Object.create(O):(b.prototype=O.prototype,new b)});Object.defineProperty(u,"__esModule",{value:!0});var c=g(12),f=g(18),h=g(38),_=g(2),t=g(15),r=g(7),o=g(16),i=g(0),n=g(3),e=g(5),a=g(6),s=g(20),d=g(22),y=g(4),S={"(":0,")":1,"*":2,"+":3,"-":1,".":2};function C(I,O){if(I>24)return O.setWinLines||!1;switch(I){case 1:return!!O.restoreWin;case 2:return!!O.minimizeWin;case 3:return!!O.setWinPosition;case 4:return!!O.setWinSizePixels;case 5:return!!O.raiseWin;case 6:return!!O.lowerWin;case 7:return!!O.refreshWin;case 8:return!!O.setWinSizeChars;case 9:return!!O.maximizeWin;case 10:return!!O.fullscreenWin;case 11:return!!O.getWinState;case 13:return!!O.getWinPosition;case 14:return!!O.getWinSizePixels;case 15:return!!O.getScreenSizePixels;case 16:return!!O.getCellSizePixels;case 18:return!!O.getWinSizeChars;case 19:return!!O.getScreenSizeChars;case 20:return!!O.getIconTitle;case 21:return!!O.getWinTitle;case 22:return!!O.pushTitle;case 23:return!!O.popTitle;case 24:return!!O.setWinLines}return!1}var A=function(){function I(O,b,v,m){this._bufferService=O,this._coreService=b,this._logService=v,this._optionsService=m,this._data=new Uint32Array(0)}return I.prototype.hook=function(O){this._data=new Uint32Array(0)},I.prototype.put=function(O,b,v){this._data=t.concat(this._data,O.subarray(b,v))},I.prototype.unhook=function(O){if(O){var b=r.utf32ToString(this._data);switch(this._data=new Uint32Array(0),b){case'"q':return this._coreService.triggerDataEvent(c.C0.ESC+'P1$r0"q'+c.C0.ESC+"\\");case'"p':return this._coreService.triggerDataEvent(c.C0.ESC+'P1$r61;1"p'+c.C0.ESC+"\\");case"r":var v=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";return this._coreService.triggerDataEvent(c.C0.ESC+"P1$r"+v+c.C0.ESC+"\\");case"m":return this._coreService.triggerDataEvent(c.C0.ESC+"P1$r0m"+c.C0.ESC+"\\");case" q":var m={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];return m-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(c.C0.ESC+"P1$r"+m+" q"+c.C0.ESC+"\\");default:this._logService.debug("Unknown DCS $q %s",b),this._coreService.triggerDataEvent(c.C0.ESC+"P0$r"+c.C0.ESC+"\\")}}else this._data=new Uint32Array(0)},I}(),k=function(I){function O(b,v,m,w,D,T,F,N,V,Z,K){K===void 0&&(K=new h.EscapeSequenceParser);var R=I.call(this)||this;R._terminal=b,R._bufferService=v,R._charsetService=m,R._coreService=w,R._dirtyRowService=D,R._logService=T,R._optionsService=F,R._coreMouseService=N,R._unicodeService=V,R._instantiationService=Z,R._parser=K,R._parseBuffer=new Uint32Array(4096),R._stringDecoder=new r.StringToUtf32,R._utf8Decoder=new r.Utf8ToUtf32,R._workCell=new e.CellData,R._windowTitle="",R._iconName="",R._windowTitleStack=[],R._iconNameStack=[],R._curAttrData=o.DEFAULT_ATTR_DATA.clone(),R._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),R._onRequestRefreshRows=new i.EventEmitter,R._onRequestReset=new i.EventEmitter,R._onRequestBell=new i.EventEmitter,R._onCursorMove=new i.EventEmitter,R._onLineFeed=new i.EventEmitter,R._onScroll=new i.EventEmitter,R.register(R._parser),R._parser.setCsiHandlerFallback(function(B,Q){R._logService.debug("Unknown CSI code: ",{identifier:R._parser.identToString(B),params:Q.toArray()})}),R._parser.setEscHandlerFallback(function(B){R._logService.debug("Unknown ESC code: ",{identifier:R._parser.identToString(B)})}),R._parser.setExecuteHandlerFallback(function(B){R._logService.debug("Unknown EXECUTE code: ",{code:B})}),R._parser.setOscHandlerFallback(function(B,Q,X){R._logService.debug("Unknown OSC code: ",{identifier:B,action:Q,data:X})}),R._parser.setDcsHandlerFallback(function(B,Q,X){Q==="HOOK"&&(X=X.toArray()),R._logService.debug("Unknown DCS code: ",{identifier:R._parser.identToString(B),action:Q,payload:X})}),R._parser.setPrintHandler(function(B,Q,X){return R.print(B,Q,X)}),R._parser.setCsiHandler({final:"@"},function(B){return R.insertChars(B)}),R._parser.setCsiHandler({intermediates:" ",final:"@"},function(B){return R.scrollLeft(B)}),R._parser.setCsiHandler({final:"A"},function(B){return R.cursorUp(B)}),R._parser.setCsiHandler({intermediates:" ",final:"A"},function(B){return R.scrollRight(B)}),R._parser.setCsiHandler({final:"B"},function(B){return R.cursorDown(B)}),R._parser.setCsiHandler({final:"C"},function(B){return R.cursorForward(B)}),R._parser.setCsiHandler({final:"D"},function(B){return R.cursorBackward(B)}),R._parser.setCsiHandler({final:"E"},function(B){return R.cursorNextLine(B)}),R._parser.setCsiHandler({final:"F"},function(B){return R.cursorPrecedingLine(B)}),R._parser.setCsiHandler({final:"G"},function(B){return R.cursorCharAbsolute(B)}),R._parser.setCsiHandler({final:"H"},function(B){return R.cursorPosition(B)}),R._parser.setCsiHandler({final:"I"},function(B){return R.cursorForwardTab(B)}),R._parser.setCsiHandler({final:"J"},function(B){return R.eraseInDisplay(B)}),R._parser.setCsiHandler({prefix:"?",final:"J"},function(B){return R.eraseInDisplay(B)}),R._parser.setCsiHandler({final:"K"},function(B){return R.eraseInLine(B)}),R._parser.setCsiHandler({prefix:"?",final:"K"},function(B){return R.eraseInLine(B)}),R._parser.setCsiHandler({final:"L"},function(B){return R.insertLines(B)}),R._parser.setCsiHandler({final:"M"},function(B){return R.deleteLines(B)}),R._parser.setCsiHandler({final:"P"},function(B){return R.deleteChars(B)}),R._parser.setCsiHandler({final:"S"},function(B){return R.scrollUp(B)}),R._parser.setCsiHandler({final:"T"},function(B){return R.scrollDown(B)}),R._parser.setCsiHandler({final:"X"},function(B){return R.eraseChars(B)}),R._parser.setCsiHandler({final:"Z"},function(B){return R.cursorBackwardTab(B)}),R._parser.setCsiHandler({final:"`"},function(B){return R.charPosAbsolute(B)}),R._parser.setCsiHandler({final:"a"},function(B){return R.hPositionRelative(B)}),R._parser.setCsiHandler({final:"b"},function(B){return R.repeatPrecedingCharacter(B)}),R._parser.setCsiHandler({final:"c"},function(B){return R.sendDeviceAttributesPrimary(B)}),R._parser.setCsiHandler({prefix:">",final:"c"},function(B){return R.sendDeviceAttributesSecondary(B)}),R._parser.setCsiHandler({final:"d"},function(B){return R.linePosAbsolute(B)}),R._parser.setCsiHandler({final:"e"},function(B){return R.vPositionRelative(B)}),R._parser.setCsiHandler({final:"f"},function(B){return R.hVPosition(B)}),R._parser.setCsiHandler({final:"g"},function(B){return R.tabClear(B)}),R._parser.setCsiHandler({final:"h"},function(B){return R.setMode(B)}),R._parser.setCsiHandler({prefix:"?",final:"h"},function(B){return R.setModePrivate(B)}),R._parser.setCsiHandler({final:"l"},function(B){return R.resetMode(B)}),R._parser.setCsiHandler({prefix:"?",final:"l"},function(B){return R.resetModePrivate(B)}),R._parser.setCsiHandler({final:"m"},function(B){return R.charAttributes(B)}),R._parser.setCsiHandler({final:"n"},function(B){return R.deviceStatus(B)}),R._parser.setCsiHandler({prefix:"?",final:"n"},function(B){return R.deviceStatusPrivate(B)}),R._parser.setCsiHandler({intermediates:"!",final:"p"},function(B){return R.softReset(B)}),R._parser.setCsiHandler({intermediates:" ",final:"q"},function(B){return R.setCursorStyle(B)}),R._parser.setCsiHandler({final:"r"},function(B){return R.setScrollRegion(B)}),R._parser.setCsiHandler({final:"s"},function(B){return R.saveCursor(B)}),R._parser.setCsiHandler({final:"t"},function(B){return R.windowOptions(B)}),R._parser.setCsiHandler({final:"u"},function(B){return R.restoreCursor(B)}),R._parser.setCsiHandler({intermediates:"'",final:"}"},function(B){return R.insertColumns(B)}),R._parser.setCsiHandler({intermediates:"'",final:"~"},function(B){return R.deleteColumns(B)}),R._parser.setExecuteHandler(c.C0.BEL,function(){return R.bell()}),R._parser.setExecuteHandler(c.C0.LF,function(){return R.lineFeed()}),R._parser.setExecuteHandler(c.C0.VT,function(){return R.lineFeed()}),R._parser.setExecuteHandler(c.C0.FF,function(){return R.lineFeed()}),R._parser.setExecuteHandler(c.C0.CR,function(){return R.carriageReturn()}),R._parser.setExecuteHandler(c.C0.BS,function(){return R.backspace()}),R._parser.setExecuteHandler(c.C0.HT,function(){return R.tab()}),R._parser.setExecuteHandler(c.C0.SO,function(){return R.shiftOut()}),R._parser.setExecuteHandler(c.C0.SI,function(){return R.shiftIn()}),R._parser.setExecuteHandler(c.C1.IND,function(){return R.index()}),R._parser.setExecuteHandler(c.C1.NEL,function(){return R.nextLine()}),R._parser.setExecuteHandler(c.C1.HTS,function(){return R.tabSet()}),R._parser.setOscHandler(0,new s.OscHandler(function(B){R.setTitle(B),R.setIconName(B)})),R._parser.setOscHandler(1,new s.OscHandler(function(B){return R.setIconName(B)})),R._parser.setOscHandler(2,new s.OscHandler(function(B){return R.setTitle(B)})),R._parser.setEscHandler({final:"7"},function(){return R.saveCursor()}),R._parser.setEscHandler({final:"8"},function(){return R.restoreCursor()}),R._parser.setEscHandler({final:"D"},function(){return R.index()}),R._parser.setEscHandler({final:"E"},function(){return R.nextLine()}),R._parser.setEscHandler({final:"H"},function(){return R.tabSet()}),R._parser.setEscHandler({final:"M"},function(){return R.reverseIndex()}),R._parser.setEscHandler({final:"="},function(){return R.keypadApplicationMode()}),R._parser.setEscHandler({final:">"},function(){return R.keypadNumericMode()}),R._parser.setEscHandler({final:"c"},function(){return R.fullReset()}),R._parser.setEscHandler({final:"n"},function(){return R.setgLevel(2)}),R._parser.setEscHandler({final:"o"},function(){return R.setgLevel(3)}),R._parser.setEscHandler({final:"|"},function(){return R.setgLevel(3)}),R._parser.setEscHandler({final:"}"},function(){return R.setgLevel(2)}),R._parser.setEscHandler({final:"~"},function(){return R.setgLevel(1)}),R._parser.setEscHandler({intermediates:"%",final:"@"},function(){return R.selectDefaultCharset()}),R._parser.setEscHandler({intermediates:"%",final:"G"},function(){return R.selectDefaultCharset()});var Y=function(B){j._parser.setEscHandler({intermediates:"(",final:B},function(){return R.selectCharset("("+B)}),j._parser.setEscHandler({intermediates:")",final:B},function(){return R.selectCharset(")"+B)}),j._parser.setEscHandler({intermediates:"*",final:B},function(){return R.selectCharset("*"+B)}),j._parser.setEscHandler({intermediates:"+",final:B},function(){return R.selectCharset("+"+B)}),j._parser.setEscHandler({intermediates:"-",final:B},function(){return R.selectCharset("-"+B)}),j._parser.setEscHandler({intermediates:".",final:B},function(){return R.selectCharset("."+B)}),j._parser.setEscHandler({intermediates:"/",final:B},function(){return R.selectCharset("/"+B)})},j=this;for(var W in f.CHARSETS)Y(W);return R._parser.setEscHandler({intermediates:"#",final:"8"},function(){return R.screenAlignmentPattern()}),R._parser.setErrorHandler(function(B){return R._logService.error("Parsing error: ",B),B}),R._parser.setDcsHandler({intermediates:"$",final:"q"},new A(R._bufferService,R._coreService,R._logService,R._optionsService)),R}return p(O,I),Object.defineProperty(O.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!0,configurable:!0}),Object.defineProperty(O.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0}),O.prototype.dispose=function(){I.prototype.dispose.call(this)},O.prototype.parse=function(b){var v=this._bufferService.buffer,m=v.x,w=v.y;if(this._logService.debug("parsing data",b),this._parseBuffer.length<b.length&&this._parseBuffer.length<131072&&(this._parseBuffer=new Uint32Array(Math.min(b.length,131072))),this._dirtyRowService.clearRange(),b.length>131072)for(var D=0;D<b.length;D+=131072){var T=D+131072<b.length?D+131072:b.length,F=typeof b=="string"?this._stringDecoder.decode(b.substring(D,T),this._parseBuffer):this._utf8Decoder.decode(b.subarray(D,T),this._parseBuffer);this._parser.parse(this._parseBuffer,F)}else F=typeof b=="string"?this._stringDecoder.decode(b,this._parseBuffer):this._utf8Decoder.decode(b,this._parseBuffer),this._parser.parse(this._parseBuffer,F);(v=this._bufferService.buffer).x===m&&v.y===w||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},O.prototype.print=function(b,v,m){var w,D,T=this._bufferService.buffer,F=this._charsetService.charset,N=this._optionsService.options.screenReaderMode,V=this._bufferService.cols,Z=this._coreService.decPrivateModes.wraparound,K=this._terminal.insertMode,R=this._curAttrData,Y=T.lines.get(T.y+T.ybase);this._dirtyRowService.markDirty(T.y),T.x&&m-v>0&&Y.getWidth(T.x-1)===2&&Y.setCellFromCodePoint(T.x-1,0,1,R.fg,R.bg);for(var j=v;j<m;++j){if(w=b[j],D=this._unicodeService.wcwidth(w),w<127&&F){var W=F[String.fromCharCode(w)];W&&(w=W.charCodeAt(0))}if(N&&this._terminal.onA11yCharEmitter.fire(r.stringFromCodePoint(w)),D||!T.x){if(T.x+D-1>=V){if(Z)T.x=0,T.y++,T.y===T.scrollBottom+1?(T.y--,this._terminal.scroll(this._eraseAttrData(),!0)):(T.y>=this._bufferService.rows&&(T.y=this._bufferService.rows-1),T.lines.get(T.y).isWrapped=!0),Y=T.lines.get(T.y+T.ybase);else if(T.x=V-1,D===2)continue}if(K&&(Y.insertCells(T.x,D,T.getNullCell(R),R),Y.getWidth(V-1)===2&&Y.setCellFromCodePoint(V-1,n.NULL_CELL_CODE,n.NULL_CELL_WIDTH,R.fg,R.bg)),Y.setCellFromCodePoint(T.x++,w,D,R.fg,R.bg),D>0)for(;--D;)Y.setCellFromCodePoint(T.x++,0,0,R.fg,R.bg)}else Y.getWidth(T.x-1)?Y.addCodepointToCell(T.x-1,w):Y.addCodepointToCell(T.x-2,w)}m-v>0&&(Y.loadCell(T.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),T.x<V&&m-v>0&&Y.getWidth(T.x)===0&&!Y.hasContent(T.x)&&Y.setCellFromCodePoint(T.x,0,1,R.fg,R.bg),this._dirtyRowService.markDirty(T.y)},O.prototype.addCsiHandler=function(b,v){var m=this;return b.final!=="t"||b.prefix||b.intermediates?this._parser.addCsiHandler(b,v):this._parser.addCsiHandler(b,function(w){return!C(w.params[0],m._optionsService.options.windowOptions)||v(w)})},O.prototype.addDcsHandler=function(b,v){return this._parser.addDcsHandler(b,new d.DcsHandler(v))},O.prototype.addEscHandler=function(b,v){return this._parser.addEscHandler(b,v)},O.prototype.addOscHandler=function(b,v){return this._parser.addOscHandler(b,new s.OscHandler(v))},O.prototype.bell=function(){this._onRequestBell.fire()},O.prototype.lineFeed=function(){var b=this._bufferService.buffer;this._dirtyRowService.markDirty(b.y),this._optionsService.options.convertEol&&(b.x=0),b.y++,b.y===b.scrollBottom+1?(b.y--,this._terminal.scroll(this._eraseAttrData())):b.y>=this._bufferService.rows&&(b.y=this._bufferService.rows-1),b.x>=this._bufferService.cols&&b.x--,this._dirtyRowService.markDirty(b.y),this._onLineFeed.fire()},O.prototype.carriageReturn=function(){this._bufferService.buffer.x=0},O.prototype.backspace=function(){this._restrictCursor(),this._bufferService.buffer.x>0&&this._bufferService.buffer.x--},O.prototype.tab=function(){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){var b=this._bufferService.buffer.x;this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._terminal.onA11yTabEmitter.fire(this._bufferService.buffer.x-b)}},O.prototype.shiftOut=function(){this._charsetService.setgLevel(1)},O.prototype.shiftIn=function(){this._charsetService.setgLevel(0)},O.prototype._restrictCursor=function(){this._bufferService.buffer.x=Math.min(this._bufferService.cols-1,Math.max(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._coreService.decPrivateModes.origin?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},O.prototype._setCursor=function(b,v){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._coreService.decPrivateModes.origin?(this._bufferService.buffer.x=b,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+v):(this._bufferService.buffer.x=b,this._bufferService.buffer.y=v),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},O.prototype._moveCursor=function(b,v){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+b,this._bufferService.buffer.y+v)},O.prototype.cursorUp=function(b){var v=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;v>=0?this._moveCursor(0,-Math.min(v,b.params[0]||1)):this._moveCursor(0,-(b.params[0]||1))},O.prototype.cursorDown=function(b){var v=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;v>=0?this._moveCursor(0,Math.min(v,b.params[0]||1)):this._moveCursor(0,b.params[0]||1)},O.prototype.cursorForward=function(b){this._moveCursor(b.params[0]||1,0)},O.prototype.cursorBackward=function(b){this._moveCursor(-(b.params[0]||1),0)},O.prototype.cursorNextLine=function(b){this.cursorDown(b),this._bufferService.buffer.x=0},O.prototype.cursorPrecedingLine=function(b){this.cursorUp(b),this._bufferService.buffer.x=0},O.prototype.cursorCharAbsolute=function(b){this._setCursor((b.params[0]||1)-1,this._bufferService.buffer.y)},O.prototype.cursorPosition=function(b){this._setCursor(b.length>=2?(b.params[1]||1)-1:0,(b.params[0]||1)-1)},O.prototype.charPosAbsolute=function(b){this._setCursor((b.params[0]||1)-1,this._bufferService.buffer.y)},O.prototype.hPositionRelative=function(b){this._moveCursor(b.params[0]||1,0)},O.prototype.linePosAbsolute=function(b){this._setCursor(this._bufferService.buffer.x,(b.params[0]||1)-1)},O.prototype.vPositionRelative=function(b){this._moveCursor(0,b.params[0]||1)},O.prototype.hVPosition=function(b){this.cursorPosition(b)},O.prototype.tabClear=function(b){var v=b.params[0];v===0?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:v===3&&(this._bufferService.buffer.tabs={})},O.prototype.cursorForwardTab=function(b){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var v=b.params[0]||1;v--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop()},O.prototype.cursorBackwardTab=function(b){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var v=b.params[0]||1,m=this._bufferService.buffer;v--;)m.x=m.prevStop()},O.prototype._eraseInBufferLine=function(b,v,m,w){w===void 0&&(w=!1);var D=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+b);D.replaceCells(v,m,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),w&&(D.isWrapped=!1)},O.prototype._resetBufferLine=function(b){var v=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+b);v.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData())),v.isWrapped=!1},O.prototype.eraseInDisplay=function(b){var v;switch(this._restrictCursor(),b.params[0]){case 0:for(v=this._bufferService.buffer.y,this._dirtyRowService.markDirty(v),this._eraseInBufferLine(v++,this._bufferService.buffer.x,this._bufferService.cols,this._bufferService.buffer.x===0);v<this._bufferService.rows;v++)this._resetBufferLine(v);this._dirtyRowService.markDirty(v);break;case 1:for(v=this._bufferService.buffer.y,this._dirtyRowService.markDirty(v),this._eraseInBufferLine(v,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(v+1).isWrapped=!1);v--;)this._resetBufferLine(v);this._dirtyRowService.markDirty(0);break;case 2:for(v=this._bufferService.rows,this._dirtyRowService.markDirty(v-1);v--;)this._resetBufferLine(v);this._dirtyRowService.markDirty(0);break;case 3:var m=this._bufferService.buffer.lines.length-this._bufferService.rows;m>0&&(this._bufferService.buffer.lines.trimStart(m),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-m,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-m,0),this._onScroll.fire(0))}},O.prototype.eraseInLine=function(b){switch(this._restrictCursor(),b.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}this._dirtyRowService.markDirty(this._bufferService.buffer.y)},O.prototype.insertLines=function(b){this._restrictCursor();var v=b.params[0]||1,m=this._bufferService.buffer;if(!(m.y>m.scrollBottom||m.y<m.scrollTop)){for(var w=m.y+m.ybase,D=this._bufferService.rows-1-m.scrollBottom,T=this._bufferService.rows-1+m.ybase-D+1;v--;)m.lines.splice(T-1,1),m.lines.splice(w,0,m.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(m.y,m.scrollBottom),m.x=0}},O.prototype.deleteLines=function(b){this._restrictCursor();var v=b.params[0]||1,m=this._bufferService.buffer;if(!(m.y>m.scrollBottom||m.y<m.scrollTop)){var w,D=m.y+m.ybase;for(w=this._bufferService.rows-1-m.scrollBottom,w=this._bufferService.rows-1+m.ybase-w;v--;)m.lines.splice(D,1),m.lines.splice(w,0,m.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(m.y,m.scrollBottom),m.x=0}},O.prototype.insertChars=function(b){this._restrictCursor();var v=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);v&&(v.insertCells(this._bufferService.buffer.x,b.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},O.prototype.deleteChars=function(b){this._restrictCursor();var v=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);v&&(v.deleteCells(this._bufferService.buffer.x,b.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},O.prototype.scrollUp=function(b){for(var v=b.params[0]||1,m=this._bufferService.buffer;v--;)m.lines.splice(m.ybase+m.scrollTop,1),m.lines.splice(m.ybase+m.scrollBottom,0,m.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(m.scrollTop,m.scrollBottom)},O.prototype.scrollDown=function(b){for(var v=b.params[0]||1,m=this._bufferService.buffer;v--;)m.lines.splice(m.ybase+m.scrollBottom,1),m.lines.splice(m.ybase+m.scrollTop,0,m.getBlankLine(o.DEFAULT_ATTR_DATA));this._dirtyRowService.markRangeDirty(m.scrollTop,m.scrollBottom)},O.prototype.scrollLeft=function(b){var v=this._bufferService.buffer;if(!(v.y>v.scrollBottom||v.y<v.scrollTop)){for(var m=b.params[0]||1,w=v.scrollTop;w<=v.scrollBottom;++w){var D=v.lines.get(v.ybase+w);D.deleteCells(0,m,v.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}this._dirtyRowService.markRangeDirty(v.scrollTop,v.scrollBottom)}},O.prototype.scrollRight=function(b){var v=this._bufferService.buffer;if(!(v.y>v.scrollBottom||v.y<v.scrollTop)){for(var m=b.params[0]||1,w=v.scrollTop;w<=v.scrollBottom;++w){var D=v.lines.get(v.ybase+w);D.insertCells(0,m,v.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}this._dirtyRowService.markRangeDirty(v.scrollTop,v.scrollBottom)}},O.prototype.insertColumns=function(b){var v=this._bufferService.buffer;if(!(v.y>v.scrollBottom||v.y<v.scrollTop)){for(var m=b.params[0]||1,w=v.scrollTop;w<=v.scrollBottom;++w){var D=this._bufferService.buffer.lines.get(v.ybase+w);D.insertCells(v.x,m,v.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}this._dirtyRowService.markRangeDirty(v.scrollTop,v.scrollBottom)}},O.prototype.deleteColumns=function(b){var v=this._bufferService.buffer;if(!(v.y>v.scrollBottom||v.y<v.scrollTop)){for(var m=b.params[0]||1,w=v.scrollTop;w<=v.scrollBottom;++w){var D=v.lines.get(v.ybase+w);D.deleteCells(v.x,m,v.getNullCell(this._eraseAttrData()),this._eraseAttrData()),D.isWrapped=!1}this._dirtyRowService.markRangeDirty(v.scrollTop,v.scrollBottom)}},O.prototype.eraseChars=function(b){this._restrictCursor();var v=this._bufferService.buffer.lines.get(this._bufferService.buffer.y+this._bufferService.buffer.ybase);v&&(v.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(b.params[0]||1),this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},O.prototype.repeatPrecedingCharacter=function(b){if(this._parser.precedingCodepoint){for(var v=b.params[0]||1,m=new Uint32Array(v),w=0;w<v;++w)m[w]=this._parser.precedingCodepoint;this.print(m,0,m.length)}},O.prototype.sendDeviceAttributesPrimary=function(b){b.params[0]>0||(this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._coreService.triggerDataEvent(c.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._coreService.triggerDataEvent(c.C0.ESC+"[?6c"))},O.prototype.sendDeviceAttributesSecondary=function(b){b.params[0]>0||(this._terminal.is("xterm")?this._coreService.triggerDataEvent(c.C0.ESC+"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._coreService.triggerDataEvent(c.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._coreService.triggerDataEvent(b.params[0]+"c"):this._terminal.is("screen")&&this._coreService.triggerDataEvent(c.C0.ESC+"[>83;40003;0c"))},O.prototype.setMode=function(b){for(var v=0;v<b.length;v++)switch(b.params[v]){case 4:this._terminal.insertMode=!0}},O.prototype.setModePrivate=function(b){for(var v,m,w=0;w<b.length;w++)switch(b.params[w]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,f.DEFAULT_CHARSET),this._charsetService.setgCharset(1,f.DEFAULT_CHARSET),this._charsetService.setgCharset(2,f.DEFAULT_CHARSET),this._charsetService.setgCharset(3,f.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._terminal.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,(v=this._terminal.viewport)===null||v===void 0||v.syncScrollArea();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),(m=this._terminal.viewport)===null||m===void 0||m.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!0}},O.prototype.resetMode=function(b){for(var v=0;v<b.length;v++)switch(b.params[v]){case 4:this._terminal.insertMode=!1}},O.prototype.resetModePrivate=function(b){for(var v,m,w=0;w<b.length;w++)switch(b.params[w]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._terminal.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,(v=this._terminal.viewport)===null||v===void 0||v.syncScrollArea();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),b.params[w]===1049&&this.restoreCursor(),this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),(m=this._terminal.viewport)===null||m===void 0||m.syncScrollArea(),this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}},O.prototype._extractColor=function(b,v,m){var w=[0,0,-1,0,0,0],D=0,T=0;do{if(w[T+D]=b.params[v+T],b.hasSubParams(v+T)){var F=b.getSubParams(v+T),N=0;do w[1]===5&&(D=1),w[T+N+1+D]=F[N];while(++N<F.length&&N+T+1+D<w.length);break}if(w[1]===5&&T+D>=2||w[1]===2&&T+D>=5)break;w[1]&&(D=1)}while(++T+v<b.length&&T+D<w.length);for(N=2;N<w.length;++N)w[N]===-1&&(w[N]=0);return w[0]===38?w[1]===2?(m.fg|=50331648,m.fg&=-16777216,m.fg|=a.AttributeData.fromColorRGB([w[3],w[4],w[5]])):w[1]===5&&(m.fg&=-50331904,m.fg|=33554432|255&w[3]):w[0]===48&&(w[1]===2?(m.bg|=50331648,m.bg&=-16777216,m.bg|=a.AttributeData.fromColorRGB([w[3],w[4],w[5]])):w[1]===5&&(m.bg&=-50331904,m.bg|=33554432|255&w[3])),T},O.prototype.charAttributes=function(b){if(b.length===1&&b.params[0]===0)return this._curAttrData.fg=o.DEFAULT_ATTR_DATA.fg,void(this._curAttrData.bg=o.DEFAULT_ATTR_DATA.bg);for(var v,m=b.length,w=this._curAttrData,D=0;D<m;D++)(v=b.params[D])>=30&&v<=37?(w.fg&=-50331904,w.fg|=16777216|v-30):v>=40&&v<=47?(w.bg&=-50331904,w.bg|=16777216|v-40):v>=90&&v<=97?(w.fg&=-50331904,w.fg|=16777224|v-90):v>=100&&v<=107?(w.bg&=-50331904,w.bg|=16777224|v-100):v===0?(w.fg=o.DEFAULT_ATTR_DATA.fg,w.bg=o.DEFAULT_ATTR_DATA.bg):v===1?w.fg|=134217728:v===3?w.bg|=67108864:v===4?w.fg|=268435456:v===5?w.fg|=536870912:v===7?w.fg|=67108864:v===8?w.fg|=1073741824:v===2?w.bg|=134217728:v===22?(w.fg&=-134217729,w.bg&=-134217729):v===23?w.bg&=-67108865:v===24?w.fg&=-268435457:v===25?w.fg&=-536870913:v===27?w.fg&=-67108865:v===28?w.fg&=-1073741825:v===39?(w.fg&=-67108864,w.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):v===49?(w.bg&=-67108864,w.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):v===38||v===48?D+=this._extractColor(b,D,w):v===100?(w.fg&=-67108864,w.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,w.bg&=-67108864,w.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",v)},O.prototype.deviceStatus=function(b){switch(b.params[0]){case 5:this._coreService.triggerDataEvent(c.C0.ESC+"[0n");break;case 6:var v=this._bufferService.buffer.y+1,m=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(c.C0.ESC+"["+v+";"+m+"R")}},O.prototype.deviceStatusPrivate=function(b){switch(b.params[0]){case 6:var v=this._bufferService.buffer.y+1,m=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(c.C0.ESC+"[?"+v+";"+m+"R")}},O.prototype.softReset=function(b){var v;this._coreService.isCursorHidden=!1,this._terminal.insertMode=!1,(v=this._terminal.viewport)===null||v===void 0||v.syncScrollArea(),this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._bufferService.buffer.savedX=0,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1},O.prototype.setCursorStyle=function(b){var v=b.params[0]||1;switch(v){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var m=v%2==1;this._optionsService.options.cursorBlink=m},O.prototype.setScrollRegion=function(b){var v,m=b.params[0]||1;(b.length<2||(v=b.params[1])>this._bufferService.rows||v===0)&&(v=this._bufferService.rows),v>m&&(this._bufferService.buffer.scrollTop=m-1,this._bufferService.buffer.scrollBottom=v-1,this._setCursor(0,0))},O.prototype.windowOptions=function(b){if(C(b.params[0],this._optionsService.options.windowOptions)){var v=b.length>1?b.params[1]:0,m=this._instantiationService.getService(y.IRenderService);switch(b.params[0]){case 14:if(m&&v!==2){console.log(m.dimensions);var w=m.dimensions.scaledCanvasWidth.toFixed(0),D=m.dimensions.scaledCanvasHeight.toFixed(0);this._coreService.triggerDataEvent(c.C0.ESC+"[4;"+D+";"+w+"t")}break;case 16:m&&(w=m.dimensions.scaledCellWidth.toFixed(0),D=m.dimensions.scaledCellHeight.toFixed(0),this._coreService.triggerDataEvent(c.C0.ESC+"[6;"+D+";"+w+"t"));break;case 18:this._bufferService&&this._coreService.triggerDataEvent(c.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:v!==0&&v!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),v!==0&&v!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:v!==0&&v!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),v!==0&&v!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}}},O.prototype.saveCursor=function(b){this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset},O.prototype.restoreCursor=function(b){this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._charsetService.charset=this._bufferService.buffer.savedCharset),this._restrictCursor()},O.prototype.setTitle=function(b){this._windowTitle=b,this._terminal.handleTitle(b)},O.prototype.setIconName=function(b){this._iconName=b},O.prototype.nextLine=function(){this._bufferService.buffer.x=0,this.index()},O.prototype.keypadApplicationMode=function(){var b;this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,(b=this._terminal.viewport)===null||b===void 0||b.syncScrollArea()},O.prototype.keypadNumericMode=function(){var b;this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,(b=this._terminal.viewport)===null||b===void 0||b.syncScrollArea()},O.prototype.selectDefaultCharset=function(){this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,f.DEFAULT_CHARSET)},O.prototype.selectCharset=function(b){b.length===2?b[0]!=="/"&&this._charsetService.setgCharset(S[b[0]],f.CHARSETS[b[1]]||f.DEFAULT_CHARSET):this.selectDefaultCharset()},O.prototype.index=function(){this._restrictCursor();var b=this._bufferService.buffer;this._bufferService.buffer.y++,b.y===b.scrollBottom+1?(b.y--,this._terminal.scroll(this._eraseAttrData())):b.y>=this._bufferService.rows&&(b.y=this._bufferService.rows-1),this._restrictCursor()},O.prototype.tabSet=function(){this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0},O.prototype.reverseIndex=function(){this._restrictCursor();var b=this._bufferService.buffer;if(b.y===b.scrollTop){var v=b.scrollBottom-b.scrollTop;b.lines.shiftElements(b.y+b.ybase,v,1),b.lines.set(b.y+b.ybase,b.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(b.scrollTop,b.scrollBottom)}else b.y--,this._restrictCursor()},O.prototype.fullReset=function(){this._parser.reset(),this._onRequestReset.fire()},O.prototype.reset=function(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()},O.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},O.prototype.setgLevel=function(b){this._charsetService.setgLevel(b)},O.prototype.screenAlignmentPattern=function(){var b=new e.CellData;b.content=1<<22|"E".charCodeAt(0),b.fg=this._curAttrData.fg,b.bg=this._curAttrData.bg;var v=this._bufferService.buffer;this._setCursor(0,0);for(var m=0;m<this._bufferService.rows;++m){var w=v.y+v.ybase+m;v.lines.get(w).fill(b),v.lines.get(w).isWrapped=!1}this._dirtyRowService.markAllDirty(),this._setCursor(0,0)},O}(_.Disposable);u.InputHandler=k},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(i,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])})(i,n)},function(i,n){function e(){this.constructor=i}l(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(u,"__esModule",{value:!0});var c=g(2),f=g(15),h=g(19),_=g(20),t=g(22),r=function(){function i(n){this.table=new Uint8Array(n)}return i.prototype.setDefault=function(n,e){f.fill(this.table,n<<4|e)},i.prototype.add=function(n,e,a,s){this.table[e<<8|n]=a<<4|s},i.prototype.addMany=function(n,e,a,s){for(var d=0;d<n.length;d++)this.table[e<<8|n[d]]=a<<4|s},i}();u.TransitionTable=r,u.VT500_TRANSITION_TABLE=function(){var i=new r(4095),n=Array.apply(null,Array(256)).map(function(S,C){return C}),e=function(S,C){return n.slice(S,C)},a=e(32,127),s=e(0,24);s.push(25),s.push.apply(s,e(28,32));var d,y=e(0,14);for(d in i.setDefault(1,0),i.addMany(a,0,2,0),y)i.addMany([24,26,153,154],d,3,0),i.addMany(e(128,144),d,3,0),i.addMany(e(144,152),d,3,0),i.add(156,d,0,0),i.add(27,d,11,1),i.add(157,d,4,8),i.addMany([152,158,159],d,0,7),i.add(155,d,11,3),i.add(144,d,11,9);return i.addMany(s,0,3,0),i.addMany(s,1,3,1),i.add(127,1,0,1),i.addMany(s,8,0,8),i.addMany(s,3,3,3),i.add(127,3,0,3),i.addMany(s,4,3,4),i.add(127,4,0,4),i.addMany(s,6,3,6),i.addMany(s,5,3,5),i.add(127,5,0,5),i.addMany(s,2,3,2),i.add(127,2,0,2),i.add(93,1,4,8),i.addMany(a,8,5,8),i.add(127,8,5,8),i.addMany([156,27,24,26,7],8,6,0),i.addMany(e(28,32),8,0,8),i.addMany([88,94,95],1,0,7),i.addMany(a,7,0,7),i.addMany(s,7,0,7),i.add(156,7,0,0),i.add(127,7,0,7),i.add(91,1,11,3),i.addMany(e(64,127),3,7,0),i.addMany(e(48,60),3,8,4),i.addMany([60,61,62,63],3,9,4),i.addMany(e(48,60),4,8,4),i.addMany(e(64,127),4,7,0),i.addMany([60,61,62,63],4,0,6),i.addMany(e(32,64),6,0,6),i.add(127,6,0,6),i.addMany(e(64,127),6,0,0),i.addMany(e(32,48),3,9,5),i.addMany(e(32,48),5,9,5),i.addMany(e(48,64),5,0,6),i.addMany(e(64,127),5,7,0),i.addMany(e(32,48),4,9,5),i.addMany(e(32,48),1,9,2),i.addMany(e(32,48),2,9,2),i.addMany(e(48,127),2,10,0),i.addMany(e(48,80),1,10,0),i.addMany(e(81,88),1,10,0),i.addMany([89,90,92],1,10,0),i.addMany(e(96,127),1,10,0),i.add(80,1,11,9),i.addMany(s,9,0,9),i.add(127,9,0,9),i.addMany(e(28,32),9,0,9),i.addMany(e(32,48),9,9,12),i.addMany(e(48,60),9,8,10),i.addMany([60,61,62,63],9,9,10),i.addMany(s,11,0,11),i.addMany(e(32,128),11,0,11),i.addMany(e(28,32),11,0,11),i.addMany(s,10,0,10),i.add(127,10,0,10),i.addMany(e(28,32),10,0,10),i.addMany(e(48,60),10,8,10),i.addMany([60,61,62,63],10,0,11),i.addMany(e(32,48),10,9,12),i.addMany(s,12,0,12),i.add(127,12,0,12),i.addMany(e(28,32),12,0,12),i.addMany(e(32,48),12,9,12),i.addMany(e(48,64),12,0,11),i.addMany(e(64,127),12,12,13),i.addMany(e(64,127),10,12,13),i.addMany(e(64,127),9,12,13),i.addMany(s,13,13,13),i.addMany(a,13,13,13),i.add(127,13,0,13),i.addMany([27,156,24,26],13,14,0),i.add(160,0,2,0),i.add(160,8,5,8),i.add(160,6,0,6),i.add(160,11,0,11),i.add(160,13,13,13),i}();var o=function(i){function n(e){e===void 0&&(e=u.VT500_TRANSITION_TABLE);var a=i.call(this)||this;return a._transitions=e,a.initialState=0,a.currentState=a.initialState,a._params=new h.Params,a._params.addParam(0),a._collect=0,a.precedingCodepoint=0,a._printHandlerFb=function(s,d,y){},a._executeHandlerFb=function(s){},a._csiHandlerFb=function(s,d){},a._escHandlerFb=function(s){},a._errorHandlerFb=function(s){return s},a._printHandler=a._printHandlerFb,a._executeHandlers=Object.create(null),a._csiHandlers=Object.create(null),a._escHandlers=Object.create(null),a._oscParser=new _.OscParser,a._dcsParser=new t.DcsParser,a._errorHandler=a._errorHandlerFb,a.setEscHandler({final:"\\"},function(){}),a}return p(n,i),n.prototype._identifier=function(e,a){a===void 0&&(a=[64,126]);var s=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if((s=e.prefix.charCodeAt(0))&&60>s||s>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var d=0;d<e.intermediates.length;++d){var y=e.intermediates.charCodeAt(d);if(32>y||y>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");s<<=8,s|=y}}if(e.final.length!==1)throw new Error("final must be a single byte");var S=e.final.charCodeAt(0);if(a[0]>S||S>a[1])throw new Error("final must be in range "+a[0]+" .. "+a[1]);return(s<<=8)|S},n.prototype.identToString=function(e){for(var a=[];e;)a.push(String.fromCharCode(255&e)),e>>=8;return a.reverse().join("")},n.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},n.prototype.setPrintHandler=function(e){this._printHandler=e},n.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},n.prototype.addEscHandler=function(e,a){var s=this._identifier(e,[48,126]);this._escHandlers[s]===void 0&&(this._escHandlers[s]=[]);var d=this._escHandlers[s];return d.push(a),{dispose:function(){var y=d.indexOf(a);y!==-1&&d.splice(y,1)}}},n.prototype.setEscHandler=function(e,a){this._escHandlers[this._identifier(e,[48,126])]=[a]},n.prototype.clearEscHandler=function(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]},n.prototype.setEscHandlerFallback=function(e){this._escHandlerFb=e},n.prototype.setExecuteHandler=function(e,a){this._executeHandlers[e.charCodeAt(0)]=a},n.prototype.clearExecuteHandler=function(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]},n.prototype.setExecuteHandlerFallback=function(e){this._executeHandlerFb=e},n.prototype.addCsiHandler=function(e,a){var s=this._identifier(e);this._csiHandlers[s]===void 0&&(this._csiHandlers[s]=[]);var d=this._csiHandlers[s];return d.push(a),{dispose:function(){var y=d.indexOf(a);y!==-1&&d.splice(y,1)}}},n.prototype.setCsiHandler=function(e,a){this._csiHandlers[this._identifier(e)]=[a]},n.prototype.clearCsiHandler=function(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]},n.prototype.setCsiHandlerFallback=function(e){this._csiHandlerFb=e},n.prototype.addDcsHandler=function(e,a){return this._dcsParser.addHandler(this._identifier(e),a)},n.prototype.setDcsHandler=function(e,a){this._dcsParser.setHandler(this._identifier(e),a)},n.prototype.clearDcsHandler=function(e){this._dcsParser.clearHandler(this._identifier(e))},n.prototype.setDcsHandlerFallback=function(e){this._dcsParser.setHandlerFallback(e)},n.prototype.addOscHandler=function(e,a){return this._oscParser.addHandler(e,a)},n.prototype.setOscHandler=function(e,a){this._oscParser.setHandler(e,a)},n.prototype.clearOscHandler=function(e){this._oscParser.clearHandler(e)},n.prototype.setOscHandlerFallback=function(e){this._oscParser.setHandlerFallback(e)},n.prototype.setErrorHandler=function(e){this._errorHandler=e},n.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},n.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0},n.prototype.parse=function(e,a){for(var s=0,d=0,y=this.currentState,S=this._oscParser,C=this._dcsParser,A=this._collect,k=this._params,I=this._transitions.table,O=0;O<a;++O){switch((d=I[y<<8|((s=e[O])<160?s:160)])>>4){case 2:for(var b=O+1;;++b){if(b>=a||(s=e[b])<32||s>126&&s<160){this._printHandler(e,O,b),O=b-1;break}if(++b>=a||(s=e[b])<32||s>126&&s<160){this._printHandler(e,O,b),O=b-1;break}if(++b>=a||(s=e[b])<32||s>126&&s<160){this._printHandler(e,O,b),O=b-1;break}if(++b>=a||(s=e[b])<32||s>126&&s<160){this._printHandler(e,O,b),O=b-1;break}}break;case 3:this._executeHandlers[s]?this._executeHandlers[s]():this._executeHandlerFb(s),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:O,code:s,currentState:y,collect:A,params:k,abort:!1}).abort)return;break;case 7:for(var v=this._csiHandlers[A<<8|s],m=v?v.length-1:-1;m>=0&&v[m](k)===!1;m--);m<0&&this._csiHandlerFb(A<<8|s,k),this.precedingCodepoint=0;break;case 8:do switch(s){case 59:k.addParam(0);break;case 58:k.addSubParam(-1);break;default:k.addDigit(s-48)}while(++O<a&&(s=e[O])>47&&s<60);O--;break;case 9:A<<=8,A|=s;break;case 10:for(var w=this._escHandlers[A<<8|s],D=w?w.length-1:-1;D>=0&&w[D]()===!1;D--);D<0&&this._escHandlerFb(A<<8|s),this.precedingCodepoint=0;break;case 11:k.reset(),k.addParam(0),A=0;break;case 12:C.hook(A<<8|s,k);break;case 13:for(var T=O+1;;++T)if(T>=a||(s=e[T])===24||s===26||s===27||s>127&&s<160){C.put(e,O,T),O=T-1;break}break;case 14:C.unhook(s!==24&&s!==26),s===27&&(d|=1),k.reset(),k.addParam(0),A=0,this.precedingCodepoint=0;break;case 4:S.start();break;case 5:for(var F=O+1;;F++)if(F>=a||(s=e[F])<32||s>127&&s<=159){S.put(e,O,F),O=F-1;break}break;case 6:S.end(s!==24&&s!==26),s===27&&(d|=1),k.reset(),k.addParam(0),A=0,this.precedingCodepoint=0}y=15&d}this._collect=A,this.currentState=y},n}(c.Disposable);u.EscapeSequenceParser=o},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(S,C){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,k){A.__proto__=k}||function(A,k){for(var I in k)k.hasOwnProperty(I)&&(A[I]=k[I])})(S,C)},function(S,C){function A(){this.constructor=S}l(S,C),S.prototype=C===null?Object.create(C):(A.prototype=C.prototype,new A)}),c=this&&this.__decorate||function(S,C,A,k){var I,O=arguments.length,b=O<3?C:k===null?k=Object.getOwnPropertyDescriptor(C,A):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(S,C,A,k);else for(var v=S.length-1;v>=0;v--)(I=S[v])&&(b=(O<3?I(b):O>3?I(C,A,b):I(C,A))||b);return O>3&&b&&Object.defineProperty(C,A,b),b},f=this&&this.__param||function(S,C){return function(A,k){C(A,k,S)}};Object.defineProperty(u,"__esModule",{value:!0});var h=g(40),_=g(46),t=g(47),r=g(48),o=g(27),i=g(2),n=g(4),e=g(1),a=g(23),s=g(0),d=1,y=function(S){function C(A,k,I,O,b,v,m,w,D){var T=S.call(this)||this;T._colors=A,T._screenElement=k,T.linkifier=I,T.linkifier2=O,T._bufferService=b,T._charSizeService=v,T._optionsService=m,T.coreService=w,T.coreBrowserService=D,T._id=d++,T._onRequestRefreshRows=new s.EventEmitter;var F=T._optionsService.options.allowTransparency;return T._characterJoinerRegistry=new o.CharacterJoinerRegistry(T._bufferService),T._renderLayers=[new h.TextRenderLayer(T._screenElement,0,T._colors,T._characterJoinerRegistry,F,T._id,T._bufferService,m),new _.SelectionRenderLayer(T._screenElement,1,T._colors,T._id,T._bufferService,m),new r.LinkRenderLayer(T._screenElement,2,T._colors,T._id,I,O,T._bufferService,m),new t.CursorRenderLayer(T._screenElement,3,T._colors,T._id,T._onRequestRefreshRows,T._bufferService,m,w,D)],T.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},T._devicePixelRatio=window.devicePixelRatio,T._updateDimensions(),T.onOptionsChanged(),T}return p(C,S),Object.defineProperty(C.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),C.prototype.dispose=function(){S.prototype.dispose.call(this),this._renderLayers.forEach(function(A){return A.dispose()}),a.removeTerminalFromCache(this._id)},C.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},C.prototype.setColors=function(A){var k=this;this._colors=A,this._renderLayers.forEach(function(I){I.setColors(k._colors),I.reset()})},C.prototype.onResize=function(A,k){var I=this;this._updateDimensions(),this._renderLayers.forEach(function(O){return O.resize(I.dimensions)}),this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},C.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},C.prototype.onBlur=function(){this._runOperation(function(A){return A.onBlur()})},C.prototype.onFocus=function(){this._runOperation(function(A){return A.onFocus()})},C.prototype.onSelectionChanged=function(A,k,I){I===void 0&&(I=!1),this._runOperation(function(O){return O.onSelectionChanged(A,k,I)})},C.prototype.onCursorMove=function(){this._runOperation(function(A){return A.onCursorMove()})},C.prototype.onOptionsChanged=function(){this._runOperation(function(A){return A.onOptionsChanged()})},C.prototype.clear=function(){this._runOperation(function(A){return A.reset()})},C.prototype._runOperation=function(A){this._renderLayers.forEach(function(k){return A(k)})},C.prototype.renderRows=function(A,k){this._renderLayers.forEach(function(I){return I.onGridChanged(A,k)})},C.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=this._optionsService.options.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},C.prototype.registerCharacterJoiner=function(A){return this._characterJoinerRegistry.registerCharacterJoiner(A)},C.prototype.deregisterCharacterJoiner=function(A){return this._characterJoinerRegistry.deregisterCharacterJoiner(A)},c([f(4,e.IBufferService),f(5,n.ICharSizeService),f(6,e.IOptionsService),f(7,e.ICoreService),f(8,n.ICoreBrowserService)],C)}(i.Disposable);u.Renderer=y},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(i,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])})(i,n)},function(i,n){function e(){this.constructor=i}l(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(u,"__esModule",{value:!0});var c=g(41),f=g(13),h=g(6),_=g(3),t=g(27),r=g(5),o=function(i){function n(e,a,s,d,y,S,C,A){var k=i.call(this,e,"text",a,y,s,S,C,A)||this;return k.bufferService=C,k.optionsService=A,k._characterWidth=0,k._characterFont="",k._characterOverlapCache={},k._workCell=new r.CellData,k._state=new c.GridCache,k._characterJoinerRegistry=d,k}return p(n,i),n.prototype.resize=function(e){i.prototype.resize.call(this,e);var a=this._getFont(!1,!1);this._characterWidth===e.scaledCharWidth&&this._characterFont===a||(this._characterWidth=e.scaledCharWidth,this._characterFont=a,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},n.prototype.reset=function(){this._state.clear(),this._clearAll()},n.prototype._forEachCell=function(e,a,s,d){for(var y=e;y<=a;y++)for(var S=y+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.lines.get(S),A=s?s.getJoinedCharacters(S):[],k=0;k<this._bufferService.cols;k++){C.loadCell(k,this._workCell);var I=this._workCell,O=!1,b=k;if(I.getWidth()!==0){if(A.length>0&&k===A[0][0]){O=!0;var v=A.shift();I=new t.JoinedCellData(this._workCell,C.translateToString(!0,v[0],v[1]),v[1]-v[0]),b=v[1]-1}!O&&this._isOverlapping(I)&&b<C.length-1&&C.getCodePoint(b+1)===_.NULL_CELL_CODE&&(I.content&=-12582913,I.content|=2<<22),d(I,k,y),k=b}}},n.prototype._drawBackground=function(e,a){var s=this,d=this._ctx,y=this._bufferService.cols,S=0,C=0,A=null;d.save(),this._forEachCell(e,a,null,function(k,I,O){var b=null;k.isInverse()?b=k.isFgDefault()?s._colors.foreground.css:k.isFgRGB()?"rgb("+h.AttributeData.toColorRGB(k.getFgColor()).join(",")+")":s._colors.ansi[k.getFgColor()].css:k.isBgRGB()?b="rgb("+h.AttributeData.toColorRGB(k.getBgColor()).join(",")+")":k.isBgPalette()&&(b=s._colors.ansi[k.getBgColor()].css),A===null&&(S=I,C=O),O!==C?(d.fillStyle=A||"",s._fillCells(S,C,y-S,1),S=I,C=O):A!==b&&(d.fillStyle=A||"",s._fillCells(S,C,I-S,1),S=I,C=O),A=b}),A!==null&&(d.fillStyle=A,this._fillCells(S,C,y-S,1)),d.restore()},n.prototype._drawForeground=function(e,a){var s=this;this._forEachCell(e,a,this._characterJoinerRegistry,function(d,y,S){if(!d.isInvisible()&&(s._drawChars(d,y,S),d.isUnderline())){if(s._ctx.save(),d.isInverse())if(d.isBgDefault())s._ctx.fillStyle=s._colors.background.css;else if(d.isBgRGB())s._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(d.getBgColor()).join(",")+")";else{var C=d.getBgColor();s._optionsService.options.drawBoldTextInBrightColors&&d.isBold()&&C<8&&(C+=8),s._ctx.fillStyle=s._colors.ansi[C].css}else if(d.isFgDefault())s._ctx.fillStyle=s._colors.foreground.css;else if(d.isFgRGB())s._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(d.getFgColor()).join(",")+")";else{var A=d.getFgColor();s._optionsService.options.drawBoldTextInBrightColors&&d.isBold()&&A<8&&(A+=8),s._ctx.fillStyle=s._colors.ansi[A].css}s._fillBottomLineAtCells(y,S,d.getWidth()),s._ctx.restore()}})},n.prototype.onGridChanged=function(e,a){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,e,this._bufferService.cols,a-e+1),this._drawBackground(e,a),this._drawForeground(e,a))},n.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},n.prototype._isOverlapping=function(e){if(e.getWidth()!==1||e.getCode()<256)return!1;var a=e.getChars();if(this._characterOverlapCache.hasOwnProperty(a))return this._characterOverlapCache[a];this._ctx.save(),this._ctx.font=this._characterFont;var s=Math.floor(this._ctx.measureText(a).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[a]=s,s},n}(f.BaseRenderLayer);u.TextRenderLayer=o},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(){this.cache=[]}return p.prototype.resize=function(c,f){for(var h=0;h<c;h++){this.cache.length<=h&&this.cache.push([]);for(var _=this.cache[h].length;_<f;_++)this.cache[h].push(void 0);this.cache[h].length=f}this.cache.length=c},p.prototype.clear=function(){for(var c=0;c<this.cache.length;c++)for(var f=0;f<this.cache[c].length;f++)this.cache[c][f]=void 0},p}();u.GridCache=l},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(s,d){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,S){y.__proto__=S}||function(y,S){for(var C in S)S.hasOwnProperty(C)&&(y[C]=S[C])})(s,d)},function(s,d){function y(){this.constructor=s}l(s,d),s.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)});Object.defineProperty(u,"__esModule",{value:!0});var c=g(9),f=g(43),h=g(25),_=g(45),t=g(11),r=g(26),o=g(10),i={css:"rgba(0, 0, 0, 0)",rgba:0};function n(s){return s.code<<21|s.bg<<12|s.fg<<3|(s.bold?0:4)+(s.dim?0:2)+(s.italic?0:1)}u.getGlyphCacheKey=n;var e=function(s){function d(y,S){var C=s.call(this)||this;C._config=S,C._drawToCacheCount=0,C._glyphsWaitingOnBitmap=[],C._bitmapCommitTimeout=null,C._bitmap=null,C._cacheCanvas=y.createElement("canvas"),C._cacheCanvas.width=1024,C._cacheCanvas.height=1024,C._cacheCtx=r.throwIfFalsy(C._cacheCanvas.getContext("2d",{alpha:!0}));var A=y.createElement("canvas");A.width=C._config.scaledCharWidth,A.height=C._config.scaledCharHeight,C._tmpCtx=r.throwIfFalsy(A.getContext("2d",{alpha:C._config.allowTransparency})),C._width=Math.floor(1024/C._config.scaledCharWidth),C._height=Math.floor(1024/C._config.scaledCharHeight);var k=C._width*C._height;return C._cacheMap=new _.LRUMap(k),C._cacheMap.prealloc(k),C}return p(d,s),d.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},d.prototype.beginFrame=function(){this._drawToCacheCount=0},d.prototype.draw=function(y,S,C,A){if(S.code===32)return!0;if(!this._canCache(S))return!1;var k=n(S),I=this._cacheMap.get(k);if(I!=null)return this._drawFromCache(y,I,C,A),!0;if(this._drawToCacheCount<100){var O;O=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var b=this._drawToCache(S,O);return this._cacheMap.set(k,b),this._drawFromCache(y,b,C,A),!0}return!1},d.prototype._canCache=function(y){return y.code<256},d.prototype._toCoordinateX=function(y){return y%this._width*this._config.scaledCharWidth},d.prototype._toCoordinateY=function(y){return Math.floor(y/this._width)*this._config.scaledCharHeight},d.prototype._drawFromCache=function(y,S,C,A){if(!S.isEmpty){var k=this._toCoordinateX(S.index),I=this._toCoordinateY(S.index);y.drawImage(S.inBitmap?this._bitmap:this._cacheCanvas,k,I,this._config.scaledCharWidth,this._config.scaledCharHeight,C,A,this._config.scaledCharWidth,this._config.scaledCharHeight)}},d.prototype._getColorFromAnsiIndex=function(y){return y<this._config.colors.ansi.length?this._config.colors.ansi[y]:h.DEFAULT_ANSI_COLORS[y]},d.prototype._getBackgroundColor=function(y){return this._config.allowTransparency?i:y.bg===c.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:y.bg<256?this._getColorFromAnsiIndex(y.bg):this._config.colors.background},d.prototype._getForegroundColor=function(y){return y.fg===c.INVERTED_DEFAULT_COLOR?o.color.opaque(this._config.colors.background):y.fg<256?this._getColorFromAnsiIndex(y.fg):this._config.colors.foreground},d.prototype._drawToCache=function(y,S){this._drawToCacheCount++,this._tmpCtx.save();var C=this._getBackgroundColor(y);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=C.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var A=y.bold?this._config.fontWeightBold:this._config.fontWeight,k=y.italic?"italic":"";this._tmpCtx.font=k+" "+A+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="middle",this._tmpCtx.fillStyle=this._getForegroundColor(y).css,y.dim&&(this._tmpCtx.globalAlpha=c.DIM_OPACITY),this._tmpCtx.fillText(y.chars,0,this._config.scaledCharHeight/2),this._tmpCtx.restore();var I=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),O=!1;this._config.allowTransparency||(O=function(w,D){for(var T=!0,F=D.rgba>>>24,N=D.rgba>>>16&255,V=D.rgba>>>8&255,Z=0;Z<w.data.length;Z+=4)w.data[Z]===F&&w.data[Z+1]===N&&w.data[Z+2]===V?w.data[Z+3]=0:T=!1;return T}(I,C));var b=this._toCoordinateX(S),v=this._toCoordinateY(S);this._cacheCtx.putImageData(I,b,v);var m={index:S,isEmpty:O,inBitmap:!1};return this._addGlyphToBitmap(m),m},d.prototype._addGlyphToBitmap=function(y){var S=this;!("createImageBitmap"in window)||t.isFirefox||t.isSafari||(this._glyphsWaitingOnBitmap.push(y),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return S._generateBitmap()},100)))},d.prototype._generateBitmap=function(){var y=this,S=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(C){y._bitmap=C;for(var A=0;A<S.length;A++)S[A].inBitmap=!0}),this._bitmapCommitTimeout=null},d}(f.BaseCharAtlas);u.DynamicCharAtlas=e;var a=function(s){function d(y,S){return s.call(this)||this}return p(d,s),d.prototype.draw=function(y,S,C,A){return!1},d}(f.BaseCharAtlas);u.NoneCharAtlas=a},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(){this._didWarmUp=!1}return p.prototype.dispose=function(){},p.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},p.prototype._doWarmUp=function(){},p.prototype.beginFrame=function(){},p}();u.BaseCharAtlas=l},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(){this._color={},this._rgba={}}return p.prototype.clear=function(){this._color={},this._rgba={}},p.prototype.setCss=function(c,f,h){this._rgba[c]||(this._rgba[c]={}),this._rgba[c][f]=h},p.prototype.getCss=function(c,f){return this._rgba[c]?this._rgba[c][f]:void 0},p.prototype.setColor=function(c,f,h){this._color[c]||(this._color[c]={}),this._color[c][f]=h},p.prototype.getColor=function(c,f){return this._color[c]?this._color[c][f]:void 0},p}();u.ColorContrastCache=l},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(c){this.capacity=c,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return p.prototype._unlinkNode=function(c){var f=c.prev,h=c.next;c===this._head&&(this._head=h),c===this._tail&&(this._tail=f),f!==null&&(f.next=h),h!==null&&(h.prev=f)},p.prototype._appendNode=function(c){var f=this._tail;f!==null&&(f.next=c),c.prev=f,c.next=null,this._tail=c,this._head===null&&(this._head=c)},p.prototype.prealloc=function(c){for(var f=this._nodePool,h=0;h<c;h++)f.push({prev:null,next:null,key:null,value:null})},p.prototype.get=function(c){var f=this._map[c];return f!==void 0?(this._unlinkNode(f),this._appendNode(f),f.value):null},p.prototype.peekValue=function(c){var f=this._map[c];return f!==void 0?f.value:null},p.prototype.peek=function(){var c=this._head;return c===null?null:c.value},p.prototype.set=function(c,f){var h=this._map[c];if(h!==void 0)h=this._map[c],this._unlinkNode(h),h.value=f;else if(this.size>=this.capacity)h=this._head,this._unlinkNode(h),delete this._map[h.key],h.key=c,h.value=f,this._map[c]=h;else{var _=this._nodePool;_.length>0?((h=_.pop()).key=c,h.value=f):h={prev:null,next:null,key:c,value:f},this._map[c]=h,this.size++}this._appendNode(h)},p}();u.LRUMap=l},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(f,h){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,t){_.__proto__=t}||function(_,t){for(var r in t)t.hasOwnProperty(r)&&(_[r]=t[r])})(f,h)},function(f,h){function _(){this.constructor=f}l(f,h),f.prototype=h===null?Object.create(h):(_.prototype=h.prototype,new _)});Object.defineProperty(u,"__esModule",{value:!0});var c=function(f){function h(_,t,r,o,i,n){var e=f.call(this,_,"selection",t,!0,r,o,i,n)||this;return e.bufferService=i,e.optionsService=n,e._clearState(),e}return p(h,f),h.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},h.prototype.resize=function(_){f.prototype.resize.call(this,_),this._clearState()},h.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},h.prototype.onSelectionChanged=function(_,t,r){if(this._didStateChange(_,t,r,this._bufferService.buffer.ydisp))if(this._clearAll(),_&&t){var o=_[1]-this._bufferService.buffer.ydisp,i=t[1]-this._bufferService.buffer.ydisp,n=Math.max(o,0),e=Math.min(i,this._bufferService.rows-1);if(!(n>=this._bufferService.rows||e<0)){if(this._ctx.fillStyle=this._colors.selection.css,r){var a=_[0],s=t[0]-a,d=e-n+1;this._fillCells(a,n,s,d)}else{a=o===n?_[0]:0;var y=n===e?t[0]:this._bufferService.cols;this._fillCells(a,n,y-a,1);var S=Math.max(e-n-1,0);if(this._fillCells(0,n+1,this._bufferService.cols,S),n!==e){var C=i===e?t[0]:this._bufferService.cols;this._fillCells(0,e,C,1)}}this._state.start=[_[0],_[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=r,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},h.prototype._didStateChange=function(_,t,r,o){return!this._areCoordinatesEqual(_,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||r!==this._state.columnSelectMode||o!==this._state.ydisp},h.prototype._areCoordinatesEqual=function(_,t){return!(!_||!t)&&_[0]===t[0]&&_[1]===t[1]},h}(g(13).BaseRenderLayer);u.SelectionRenderLayer=c},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(t,r){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var n in i)i.hasOwnProperty(n)&&(o[n]=i[n])})(t,r)},function(t,r){function o(){this.constructor=t}l(t,r),t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)});Object.defineProperty(u,"__esModule",{value:!0});var c=g(13),f=g(5),h=function(t){function r(o,i,n,e,a,s,d,y,S){var C=t.call(this,o,"cursor",i,!0,n,e,s,d)||this;return C._onRequestRefreshRowsEvent=a,C.bufferService=s,C.optionsService=d,C._coreService=y,C._coreBrowserService=S,C._cell=new f.CellData,C._state={x:0,y:0,isFocused:!1,style:"",width:0},C._cursorRenderers={bar:C._renderBarCursor.bind(C),block:C._renderBlockCursor.bind(C),underline:C._renderUnderlineCursor.bind(C)},C}return p(r,t),r.prototype.resize=function(o){t.prototype.resize.call(this,o),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},r.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},r.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onOptionsChanged=function(){var o,i=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new _(this._coreBrowserService.isFocused,function(){i._render(!0)})):((o=this._cursorBlinkStateManager)===null||o===void 0||o.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype.onGridChanged=function(o,i){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype._render=function(o){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var i=this._bufferService.buffer.ybase+this._bufferService.buffer.y,n=i-this._bufferService.buffer.ydisp;if(n<0||n>=this._bufferService.rows)this._clearCursor();else{var e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(i).loadCell(e,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var a=this._optionsService.options.cursorStyle;return a&&a!=="block"?this._cursorRenderers[a](e,n,this._cell):this._renderBlurCursor(e,n,this._cell),this._ctx.restore(),this._state.x=e,this._state.y=n,this._state.isFocused=!1,this._state.style=a,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===e&&this._state.y===n&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](e,n,this._cell),this._ctx.restore(),this._state.x=e,this._state.y=n,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},r.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},r.prototype._renderBarCursor=function(o,i,n){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(o,i,this._optionsService.options.cursorWidth),this._ctx.restore()},r.prototype._renderBlockCursor=function(o,i,n){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(o,i,n.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(n,o,i),this._ctx.restore()},r.prototype._renderUnderlineCursor=function(o,i,n){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(o,i),this._ctx.restore()},r.prototype._renderBlurCursor=function(o,i,n){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(o,i,n.getWidth(),1),this._ctx.restore()},r}(c.BaseRenderLayer);u.CursorRenderLayer=h;var _=function(){function t(r,o){this._renderCallback=o,this.isCursorVisible=!0,r&&this._restartInterval()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.restartBlinkAnimation=function(){var r=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})))},t.prototype._restartInterval=function(r){var o=this;r===void 0&&(r=600),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout(function(){if(o._animationTimeRestarted){var i=600-(Date.now()-o._animationTimeRestarted);if(o._animationTimeRestarted=void 0,i>0)return void o._restartInterval(i)}o.isCursorVisible=!1,o._animationFrame=window.requestAnimationFrame(function(){o._renderCallback(),o._animationFrame=void 0}),o._blinkInterval=window.setInterval(function(){if(o._animationTimeRestarted){var n=600-(Date.now()-o._animationTimeRestarted);return o._animationTimeRestarted=void 0,void o._restartInterval(n)}o.isCursorVisible=!o.isCursorVisible,o._animationFrame=window.requestAnimationFrame(function(){o._renderCallback(),o._animationFrame=void 0})},600)},r)},t.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},t}()},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(t,r){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var n in i)i.hasOwnProperty(n)&&(o[n]=i[n])})(t,r)},function(t,r){function o(){this.constructor=t}l(t,r),t.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)});Object.defineProperty(u,"__esModule",{value:!0});var c=g(13),f=g(9),h=g(24),_=function(t){function r(o,i,n,e,a,s,d,y){var S=t.call(this,o,"link",i,!0,n,e,d,y)||this;return S.bufferService=d,S.optionsService=y,a.onLinkHover(function(C){return S._onLinkHover(C)}),a.onLinkLeave(function(C){return S._onLinkLeave(C)}),s.onLinkHover(function(C){return S._onLinkHover(C)}),s.onLinkLeave(function(C){return S._onLinkLeave(C)}),S}return p(r,t),r.prototype.resize=function(o){t.prototype.resize.call(this,o),this._state=void 0},r.prototype.reset=function(){this._clearCurrentLink()},r.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var o=this._state.y2-this._state.y1-1;o>0&&this._clearCells(0,this._state.y1+1,this._state.cols,o),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},r.prototype._onLinkHover=function(o){if(o.fg===f.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:o.fg&&h.is256Color(o.fg)?this._ctx.fillStyle=this._colors.ansi[o.fg].css:this._ctx.fillStyle=this._colors.foreground.css,o.y1===o.y2)this._fillBottomLineAtCells(o.x1,o.y1,o.x2-o.x1);else{this._fillBottomLineAtCells(o.x1,o.y1,o.cols-o.x1);for(var i=o.y1+1;i<o.y2;i++)this._fillBottomLineAtCells(0,i,o.cols);this._fillBottomLineAtCells(0,o.y2,o.x2)}this._state=o},r.prototype._onLinkLeave=function(o){this._clearCurrentLink()},r}(c.BaseRenderLayer);u.LinkRenderLayer=_},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(0),p=function(){function f(h,_,t,r){this._bufferService=h,this._logService=_,this._optionsService=t,this._unicodeService=r,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onLinkHover=new l.EventEmitter,this._onLinkLeave=new l.EventEmitter,this._onLinkTooltip=new l.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(f.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!0,configurable:!0}),f.prototype.attachToDom=function(h,_){this._element=h,this._mouseZoneManager=_},f.prototype.linkifyRows=function(h,_){var t=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=h,this._rowsToLinkify.end=_):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,h),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,_)),this._mouseZoneManager.clearAll(h,_),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return t._linkifyRows()},f._timeBeforeLatency))},f.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var h=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var _=h.ydisp+this._rowsToLinkify.start;if(!(_>=h.lines.length)){for(var t=h.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,r=Math.ceil(2e3/this._bufferService.cols),o=this._bufferService.buffer.iterator(!1,_,t,r,r);o.hasNext();)for(var i=o.next(),n=0;n<this._linkMatchers.length;n++)this._doLinkifyRow(i.range.first,i.content,this._linkMatchers[n]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},f.prototype.registerLinkMatcher=function(h,_,t){if(t===void 0&&(t={}),!_)throw new Error("handler must be defined");var r={id:this._nextLinkMatcherId++,regex:h,handler:_,matchIndex:t.matchIndex,validationCallback:t.validationCallback,hoverTooltipCallback:t.tooltipCallback,hoverLeaveCallback:t.leaveCallback,willLinkActivate:t.willLinkActivate,priority:t.priority||0};return this._addLinkMatcherToList(r),r.id},f.prototype._addLinkMatcherToList=function(h){if(this._linkMatchers.length!==0){for(var _=this._linkMatchers.length-1;_>=0;_--)if(h.priority<=this._linkMatchers[_].priority)return void this._linkMatchers.splice(_+1,0,h);this._linkMatchers.splice(0,0,h)}else this._linkMatchers.push(h)},f.prototype.deregisterLinkMatcher=function(h){for(var _=0;_<this._linkMatchers.length;_++)if(this._linkMatchers[_].id===h)return this._linkMatchers.splice(_,1),!0;return!1},f.prototype._doLinkifyRow=function(h,_,t){for(var r,o=this,i=new RegExp(t.regex.source,(t.regex.flags||"")+"g"),n=-1,e=function(){var s=r[typeof t.matchIndex!="number"?0:t.matchIndex];if(!s)return a._logService.debug("match found without corresponding matchIndex",r,t),"break";if(n=_.indexOf(s,n+1),i.lastIndex=n+s.length,n<0)return"break";var d=a._bufferService.buffer.stringIndexToBufferIndex(h,n);if(d[0]<0)return"break";var y=a._bufferService.buffer.lines.get(d[0]);if(!y)return"break";var S=y.getFg(d[1]),C=S?S>>9&511:void 0;t.validationCallback?t.validationCallback(s,function(A){o._rowsTimeoutId||A&&o._addLink(d[1],d[0]-o._bufferService.buffer.ydisp,s,t,C)}):a._addLink(d[1],d[0]-a._bufferService.buffer.ydisp,s,t,C)},a=this;(r=i.exec(_))!==null&&e()!=="break";);},f.prototype._addLink=function(h,_,t,r,o){var i=this;if(this._mouseZoneManager&&this._element){var n=this._unicodeService.getStringCellWidth(t),e=h%this._bufferService.cols,a=_+Math.floor(h/this._bufferService.cols),s=(e+n)%this._bufferService.cols,d=a+Math.floor((e+n)/this._bufferService.cols);s===0&&(s=this._bufferService.cols,d--),this._mouseZoneManager.add(new c(e+1,a+1,s+1,d+1,function(y){if(r.handler)return r.handler(y,t);var S=window.open();S?(S.opener=null,S.location.href=t):console.warn("Opening link blocked as opener could not be cleared")},function(){i._onLinkHover.fire(i._createLinkHoverEvent(e,a,s,d,o)),i._element.classList.add("xterm-cursor-pointer")},function(y){i._onLinkTooltip.fire(i._createLinkHoverEvent(e,a,s,d,o)),r.hoverTooltipCallback&&r.hoverTooltipCallback(y,t,{start:{x:e,y:a},end:{x:s,y:d}})},function(){i._onLinkLeave.fire(i._createLinkHoverEvent(e,a,s,d,o)),i._element.classList.remove("xterm-cursor-pointer"),r.hoverLeaveCallback&&r.hoverLeaveCallback()},function(y){return!r.willLinkActivate||r.willLinkActivate(y,t)}))}},f.prototype._createLinkHoverEvent=function(h,_,t,r,o){return{x1:h,y1:_,x2:t,y2:r,cols:this._bufferService.cols,fg:o}},f._timeBeforeLatency=200,f}();u.Linkifier=p;var c=function(f,h,_,t,r,o,i,n,e){this.x1=f,this.y1=h,this.x2=_,this.y2=t,this.clickCallback=r,this.hoverCallback=o,this.tooltipCallback=i,this.leaveCallback=n,this.willLinkActivate=e};u.MouseZone=c},function(E,u,g){"use strict";var l=this&&this.__decorate||function(s,d,y,S){var C,A=arguments.length,k=A<3?d:S===null?S=Object.getOwnPropertyDescriptor(d,y):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(s,d,y,S);else for(var I=s.length-1;I>=0;I--)(C=s[I])&&(k=(A<3?C(k):A>3?C(d,y,k):C(d,y))||k);return A>3&&k&&Object.defineProperty(d,y,k),k},p=this&&this.__param||function(s,d){return function(y,S){d(y,S,s)}};Object.defineProperty(u,"__esModule",{value:!0});var c=g(11),f=g(51),h=g(5),_=g(0),t=g(4),r=g(1),o=g(28),i=g(52),n=String.fromCharCode(160),e=new RegExp(n,"g"),a=function(){function s(d,y,S,C,A,k,I,O){var b=this;this._scrollLines=d,this._element=y,this._screenElement=S,this._charSizeService=C,this._bufferService=A,this._coreService=k,this._mouseService=I,this._optionsService=O,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._onLinuxMouseSelection=new _.EventEmitter,this._onRedrawRequest=new _.EventEmitter,this._onSelectionChange=new _.EventEmitter,this._mouseMoveListener=function(v){return b._onMouseMove(v)},this._mouseUpListener=function(v){return b._onMouseUp(v)},this._coreService.onUserInput(function(){b.hasSelection&&b.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(function(v){return b._onTrim(v)}),this._bufferService.buffers.onBufferActivate(function(v){return b._onBufferActivate(v)}),this.enable(),this._model=new f.SelectionModel(this._bufferService),this._activeSelectionMode=0}return Object.defineProperty(s.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"onRedrawRequest",{get:function(){return this._onRedrawRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,configurable:!0}),s.prototype.dispose=function(){this._removeMouseDownListeners()},s.prototype.reset=function(){this.clearSelection()},s.prototype.disable=function(){this.clearSelection(),this._enabled=!1},s.prototype.enable=function(){this._enabled=!0},Object.defineProperty(s.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hasSelection",{get:function(){var d=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return!(!d||!y||d[0]===y[0]&&d[1]===y[1])},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectionText",{get:function(){var d=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!d||!y)return"";var S=this._bufferService.buffer,C=[];if(this._activeSelectionMode===3){if(d[0]===y[0])return"";for(var A=d[1];A<=y[1];A++){var k=S.translateBufferLineToString(A,!0,d[0],y[0]);C.push(k)}}else{var I=d[1]===y[1]?y[0]:void 0;for(C.push(S.translateBufferLineToString(d[1],!0,d[0],I)),A=d[1]+1;A<=y[1]-1;A++){var O=S.lines.get(A);k=S.translateBufferLineToString(A,!0),O&&O.isWrapped?C[C.length-1]+=k:C.push(k)}d[1]!==y[1]&&(O=S.lines.get(y[1]),k=S.translateBufferLineToString(y[1],!0,0,y[0]),O&&O.isWrapped?C[C.length-1]+=k:C.push(k))}return C.map(function(b){return b.replace(e," ")}).join(c.isWindows?`\r
`:`
`)},enumerable:!0,configurable:!0}),s.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},s.prototype.refresh=function(d){var y=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return y._refresh()})),c.isLinux&&d&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},s.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},s.prototype.isClickInSelection=function(d){var y=this._getMouseBufferCoords(d),S=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!!(S&&C&&y)&&this._areCoordsInSelection(y,S,C)},s.prototype._areCoordsInSelection=function(d,y,S){return d[1]>y[1]&&d[1]<S[1]||y[1]===S[1]&&d[1]===y[1]&&d[0]>=y[0]&&d[0]<S[0]||y[1]<S[1]&&d[1]===S[1]&&d[0]<S[0]||y[1]<S[1]&&d[1]===y[1]&&d[0]>=y[0]},s.prototype.selectWordAtCursor=function(d){var y=this._getMouseBufferCoords(d);y&&(this._selectWordAt(y,!1),this._model.selectionEnd=void 0,this.refresh(!0))},s.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},s.prototype.selectLines=function(d,y){this._model.clearSelection(),d=Math.max(d,0),y=Math.min(y,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,d],this._model.selectionEnd=[this._bufferService.cols,y],this.refresh(),this._onSelectionChange.fire()},s.prototype._onTrim=function(d){this._model.onTrim(d)&&this.refresh()},s.prototype._getMouseBufferCoords=function(d){var y=this._mouseService.getCoords(d,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(y)return y[0]--,y[1]--,y[1]+=this._bufferService.buffer.ydisp,y},s.prototype._getMouseEventScrollAmount=function(d){var y=o.getCoordsRelativeToElement(d,this._screenElement)[1],S=this._bufferService.rows*Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight);return y>=0&&y<=S?0:(y>S&&(y-=S),y=Math.min(Math.max(y,-50),50),(y/=50)/Math.abs(y)+Math.round(14*y))},s.prototype.shouldForceSelection=function(d){return c.isMac?d.altKey&&this._optionsService.options.macOptionClickForcesSelection:d.shiftKey},s.prototype.onMouseDown=function(d){if(this._mouseDownTimeStamp=d.timeStamp,(d.button!==2||!this.hasSelection)&&d.button===0){if(!this._enabled){if(!this.shouldForceSelection(d))return;d.stopPropagation()}d.preventDefault(),this._dragScrollAmount=0,this._enabled&&d.shiftKey?this._onIncrementalClick(d):d.detail===1?this._onSingleClick(d):d.detail===2?this._onDoubleClick(d):d.detail===3&&this._onTripleClick(d),this._addMouseDownListeners(),this.refresh(!0)}},s.prototype._addMouseDownListeners=function(){var d=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return d._dragScroll()},50)},s.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},s.prototype._onIncrementalClick=function(d){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(d))},s.prototype._onSingleClick=function(d){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(d)?3:0,this._model.selectionStart=this._getMouseBufferCoords(d),this._model.selectionStart){this._model.selectionEnd=void 0;var y=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);y&&y.length!==this._model.selectionStart[0]&&y.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},s.prototype._onDoubleClick=function(d){var y=this._getMouseBufferCoords(d);y&&(this._activeSelectionMode=1,this._selectWordAt(y,!0))},s.prototype._onTripleClick=function(d){var y=this._getMouseBufferCoords(d);y&&(this._activeSelectionMode=2,this._selectLineAt(y[1]))},s.prototype.shouldColumnSelect=function(d){return d.altKey&&!(c.isMac&&this._optionsService.options.macOptionClickForcesSelection)},s.prototype._onMouseMove=function(d){if(d.stopImmediatePropagation(),this._model.selectionStart){var y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(d),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(d),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var S=this._bufferService.buffer;if(this._model.selectionEnd[1]<S.lines.length){var C=S.lines.get(this._model.selectionEnd[1]);C&&C.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},s.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._scrollLines(this._dragScrollAmount,!1);var d=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(d.ydisp+this._bufferService.rows,d.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=d.ydisp),this.refresh()}},s.prototype._onMouseUp=function(d){var y=d.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&y<500){if(d.altKey&&this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var S=this._mouseService.getCoords(d,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(S&&S[0]!==void 0&&S[1]!==void 0){var C=i.moveToCellSequence(S[0]-1,S[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(C,!0)}}}else this.hasSelection&&this._onSelectionChange.fire()},s.prototype._onBufferActivate=function(d){var y=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=d.activeBuffer.lines.onTrim(function(S){return y._onTrim(S)})},s.prototype._convertViewportColToCharacterIndex=function(d,y){for(var S=y[0],C=0;y[0]>=C;C++){var A=d.loadCell(C,this._workCell).getChars().length;this._workCell.getWidth()===0?S--:A>1&&y[0]!==C&&(S+=A-1)}return S},s.prototype.setSelection=function(d,y,S){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[d,y],this._model.selectionStartLength=S,this.refresh()},s.prototype._getWordAt=function(d,y,S,C){if(S===void 0&&(S=!0),C===void 0&&(C=!0),!(d[0]>=this._bufferService.cols)){var A=this._bufferService.buffer,k=A.lines.get(d[1]);if(k){var I=A.translateBufferLineToString(d[1],!1),O=this._convertViewportColToCharacterIndex(k,d),b=O,v=d[0]-O,m=0,w=0,D=0,T=0;if(I.charAt(O)===" "){for(;O>0&&I.charAt(O-1)===" ";)O--;for(;b<I.length&&I.charAt(b+1)===" ";)b++}else{var F=d[0],N=d[0];k.getWidth(F)===0&&(m++,F--),k.getWidth(N)===2&&(w++,N++);var V=k.getString(N).length;for(V>1&&(T+=V-1,b+=V-1);F>0&&O>0&&!this._isCharWordSeparator(k.loadCell(F-1,this._workCell));){k.loadCell(F-1,this._workCell);var Z=this._workCell.getChars().length;this._workCell.getWidth()===0?(m++,F--):Z>1&&(D+=Z-1,O-=Z-1),O--,F--}for(;N<k.length&&b+1<I.length&&!this._isCharWordSeparator(k.loadCell(N+1,this._workCell));){k.loadCell(N+1,this._workCell);var K=this._workCell.getChars().length;this._workCell.getWidth()===2?(w++,N++):K>1&&(T+=K-1,b+=K-1),b++,N++}}b++;var R=O+v-m+D,Y=Math.min(this._bufferService.cols,b-O+m+w-D-T);if(y||I.slice(O,b).trim()!==""){if(S&&R===0&&k.getCodePoint(0)!==32){var j=A.lines.get(d[1]-1);if(j&&k.isWrapped&&j.getCodePoint(this._bufferService.cols-1)!==32){var W=this._getWordAt([this._bufferService.cols-1,d[1]-1],!1,!0,!1);if(W){var B=this._bufferService.cols-W.start;R-=B,Y+=B}}}if(C&&R+Y===this._bufferService.cols&&k.getCodePoint(this._bufferService.cols-1)!==32){var Q=A.lines.get(d[1]+1);if(Q&&Q.isWrapped&&Q.getCodePoint(0)!==32){var X=this._getWordAt([0,d[1]+1],!1,!1,!0);X&&(Y+=X.length)}}return{start:R,length:Y}}}}},s.prototype._selectWordAt=function(d,y){var S=this._getWordAt(d,y);if(S){for(;S.start<0;)S.start+=this._bufferService.cols,d[1]--;this._model.selectionStart=[S.start,d[1]],this._model.selectionStartLength=S.length}},s.prototype._selectToWordAt=function(d){var y=this._getWordAt(d,!0);if(y){for(var S=d[1];y.start<0;)y.start+=this._bufferService.cols,S--;if(!this._model.areSelectionValuesReversed())for(;y.start+y.length>this._bufferService.cols;)y.length-=this._bufferService.cols,S++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,S]}},s.prototype._isCharWordSeparator=function(d){return d.getWidth()!==0&&this._optionsService.options.wordSeparator.indexOf(d.getChars())>=0},s.prototype._selectLineAt=function(d){var y=this._bufferService.buffer.getWrappedRangeForLine(d);this._model.selectionStart=[0,y.first],this._model.selectionEnd=[this._bufferService.cols,y.last],this._model.selectionStartLength=0},l([p(3,t.ICharSizeService),p(4,r.IBufferService),p(5,r.ICoreService),p(6,t.IMouseService),p(7,r.IOptionsService)],s)}();u.SelectionService=a},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(c){this._bufferService=c,this.isSelectAllActive=!1,this.selectionStartLength=0}return p.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(p.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[c,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!0,configurable:!0}),p.prototype.areSelectionValuesReversed=function(){var c=this.selectionStart,f=this.selectionEnd;return!(!c||!f)&&(c[1]>f[1]||c[1]===f[1]&&c[0]>f[0])},p.prototype.onTrim=function(c){return this.selectionStart&&(this.selectionStart[1]-=c),this.selectionEnd&&(this.selectionEnd[1]-=c),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},p}();u.SelectionModel=l},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(12);function p(r,o,i,n){var e=r-c(i,r),a=o-c(i,o);return t(Math.abs(e-a)-function(s,d,y){for(var S=0,C=s-c(y,s),A=d-c(y,d),k=0;k<Math.abs(C-A);k++){var I=f(s,d)==="A"?-1:1,O=y.buffer.lines.get(C+I*k);O&&O.isWrapped&&S++}return S}(r,o,i),_(f(r,o),n))}function c(r,o){for(var i=0,n=r.buffer.lines.get(o),e=n&&n.isWrapped;e&&o>=0&&o<r.rows;)i++,e=(n=r.buffer.lines.get(--o))&&n.isWrapped;return i}function f(r,o){return r>o?"A":"B"}function h(r,o,i,n,e,a){for(var s=r,d=o,y="";s!==i||d!==n;)s+=e?1:-1,e&&s>a.cols-1?(y+=a.buffer.translateBufferLineToString(d,!1,r,s),s=0,r=0,d++):!e&&s<0&&(y+=a.buffer.translateBufferLineToString(d,!1,0,r+1),r=s=a.cols-1,d--);return y+a.buffer.translateBufferLineToString(d,!1,r,s)}function _(r,o){var i=o?"O":"[";return l.C0.ESC+i+r}function t(r,o){r=Math.floor(r);for(var i="",n=0;n<r;n++)i+=o;return i}u.moveToCellSequence=function(r,o,i,n){var e,a=i.buffer.x,s=i.buffer.y;if(!i.buffer.hasScrollback)return function(y,S,C,A,k,I){return p(S,A,k,I).length===0?"":t(h(y,S,y,S-c(k,S),!1,k).length,_("D",I))}(a,s,0,o,i,n)+p(s,o,i,n)+function(y,S,C,A,k,I){var O;O=p(S,A,k,I).length>0?A-c(k,A):S;var b=A,v=function(m,w,D,T,F,N){var V;return V=p(D,T,F,N).length>0?T-c(F,T):w,m<D&&V<=T||m>=D&&V<T?"C":"D"}(y,S,C,A,k,I);return t(h(y,O,C,b,v==="C",k).length,_(v,I))}(a,s,r,o,i,n);if(s===o)return e=a>r?"D":"C",t(Math.abs(a-r),_(e,n));e=s>o?"D":"C";var d=Math.abs(s-o);return t(function(y,S){return S.cols-y}(s>o?r:a,i)+(d-1)*i.cols+1+((s>o?a:r)-1),_(e,n))}},function(E,u,g){"use strict";var l=this&&this.__decorate||function(h,_,t,r){var o,i=arguments.length,n=i<3?_:r===null?r=Object.getOwnPropertyDescriptor(_,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(h,_,t,r);else for(var e=h.length-1;e>=0;e--)(o=h[e])&&(n=(i<3?o(n):i>3?o(_,t,n):o(_,t))||n);return i>3&&n&&Object.defineProperty(_,t,n),n},p=this&&this.__param||function(h,_){return function(t,r){_(t,r,h)}};Object.defineProperty(u,"__esModule",{value:!0});var c=g(1),f=function(){function h(_){this._optionsService=_}return Object.defineProperty(h,"audioContext",{get:function(){if(!h._audioContext){var _=window.AudioContext||window.webkitAudioContext;if(!_)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;h._audioContext=new _}return h._audioContext},enumerable:!0,configurable:!0}),h.prototype.playBellSound=function(){var _=h.audioContext;if(_){var t=_.createBufferSource();_.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),function(r){t.buffer=r,t.connect(_.destination),t.start(0)})}},h.prototype._base64ToArrayBuffer=function(_){for(var t=window.atob(_),r=t.length,o=new Uint8Array(r),i=0;i<r;i++)o[i]=t.charCodeAt(i);return o.buffer},h.prototype._removeMimeType=function(_){return _.split(",")[1]},h=l([p(0,c.IOptionsService)],h)}();u.SoundService=f},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(i,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])})(i,n)},function(i,n){function e(){this.constructor=i}l(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)}),c=this&&this.__decorate||function(i,n,e,a){var s,d=arguments.length,y=d<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,e):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(i,n,e,a);else for(var S=i.length-1;S>=0;S--)(s=i[S])&&(y=(d<3?s(y):d>3?s(n,e,y):s(n,e))||y);return d>3&&y&&Object.defineProperty(n,e,y),y},f=this&&this.__param||function(i,n){return function(e,a){n(e,a,i)}};Object.defineProperty(u,"__esModule",{value:!0});var h=g(2),_=g(8),t=g(4),r=g(1),o=function(i){function n(e,a,s,d,y){var S=i.call(this)||this;return S._element=e,S._screenElement=a,S._bufferService=s,S._mouseService=d,S._selectionService=y,S._zones=[],S._areZonesActive=!1,S._lastHoverCoords=[void 0,void 0],S._initialSelectionLength=0,S.register(_.addDisposableDomListener(S._element,"mousedown",function(C){return S._onMouseDown(C)})),S._mouseMoveListener=function(C){return S._onMouseMove(C)},S._mouseLeaveListener=function(C){return S._onMouseLeave(C)},S._clickListener=function(C){return S._onClick(C)},S}return p(n,i),n.prototype.dispose=function(){i.prototype.dispose.call(this),this._deactivate()},n.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},n.prototype.clearAll=function(e,a){if(this._zones.length!==0){e&&a||(e=0,a=this._bufferService.rows-1);for(var s=0;s<this._zones.length;s++){var d=this._zones[s];(d.y1>e&&d.y1<=a+1||d.y2>e&&d.y2<=a+1||d.y1<e&&d.y2>a+1)&&(this._currentZone&&this._currentZone===d&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(s--,1))}this._zones.length===0&&this._deactivate()}},n.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},n.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},n.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},n.prototype._onHover=function(e){var a=this,s=this._findZoneEventAt(e);s!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),s&&(this._currentZone=s,s.hoverCallback&&s.hoverCallback(e),this._tooltipTimeout=setTimeout(function(){return a._onTooltip(e)},500)))},n.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var a=this._findZoneEventAt(e);a&&a.tooltipCallback&&a.tooltipCallback(e)},n.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var a=this._findZoneEventAt(e);a!=null&&a.willLinkActivate(e)&&(e.preventDefault(),e.stopImmediatePropagation())}},n.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},n.prototype._onClick=function(e){var a=this._findZoneEventAt(e),s=this._getSelectionLength();a&&s===this._initialSelectionLength&&(a.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},n.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},n.prototype._findZoneEventAt=function(e){var a=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(a)for(var s=a[0],d=a[1],y=0;y<this._zones.length;y++){var S=this._zones[y];if(S.y1===S.y2){if(d===S.y1&&s>=S.x1&&s<S.x2)return S}else if(d===S.y1&&s>=S.x1||d===S.y2&&s<S.x2||d>S.y1&&d<S.y2)return S}},c([f(2,r.IBufferService),f(3,t.IMouseService),f(4,t.ISelectionService)],n)}(h.Disposable);u.MouseZoneManager=o},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(i,n){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])})(i,n)},function(i,n){function e(){this.constructor=i}l(i,n),i.prototype=n===null?Object.create(n):(e.prototype=n.prototype,new e)});Object.defineProperty(u,"__esModule",{value:!0});var c=g(17),f=g(11),h=g(29),_=g(8),t=g(2),r=g(30),o=function(i){function n(e,a){var s=i.call(this)||this;s._terminal=e,s._renderService=a,s._liveRegionLineCount=0,s._charsToConsume=[],s._charsToAnnounce="",s._accessibilityTreeRoot=document.createElement("div"),s._accessibilityTreeRoot.classList.add("xterm-accessibility"),s._rowContainer=document.createElement("div"),s._rowContainer.classList.add("xterm-accessibility-tree"),s._rowContainer.setAttribute("role","list"),s._rowElements=[];for(var d=0;d<s._terminal.rows;d++)s._rowElements[d]=s._createAccessibilityTreeNode(),s._rowContainer.appendChild(s._rowElements[d]);return s._topBoundaryFocusListener=function(y){return s._onBoundaryFocus(y,0)},s._bottomBoundaryFocusListener=function(y){return s._onBoundaryFocus(y,1)},s._rowElements[0].addEventListener("focus",s._topBoundaryFocusListener),s._rowElements[s._rowElements.length-1].addEventListener("focus",s._bottomBoundaryFocusListener),s._refreshRowsDimensions(),s._accessibilityTreeRoot.appendChild(s._rowContainer),s._renderRowsDebouncer=new h.RenderDebouncer(s._renderRows.bind(s)),s._refreshRows(),s._liveRegion=document.createElement("div"),s._liveRegion.classList.add("live-region"),s._liveRegion.setAttribute("aria-live","assertive"),s._accessibilityTreeRoot.appendChild(s._liveRegion),s._terminal.element.insertAdjacentElement("afterbegin",s._accessibilityTreeRoot),s.register(s._renderRowsDebouncer),s.register(s._terminal.onResize(function(y){return s._onResize(y.rows)})),s.register(s._terminal.onRender(function(y){return s._refreshRows(y.start,y.end)})),s.register(s._terminal.onScroll(function(){return s._refreshRows()})),s.register(s._terminal.onA11yChar(function(y){return s._onChar(y)})),s.register(s._terminal.onLineFeed(function(){return s._onChar(`
`)})),s.register(s._terminal.onA11yTab(function(y){return s._onTab(y)})),s.register(s._terminal.onKey(function(y){return s._onKey(y.key)})),s.register(s._terminal.onBlur(function(){return s._clearLiveRegion()})),s.register(s._renderService.onDimensionsChange(function(){return s._refreshRowsDimensions()})),s._screenDprMonitor=new r.ScreenDprMonitor,s.register(s._screenDprMonitor),s._screenDprMonitor.setListener(function(){return s._refreshRowsDimensions()}),s.register(_.addDisposableDomListener(window,"resize",function(){return s._refreshRowsDimensions()})),s}return p(n,i),n.prototype.dispose=function(){i.prototype.dispose.call(this),this._terminal.element.removeChild(this._accessibilityTreeRoot),this._rowElements.length=0},n.prototype._onBoundaryFocus=function(e,a){var s=e.target,d=this._rowElements[a===0?1:this._rowElements.length-2];if(s.getAttribute("aria-posinset")!==(a===0?"1":""+this._terminal.buffer.lines.length)&&e.relatedTarget===d){var y,S;if(a===0?(y=s,S=this._rowElements.pop(),this._rowContainer.removeChild(S)):(y=this._rowElements.shift(),S=s,this._rowContainer.removeChild(y)),y.removeEventListener("focus",this._topBoundaryFocusListener),S.removeEventListener("focus",this._bottomBoundaryFocusListener),a===0){var C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else C=this._createAccessibilityTreeNode(),this._rowElements.push(C),this._rowContainer.appendChild(C);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(a===0?-1:1),this._rowElements[a===0?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}},n.prototype._onResize=function(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var a=this._rowContainer.children.length;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},n.prototype._createAccessibilityTreeNode=function(){var e=document.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e},n.prototype._onTab=function(e){for(var a=0;a<e;a++)this._onChar(" ")},n.prototype._onChar=function(e){var a=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,e===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=c.tooMuchOutput)),f.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){a._accessibilityTreeRoot.appendChild(a._liveRegion)},0))},n.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,f.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)},n.prototype._onKey=function(e){this._clearLiveRegion(),this._charsToConsume.push(e)},n.prototype._refreshRows=function(e,a){this._renderRowsDebouncer.refresh(e,a,this._terminal.rows)},n.prototype._renderRows=function(e,a){for(var s=this._terminal.buffer,d=s.lines.length.toString(),y=e;y<=a;y++){var S=s.translateBufferLineToString(s.ydisp+y,!0),C=(s.ydisp+y+1).toString(),A=this._rowElements[y];A&&(S.length===0?A.innerHTML="&nbsp;":A.textContent=S,A.setAttribute("aria-posinset",C),A.setAttribute("aria-setsize",d))}this._announceCharacters()},n.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}},n.prototype._refreshRowDimensions=function(e){e.style.height=this._renderService.dimensions.actualCellHeight+"px"},n.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},n}(t.Disposable);u.AccessibilityManager=o},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(s,d){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,S){y.__proto__=S}||function(y,S){for(var C in S)S.hasOwnProperty(C)&&(y[C]=S[C])})(s,d)},function(s,d){function y(){this.constructor=s}l(s,d),s.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}),c=this&&this.__decorate||function(s,d,y,S){var C,A=arguments.length,k=A<3?d:S===null?S=Object.getOwnPropertyDescriptor(d,y):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(s,d,y,S);else for(var I=s.length-1;I>=0;I--)(C=s[I])&&(k=(A<3?C(k):A>3?C(d,y,k):C(d,y))||k);return A>3&&k&&Object.defineProperty(d,y,k),k},f=this&&this.__param||function(s,d){return function(y,S){d(y,S,s)}};Object.defineProperty(u,"__esModule",{value:!0});var h=g(57),_=g(9),t=g(2),r=g(4),o=g(1),i=g(0),n=g(10),e=1,a=function(s){function d(y,S,C,A,k,I,O,b,v){var m=s.call(this)||this;return m._colors=y,m._element=S,m._screenElement=C,m._viewportElement=A,m._linkifier=k,m._linkifier2=I,m._charSizeService=O,m._optionsService=b,m._bufferService=v,m._terminalClass=e++,m._rowElements=[],m._onRequestRefreshRows=new i.EventEmitter,m._rowContainer=document.createElement("div"),m._rowContainer.classList.add("xterm-rows"),m._rowContainer.style.lineHeight="normal",m._rowContainer.setAttribute("aria-hidden","true"),m._refreshRowElements(m._bufferService.cols,m._bufferService.rows),m._selectionContainer=document.createElement("div"),m._selectionContainer.classList.add("xterm-selection"),m._selectionContainer.setAttribute("aria-hidden","true"),m.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},m._updateDimensions(),m._injectCss(),m._rowFactory=new h.DomRendererRowFactory(document,m._optionsService,m._colors),m._element.classList.add("xterm-dom-renderer-owner-"+m._terminalClass),m._screenElement.appendChild(m._rowContainer),m._screenElement.appendChild(m._selectionContainer),m._linkifier.onLinkHover(function(w){return m._onLinkHover(w)}),m._linkifier.onLinkLeave(function(w){return m._onLinkLeave(w)}),m._linkifier2.onLinkHover(function(w){return m._onLinkHover(w)}),m._linkifier2.onLinkLeave(function(w){return m._onLinkLeave(w)}),m}return p(d,s),Object.defineProperty(d.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!0,configurable:!0}),d.prototype.dispose=function(){this._element.classList.remove("xterm-dom-renderer-owner-"+this._terminalClass),this._screenElement.removeChild(this._rowContainer),this._screenElement.removeChild(this._selectionContainer),this._screenElement.removeChild(this._themeStyleElement),this._screenElement.removeChild(this._dimensionsStyleElement),s.prototype.dispose.call(this)},d.prototype._updateDimensions=function(){var y=this;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this._rowElements.forEach(function(C){C.style.width=y.dimensions.canvasWidth+"px",C.style.height=y.dimensions.actualCellHeight+"px",C.style.lineHeight=y.dimensions.actualCellHeight+"px",C.style.overflow="hidden"}),this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var S=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.innerHTML=S,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},d.prototype.setColors=function(y){this._colors=y,this._injectCss()},d.prototype._injectCss=function(){var y=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var S=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";S+=this._terminalSelector+" span:not(."+h.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+h.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+h.ITALIC_CLASS+" { font-style: italic;}",S+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",S+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",S+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+h.CURSOR_CLASS+"."+h.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+h.CURSOR_CLASS+"."+h.CURSOR_BLINK_CLASS+":not(."+h.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+h.CURSOR_CLASS+"."+h.CURSOR_BLINK_CLASS+"."+h.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+h.CURSOR_CLASS+"."+h.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+h.CURSOR_CLASS+"."+h.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+h.CURSOR_CLASS+"."+h.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",S+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selection.css+";}",this._colors.ansi.forEach(function(C,A){S+=y._terminalSelector+" .xterm-fg-"+A+" { color: "+C.css+"; }"+y._terminalSelector+" .xterm-bg-"+A+" { background-color: "+C.css+"; }"}),S+=this._terminalSelector+" .xterm-fg-"+_.INVERTED_DEFAULT_COLOR+" { color: "+n.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" .xterm-bg-"+_.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.innerHTML=S},d.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},d.prototype._refreshRowElements=function(y,S){for(var C=this._rowElements.length;C<=S;C++){var A=document.createElement("div");this._rowContainer.appendChild(A),this._rowElements.push(A)}for(;this._rowElements.length>S;)this._rowContainer.removeChild(this._rowElements.pop())},d.prototype.onResize=function(y,S){this._refreshRowElements(y,S),this._updateDimensions()},d.prototype.onCharSizeChanged=function(){this._updateDimensions()},d.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")},d.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")},d.prototype.onSelectionChanged=function(y,S,C){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(y&&S){var A=y[1]-this._bufferService.buffer.ydisp,k=S[1]-this._bufferService.buffer.ydisp,I=Math.max(A,0),O=Math.min(k,this._bufferService.rows-1);if(!(I>=this._bufferService.rows||O<0)){var b=document.createDocumentFragment();if(C)b.appendChild(this._createSelectionElement(I,y[0],S[0],O-I+1));else{var v=A===I?y[0]:0,m=I===O?S[0]:this._bufferService.cols;b.appendChild(this._createSelectionElement(I,v,m));var w=O-I-1;if(b.appendChild(this._createSelectionElement(I+1,0,this._bufferService.cols,w)),I!==O){var D=k===O?S[0]:this._bufferService.cols;b.appendChild(this._createSelectionElement(O,0,D))}}this._selectionContainer.appendChild(b)}}},d.prototype._createSelectionElement=function(y,S,C,A){A===void 0&&(A=1);var k=document.createElement("div");return k.style.height=A*this.dimensions.actualCellHeight+"px",k.style.top=y*this.dimensions.actualCellHeight+"px",k.style.left=S*this.dimensions.actualCellWidth+"px",k.style.width=this.dimensions.actualCellWidth*(C-S)+"px",k},d.prototype.onCursorMove=function(){},d.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},d.prototype.clear=function(){this._rowElements.forEach(function(y){return y.innerHTML=""})},d.prototype.renderRows=function(y,S){for(var C=this._bufferService.buffer.ybase+this._bufferService.buffer.y,A=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),k=this._optionsService.options.cursorBlink,I=y;I<=S;I++){var O=this._rowElements[I];O.innerHTML="";var b=I+this._bufferService.buffer.ydisp,v=this._bufferService.buffer.lines.get(b),m=this._optionsService.options.cursorStyle;O.appendChild(this._rowFactory.createRow(v,b===C,m,A,k,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(d.prototype,"_terminalSelector",{get:function(){return".xterm-dom-renderer-owner-"+this._terminalClass},enumerable:!0,configurable:!0}),d.prototype.registerCharacterJoiner=function(y){return-1},d.prototype.deregisterCharacterJoiner=function(y){return!1},d.prototype._onLinkHover=function(y){this._setCellUnderline(y.x1,y.x2,y.y1,y.y2,y.cols,!0)},d.prototype._onLinkLeave=function(y){this._setCellUnderline(y.x1,y.x2,y.y1,y.y2,y.cols,!1)},d.prototype._setCellUnderline=function(y,S,C,A,k,I){for(;y!==S||C!==A;){var O=this._rowElements[C];if(!O)return;var b=O.children[y];b&&(b.style.textDecoration=I?"underline":"none"),++y>=k&&(y=0,C++)}},c([f(6,r.ICharSizeService),f(7,o.IOptionsService),f(8,o.IBufferService)],d)}(t.Disposable);u.DomRenderer=a},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(9),p=g(3),c=g(5),f=g(10);u.BOLD_CLASS="xterm-bold",u.DIM_CLASS="xterm-dim",u.ITALIC_CLASS="xterm-italic",u.UNDERLINE_CLASS="xterm-underline",u.CURSOR_CLASS="xterm-cursor",u.CURSOR_BLINK_CLASS="xterm-cursor-blink",u.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",u.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",u.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var h=function(){function t(r,o,i){this._document=r,this._optionsService=o,this._colors=i,this._workCell=new c.CellData}return t.prototype.setColors=function(r){this._colors=r},t.prototype.createRow=function(r,o,i,n,e,a,s){for(var d=this._document.createDocumentFragment(),y=0,S=Math.min(r.length,s)-1;S>=0;S--)if(r.loadCell(S,this._workCell).getCode()!==p.NULL_CELL_CODE||o&&S===n){y=S+1;break}for(S=0;S<y;S++){r.loadCell(S,this._workCell);var C=this._workCell.getWidth();if(C!==0){var A=this._document.createElement("span");if(C>1&&(A.style.width=a*C+"px"),o&&S===n)switch(A.classList.add(u.CURSOR_CLASS),e&&A.classList.add(u.CURSOR_BLINK_CLASS),i){case"bar":A.classList.add(u.CURSOR_STYLE_BAR_CLASS);break;case"underline":A.classList.add(u.CURSOR_STYLE_UNDERLINE_CLASS);break;default:A.classList.add(u.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&A.classList.add(u.BOLD_CLASS),this._workCell.isItalic()&&A.classList.add(u.ITALIC_CLASS),this._workCell.isDim()&&A.classList.add(u.DIM_CLASS),this._workCell.isUnderline()&&A.classList.add(u.UNDERLINE_CLASS),this._workCell.isInvisible()?A.textContent=p.WHITESPACE_CELL_CHAR:A.textContent=this._workCell.getChars()||p.WHITESPACE_CELL_CHAR;var k=this._workCell.getFgColor(),I=this._workCell.getFgColorMode(),O=this._workCell.getBgColor(),b=this._workCell.getBgColorMode(),v=!!this._workCell.isInverse();if(v){var m=k;k=O,O=m;var w=I;I=b,b=w}switch(I){case 16777216:case 33554432:this._workCell.isBold()&&k<8&&this._optionsService.options.drawBoldTextInBrightColors&&(k+=8),this._applyMinimumContrast(A,this._colors.background,this._colors.ansi[k])||A.classList.add("xterm-fg-"+k);break;case 50331648:var D=f.rgba.toColor(k>>16&255,k>>8&255,255&k);this._applyMinimumContrast(A,this._colors.background,D)||this._addStyle(A,"color:#"+_(k.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(A,this._colors.background,this._colors.foreground)||v&&A.classList.add("xterm-fg-"+l.INVERTED_DEFAULT_COLOR)}switch(b){case 16777216:case 33554432:A.classList.add("xterm-bg-"+O);break;case 50331648:this._addStyle(A,"background-color:#"+_(O.toString(16),"0",6));break;case 0:default:v&&A.classList.add("xterm-bg-"+l.INVERTED_DEFAULT_COLOR)}d.appendChild(A)}}return d},t.prototype._applyMinimumContrast=function(r,o,i){if(this._optionsService.options.minimumContrastRatio===1)return!1;var n=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return n===void 0&&(n=f.color.ensureContrastRatio(o,i,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,n!=null?n:null)),!!n&&(this._addStyle(r,"color:"+n.css),!0)},t.prototype._addStyle=function(r,o){r.setAttribute("style",""+(r.getAttribute("style")||"")+o+";")},t}();function _(t,r,o){for(;t.length<o;)t=r+t;return t}u.DomRendererRowFactory=h},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(12),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};u.evaluateKeyboardEvent=function(c,f,h,_){var t={type:0,cancel:!1,key:void 0},r=(c.shiftKey?1:0)|(c.altKey?2:0)|(c.ctrlKey?4:0)|(c.metaKey?8:0);switch(c.keyCode){case 0:c.key==="UIKeyInputUpArrow"?t.key=f?l.C0.ESC+"OA":l.C0.ESC+"[A":c.key==="UIKeyInputLeftArrow"?t.key=f?l.C0.ESC+"OD":l.C0.ESC+"[D":c.key==="UIKeyInputRightArrow"?t.key=f?l.C0.ESC+"OC":l.C0.ESC+"[C":c.key==="UIKeyInputDownArrow"&&(t.key=f?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(c.shiftKey){t.key=l.C0.BS;break}if(c.altKey){t.key=l.C0.ESC+l.C0.DEL;break}t.key=l.C0.DEL;break;case 9:if(c.shiftKey){t.key=l.C0.ESC+"[Z";break}t.key=l.C0.HT,t.cancel=!0;break;case 13:t.key=l.C0.CR,t.cancel=!0;break;case 27:t.key=l.C0.ESC,t.cancel=!0;break;case 37:if(c.metaKey)break;r?(t.key=l.C0.ESC+"[1;"+(r+1)+"D",t.key===l.C0.ESC+"[1;3D"&&(t.key=l.C0.ESC+(h?"b":"[1;5D"))):t.key=f?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(c.metaKey)break;r?(t.key=l.C0.ESC+"[1;"+(r+1)+"C",t.key===l.C0.ESC+"[1;3C"&&(t.key=l.C0.ESC+(h?"f":"[1;5C"))):t.key=f?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(c.metaKey)break;r?(t.key=l.C0.ESC+"[1;"+(r+1)+"A",h||t.key!==l.C0.ESC+"[1;3A"||(t.key=l.C0.ESC+"[1;5A")):t.key=f?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(c.metaKey)break;r?(t.key=l.C0.ESC+"[1;"+(r+1)+"B",h||t.key!==l.C0.ESC+"[1;3B"||(t.key=l.C0.ESC+"[1;5B")):t.key=f?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:c.shiftKey||c.ctrlKey||(t.key=l.C0.ESC+"[2~");break;case 46:t.key=r?l.C0.ESC+"[3;"+(r+1)+"~":l.C0.ESC+"[3~";break;case 36:t.key=r?l.C0.ESC+"[1;"+(r+1)+"H":f?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:t.key=r?l.C0.ESC+"[1;"+(r+1)+"F":f?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:c.shiftKey?t.type=2:t.key=l.C0.ESC+"[5~";break;case 34:c.shiftKey?t.type=3:t.key=l.C0.ESC+"[6~";break;case 112:t.key=r?l.C0.ESC+"[1;"+(r+1)+"P":l.C0.ESC+"OP";break;case 113:t.key=r?l.C0.ESC+"[1;"+(r+1)+"Q":l.C0.ESC+"OQ";break;case 114:t.key=r?l.C0.ESC+"[1;"+(r+1)+"R":l.C0.ESC+"OR";break;case 115:t.key=r?l.C0.ESC+"[1;"+(r+1)+"S":l.C0.ESC+"OS";break;case 116:t.key=r?l.C0.ESC+"[15;"+(r+1)+"~":l.C0.ESC+"[15~";break;case 117:t.key=r?l.C0.ESC+"[17;"+(r+1)+"~":l.C0.ESC+"[17~";break;case 118:t.key=r?l.C0.ESC+"[18;"+(r+1)+"~":l.C0.ESC+"[18~";break;case 119:t.key=r?l.C0.ESC+"[19;"+(r+1)+"~":l.C0.ESC+"[19~";break;case 120:t.key=r?l.C0.ESC+"[20;"+(r+1)+"~":l.C0.ESC+"[20~";break;case 121:t.key=r?l.C0.ESC+"[21;"+(r+1)+"~":l.C0.ESC+"[21~";break;case 122:t.key=r?l.C0.ESC+"[23;"+(r+1)+"~":l.C0.ESC+"[23~";break;case 123:t.key=r?l.C0.ESC+"[24;"+(r+1)+"~":l.C0.ESC+"[24~";break;default:if(!c.ctrlKey||c.shiftKey||c.altKey||c.metaKey)if(h&&!_||!c.altKey||c.metaKey)h&&!c.altKey&&!c.ctrlKey&&c.metaKey?c.keyCode===65&&(t.type=1):c.key&&!c.ctrlKey&&!c.altKey&&!c.metaKey&&c.keyCode>=48&&c.key.length===1?t.key=c.key:c.key&&c.ctrlKey&&c.key==="_"&&(t.key=l.C0.US);else{var o=p[c.keyCode],i=o&&o[c.shiftKey?1:0];if(i)t.key=l.C0.ESC+i;else if(c.keyCode>=65&&c.keyCode<=90){var n=c.ctrlKey?c.keyCode-64:c.keyCode+32;t.key=l.C0.ESC+String.fromCharCode(n)}}else c.keyCode>=65&&c.keyCode<=90?t.key=String.fromCharCode(c.keyCode-64):c.keyCode===32?t.key=l.C0.NUL:c.keyCode>=51&&c.keyCode<=55?t.key=String.fromCharCode(c.keyCode-51+27):c.keyCode===56?t.key=l.C0.DEL:c.keyCode===219?t.key=l.C0.ESC:c.keyCode===220?t.key=l.C0.FS:c.keyCode===221&&(t.key=l.C0.GS)}return t}},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(3);u.updateWindowsModeWrappedState=function(p){var c=p.buffer.lines.get(p.buffer.ybase+p.buffer.y-1),f=c==null?void 0:c.get(p.cols-1),h=p.buffer.lines.get(p.buffer.ybase+p.buffer.y);h&&f&&(h.isWrapped=f[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&f[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(a,s){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,y){d.__proto__=y}||function(d,y){for(var S in y)y.hasOwnProperty(S)&&(d[S]=y[S])})(a,s)},function(a,s){function d(){this.constructor=a}l(a,s),a.prototype=s===null?Object.create(s):(d.prototype=s.prototype,new d)}),c=this&&this.__decorate||function(a,s,d,y){var S,C=arguments.length,A=C<3?s:y===null?y=Object.getOwnPropertyDescriptor(s,d):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(a,s,d,y);else for(var k=a.length-1;k>=0;k--)(S=a[k])&&(A=(C<3?S(A):C>3?S(s,d,A):S(s,d))||A);return C>3&&A&&Object.defineProperty(s,d,A),A},f=this&&this.__param||function(a,s){return function(d,y){s(d,y,a)}};Object.defineProperty(u,"__esModule",{value:!0});var h=g(29),_=g(0),t=g(2),r=g(30),o=g(8),i=g(1),n=g(4),e=function(a){function s(d,y,S,C,A){var k=a.call(this)||this;if(k._renderer=d,k._rowCount=y,k.screenElement=S,k.optionsService=C,k.charSizeService=A,k._isPaused=!1,k._needsFullRefresh=!1,k._canvasWidth=0,k._canvasHeight=0,k._onDimensionsChange=new _.EventEmitter,k._onRender=new _.EventEmitter,k._onRefreshRequest=new _.EventEmitter,k._renderDebouncer=new h.RenderDebouncer(function(O,b){return k._renderRows(O,b)}),k.register(k._renderDebouncer),k._screenDprMonitor=new r.ScreenDprMonitor,k._screenDprMonitor.setListener(function(){return k.onDevicePixelRatioChange()}),k.register(k._screenDprMonitor),k.register(C.onOptionChange(function(){return k._renderer.onOptionsChanged()})),k.register(A.onCharSizeChange(function(){return k.onCharSizeChanged()})),k._renderer.onRequestRefreshRows(function(O){return k.refreshRows(O.start,O.end)}),k.register(o.addDisposableDomListener(window,"resize",function(){return k.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var I=new IntersectionObserver(function(O){return k._onIntersectionChange(O[O.length-1])},{threshold:0});I.observe(S),k.register({dispose:function(){return I.disconnect()}})}return k}return p(s,a),Object.defineProperty(s.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!0,configurable:!0}),s.prototype._onIntersectionChange=function(d){this._isPaused=d.intersectionRatio===0,!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},s.prototype.refreshRows=function(d,y){this._isPaused?this._needsFullRefresh=!0:this._renderDebouncer.refresh(d,y,this._rowCount)},s.prototype._renderRows=function(d,y){this._renderer.renderRows(d,y),this._onRender.fire({start:d,end:y})},s.prototype.resize=function(d,y){this._rowCount=y,this._fireOnCanvasResize()},s.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},s.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},s.prototype.dispose=function(){this._renderer.dispose(),a.prototype.dispose.call(this)},s.prototype.setRenderer=function(d){var y=this;this._renderer.dispose(),this._renderer=d,this._renderer.onRequestRefreshRows(function(S){return y.refreshRows(S.start,S.end)}),this.refreshRows(0,this._rowCount-1)},s.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},s.prototype.setColors=function(d){this._renderer.setColors(d),this._fullRefresh()},s.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},s.prototype.onResize=function(d,y){this._renderer.onResize(d,y),this._fullRefresh()},s.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},s.prototype.onBlur=function(){this._renderer.onBlur()},s.prototype.onFocus=function(){this._renderer.onFocus()},s.prototype.onSelectionChanged=function(d,y,S){this._renderer.onSelectionChanged(d,y,S)},s.prototype.onCursorMove=function(){this._renderer.onCursorMove()},s.prototype.clear=function(){this._renderer.clear()},s.prototype.registerCharacterJoiner=function(d){return this._renderer.registerCharacterJoiner(d)},s.prototype.deregisterCharacterJoiner=function(d){return this._renderer.deregisterCharacterJoiner(d)},c([f(3,i.IOptionsService),f(4,n.ICharSizeService)],s)}(t.Disposable);u.RenderService=e},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(0),p=g(11),c=g(31);u.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",u.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:u.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",convertEol:!1,termName:"xterm",cancelEvents:!1});var f=["cols","rows"],h=function(){function _(t){var r=this;this._onOptionChange=new l.EventEmitter,this.options=c.clone(u.DEFAULT_OPTIONS),Object.keys(t).forEach(function(o){if(o in r.options){var i=t[o];r.options[o]=i}})}return Object.defineProperty(_.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!0,configurable:!0}),_.prototype.setOption=function(t,r){if(!(t in u.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');if(f.indexOf(t)!==-1)throw new Error('Option "'+t+'" can only be set in the constructor');this.options[t]!==r&&(r=this._sanitizeAndValidateOption(t,r),this.options[t]!==r&&(this.options[t]=r,this._onOptionChange.fire(t)))},_.prototype._sanitizeAndValidateOption=function(t,r){switch(t){case"bellStyle":case"cursorStyle":case"fontWeight":case"fontWeightBold":case"rendererType":case"wordSeparator":r||(r=u.DEFAULT_OPTIONS[t]);break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(t+" cannot be less than 1, value: "+r);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(t+" cannot be less than 0, value: "+r);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(t+" cannot be less than or equal to 0, value: "+r)}return r},_.prototype.getOption=function(t){if(!(t in u.DEFAULT_OPTIONS))throw new Error('No option with key "'+t+'"');return this.options[t]},_}();u.OptionsService=h},function(E,u,g){"use strict";var l=this&&this.__decorate||function(t,r,o,i){var n,e=arguments.length,a=e<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,o):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(e<3?n(a):e>3?n(r,o,a):n(r,o))||a);return e>3&&a&&Object.defineProperty(r,o,a),a},p=this&&this.__param||function(t,r){return function(o,i){r(o,i,t)}};Object.defineProperty(u,"__esModule",{value:!0});var c=g(1),f=g(0),h=function(){function t(r,o,i){this.document=r,this.parentElement=o,this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=new f.EventEmitter,this._measureStrategy=new _(r,o,this._optionsService)}return Object.defineProperty(t.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!0,configurable:!0}),t.prototype.measure=function(){var r=this._measureStrategy.measure();r.width===this.width&&r.height===this.height||(this.width=r.width,this.height=r.height,this._onCharSizeChange.fire())},l([p(2,c.IOptionsService)],t)}();u.CharSizeService=h;var _=function(){function t(r,o,i){this._document=r,this._parentElement=o,this._optionsService=i,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return t.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var r=this._measureElement.getBoundingClientRect();return r.width!==0&&r.height!==0&&(this._result.width=r.width,this._result.height=Math.ceil(r.height)),this._result},t}()},function(E,u,g){"use strict";var l=this&&this.__decorate||function(_,t,r,o){var i,n=arguments.length,e=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(_,t,r,o);else for(var a=_.length-1;a>=0;a--)(i=_[a])&&(e=(n<3?i(e):n>3?i(t,r,e):i(t,r))||e);return n>3&&e&&Object.defineProperty(t,r,e),e},p=this&&this.__param||function(_,t){return function(r,o){t(r,o,_)}};Object.defineProperty(u,"__esModule",{value:!0});var c=g(1),f=g(64);u.MINIMUM_COLS=2,u.MINIMUM_ROWS=1;var h=function(){function _(t){this._optionsService=t,this.cols=Math.max(t.options.cols,u.MINIMUM_COLS),this.rows=Math.max(t.options.rows,u.MINIMUM_ROWS),this.buffers=new f.BufferSet(t,this)}return Object.defineProperty(_.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0}),_.prototype.resize=function(t,r){this.cols=t,this.rows=r},_.prototype.reset=function(){this.buffers=new f.BufferSet(this._optionsService,this)},l([p(0,c.IOptionsService)],_)}();u.BufferService=h},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(65),p=g(0),c=function(){function f(h,_){this.optionsService=h,this.bufferService=_,this._onBufferActivate=new p.EventEmitter,this._normal=new l.Buffer(!0,h,_),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,h,_),this._activeBuffer=this._normal,this.setupTabStops()}return Object.defineProperty(f.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"normal",{get:function(){return this._normal},enumerable:!0,configurable:!0}),f.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},f.prototype.activateAltBuffer=function(h){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(h),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},f.prototype.resize=function(h,_){this._normal.resize(h,_),this._alt.resize(h,_)},f.prototype.setupTabStops=function(h){this._normal.setupTabStops(h),this._alt.setupTabStops(h)},f}();u.BufferSet=c},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(66),p=g(16),c=g(5),f=g(3),h=g(67),_=g(68),t=g(18);u.MAX_BUFFER_SIZE=4294967295;var r=function(){function i(n,e,a){this._hasScrollback=n,this._optionsService=e,this._bufferService=a,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=t.DEFAULT_CHARSET,this.markers=[],this._nullCell=c.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),this._whitespaceCell=c.CellData.fromCharData([0,f.WHITESPACE_CELL_CHAR,f.WHITESPACE_CELL_WIDTH,f.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return i.prototype.getNullCell=function(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg):(this._nullCell.fg=0,this._nullCell.bg=0),this._nullCell},i.prototype.getWhitespaceCell=function(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0),this._whitespaceCell},i.prototype.getBlankLine=function(n,e){return new p.BufferLine(this._bufferService.cols,this.getNullCell(n),e)},Object.defineProperty(i.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isCursorInViewport",{get:function(){var n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows},enumerable:!0,configurable:!0}),i.prototype._getCorrectBufferLength=function(n){if(!this._hasScrollback)return n;var e=n+this._optionsService.options.scrollback;return e>u.MAX_BUFFER_SIZE?u.MAX_BUFFER_SIZE:e},i.prototype.fillViewportRows=function(n){if(this.lines.length===0){n===void 0&&(n=p.DEFAULT_ATTR_DATA);for(var e=this._rows;e--;)this.lines.push(this.getBlankLine(n))}},i.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},i.prototype.resize=function(n,e){var a=this.getNullCell(p.DEFAULT_ATTR_DATA),s=this._getCorrectBufferLength(e);if(s>this.lines.maxLength&&(this.lines.maxLength=s),this.lines.length>0){if(this._cols<n)for(var d=0;d<this.lines.length;d++)this.lines.get(d).resize(n,a);var y=0;if(this._rows<e)for(var S=this._rows;S<e;S++)this.lines.length<e+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new p.BufferLine(n,a)):this.ybase>0&&this.lines.length<=this.ybase+this.y+y+1?(this.ybase--,y++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(n,a)));else for(S=this._rows;S>e;S--)this.lines.length>e+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(s<this.lines.maxLength){var C=this.lines.length-s;C>0&&(this.lines.trimStart(C),this.ybase=Math.max(this.ybase-C,0),this.ydisp=Math.max(this.ydisp-C,0),this.savedY=Math.max(this.savedY-C,0)),this.lines.maxLength=s}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,e-1),y&&(this.y+=y),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=e-1,this._isReflowEnabled&&(this._reflow(n,e),this._cols>n))for(d=0;d<this.lines.length;d++)this.lines.get(d).resize(n,a);this._cols=n,this._rows=e},Object.defineProperty(i.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!0,configurable:!0}),i.prototype._reflow=function(n,e){this._cols!==n&&(n>this._cols?this._reflowLarger(n,e):this._reflowSmaller(n,e))},i.prototype._reflowLarger=function(n,e){var a=h.reflowLargerGetLinesToRemove(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(a.length>0){var s=h.reflowLargerCreateNewLayout(this.lines,a);h.reflowLargerApplyNewLayout(this.lines,s.layout),this._reflowLargerAdjustViewport(n,e,s.countRemoved)}},i.prototype._reflowLargerAdjustViewport=function(n,e,a){for(var s=this.getNullCell(p.DEFAULT_ATTR_DATA),d=a;d-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<e&&this.lines.push(new p.BufferLine(n,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-a,0)},i.prototype._reflowSmaller=function(n,e){for(var a=this.getNullCell(p.DEFAULT_ATTR_DATA),s=[],d=0,y=this.lines.length-1;y>=0;y--){var S=this.lines.get(y);if(!(!S||!S.isWrapped&&S.getTrimmedLength()<=n)){for(var C=[S];S.isWrapped&&y>0;)S=this.lines.get(--y),C.unshift(S);var A=this.ybase+this.y;if(!(A>=y&&A<y+C.length)){var k,I=C[C.length-1].getTrimmedLength(),O=h.reflowSmallerGetNewLineLengths(C,this._cols,n),b=O.length-C.length;k=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+b):Math.max(0,this.lines.length-this.lines.maxLength+b);for(var v=[],m=0;m<b;m++){var w=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);v.push(w)}v.length>0&&(s.push({start:y+C.length+d,newLines:v}),d+=v.length),C.push.apply(C,v);var D=O.length-1,T=O[D];T===0&&(T=O[--D]);for(var F=C.length-b-1,N=I;F>=0;){var V=Math.min(N,T);if(C[D].copyCellsFrom(C[F],N-V,T-V,V,!0),(T-=V)==0&&(T=O[--D]),(N-=V)==0){F--;var Z=Math.max(F,0);N=h.getWrappedLineTrimmedLength(C,Z,this._cols)}}for(m=0;m<C.length;m++)O[m]<n&&C[m].setCell(O[m],a);for(var K=b-k;K-- >0;)this.ybase===0?this.y<e-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+d)-e&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+b,this.ybase+e-1)}}}if(s.length>0){var R=[],Y=[];for(m=0;m<this.lines.length;m++)Y.push(this.lines.get(m));var j=this.lines.length,W=j-1,B=0,Q=s[B];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+d);var X=0;for(m=Math.min(this.lines.maxLength-1,j+d-1);m>=0;m--)if(Q&&Q.start>W+X){for(var te=Q.newLines.length-1;te>=0;te--)this.lines.set(m--,Q.newLines[te]);m++,R.push({index:W+1,amount:Q.newLines.length}),X+=Q.newLines.length,Q=s[++B]}else this.lines.set(m,Y[W--]);var ae=0;for(m=R.length-1;m>=0;m--)R[m].index+=ae,this.lines.onInsertEmitter.fire(R[m]),ae+=R[m].amount;var oe=Math.max(0,j+d-this.lines.maxLength);oe>0&&this.lines.onTrimEmitter.fire(oe)}},i.prototype.stringIndexToBufferIndex=function(n,e,a){for(a===void 0&&(a=!1);e;){var s=this.lines.get(n);if(!s)return[-1,-1];for(var d=a?s.getTrimmedLength():s.length,y=0;y<d;++y)if(s.get(y)[f.CHAR_DATA_WIDTH_INDEX]&&(e-=s.get(y)[f.CHAR_DATA_CHAR_INDEX].length||1),e<0)return[n,y];n++}return[n,0]},i.prototype.translateBufferLineToString=function(n,e,a,s){a===void 0&&(a=0);var d=this.lines.get(n);return d?d.translateToString(e,a,s):""},i.prototype.getWrappedRangeForLine=function(n){for(var e=n,a=n;e>0&&this.lines.get(e).isWrapped;)e--;for(;a+1<this.lines.length&&this.lines.get(a+1).isWrapped;)a++;return{first:e,last:a}},i.prototype.setupTabStops=function(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.options.tabStopWidth)this.tabs[n]=!0},i.prototype.prevStop=function(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n},i.prototype.nextStop=function(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n},i.prototype.addMarker=function(n){var e=this,a=new _.Marker(n);return this.markers.push(a),a.register(this.lines.onTrim(function(s){a.line-=s,a.line<0&&a.dispose()})),a.register(this.lines.onInsert(function(s){a.line>=s.index&&(a.line+=s.amount)})),a.register(this.lines.onDelete(function(s){a.line>=s.index&&a.line<s.index+s.amount&&a.dispose(),a.line>s.index&&(a.line-=s.amount)})),a.register(a.onDispose(function(){return e._removeMarker(a)})),a},i.prototype._removeMarker=function(n){this.markers.splice(this.markers.indexOf(n),1)},i.prototype.iterator=function(n,e,a,s,d){return new o(this,n,e,a,s,d)},i}();u.Buffer=r;var o=function(){function i(n,e,a,s,d,y){a===void 0&&(a=0),s===void 0&&(s=n.lines.length),d===void 0&&(d=0),y===void 0&&(y=0),this._buffer=n,this._trimRight=e,this._startIndex=a,this._endIndex=s,this._startOverscan=d,this._endOverscan=y,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return i.prototype.hasNext=function(){return this._current<this._endIndex},i.prototype.next=function(){var n=this._buffer.getWrappedRangeForLine(this._current);n.first<this._startIndex-this._startOverscan&&(n.first=this._startIndex-this._startOverscan),n.last>this._endIndex+this._endOverscan&&(n.last=this._endIndex+this._endOverscan),n.first=Math.max(n.first,0),n.last=Math.min(n.last,this._buffer.lines.length);for(var e="",a=n.first;a<=n.last;++a)e+=this._buffer.translateBufferLineToString(a,this._trimRight);return this._current=n.last+1,{range:n,content:e}},i}();u.BufferStringIterator=o},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(0),p=function(){function c(f){this._maxLength=f,this.onDeleteEmitter=new l.EventEmitter,this.onInsertEmitter=new l.EventEmitter,this.onTrimEmitter=new l.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(c.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"maxLength",{get:function(){return this._maxLength},set:function(f){if(this._maxLength!==f){for(var h=new Array(f),_=0;_<Math.min(f,this.length);_++)h[_]=this._array[this._getCyclicIndex(_)];this._array=h,this._maxLength=f,this._startIndex=0}},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"length",{get:function(){return this._length},set:function(f){if(f>this._length)for(var h=this._length;h<f;h++)this._array[h]=void 0;this._length=f},enumerable:!0,configurable:!0}),c.prototype.get=function(f){return this._array[this._getCyclicIndex(f)]},c.prototype.set=function(f,h){this._array[this._getCyclicIndex(f)]=h},c.prototype.push=function(f){this._array[this._getCyclicIndex(this._length)]=f,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},c.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(c.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!0,configurable:!0}),c.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},c.prototype.splice=function(f,h){for(var _=[],t=2;t<arguments.length;t++)_[t-2]=arguments[t];if(h){for(var r=f;r<this._length-h;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+h)];this._length-=h}for(r=this._length-1;r>=f;r--)this._array[this._getCyclicIndex(r+_.length)]=this._array[this._getCyclicIndex(r)];for(r=0;r<_.length;r++)this._array[this._getCyclicIndex(f+r)]=_[r];if(this._length+_.length>this._maxLength){var o=this._length+_.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=_.length},c.prototype.trimStart=function(f){f>this._length&&(f=this._length),this._startIndex+=f,this._length-=f,this.onTrimEmitter.fire(f)},c.prototype.shiftElements=function(f,h,_){if(!(h<=0)){if(f<0||f>=this._length)throw new Error("start argument out of range");if(f+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(var t=h-1;t>=0;t--)this.set(f+t+_,this.get(f+t));var r=f+h+_-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(t=0;t<h;t++)this.set(f+t+_,this.get(f+t))}},c.prototype._getCyclicIndex=function(f){return(this._startIndex+f)%this._maxLength},c}();u.CircularList=p},function(E,u,g){"use strict";function l(p,c,f){if(c===p.length-1)return p[c].getTrimmedLength();var h=!p[c].hasContent(f-1)&&p[c].getWidth(f-1)===1,_=p[c+1].getWidth(0)===2;return h&&_?f-1:f}Object.defineProperty(u,"__esModule",{value:!0}),u.reflowLargerGetLinesToRemove=function(p,c,f,h,_){for(var t=[],r=0;r<p.length-1;r++){var o=r,i=p.get(++o);if(i.isWrapped){for(var n=[p.get(r)];o<p.length&&i.isWrapped;)n.push(i),i=p.get(++o);if(h>=r&&h<o)r+=n.length-1;else{for(var e=0,a=l(n,e,c),s=1,d=0;s<n.length;){var y=l(n,s,c),S=y-d,C=f-a,A=Math.min(S,C);n[e].copyCellsFrom(n[s],d,a,A,!1),(a+=A)===f&&(e++,a=0),(d+=A)===y&&(s++,d=0),a===0&&e!==0&&n[e-1].getWidth(f-1)===2&&(n[e].copyCellsFrom(n[e-1],f-1,a++,1,!1),n[e-1].setCell(f-1,_))}n[e].replaceCells(a,f,_);for(var k=0,I=n.length-1;I>0&&(I>e||n[I].getTrimmedLength()===0);I--)k++;k>0&&(t.push(r+n.length-k),t.push(k)),r+=n.length-1}}}return t},u.reflowLargerCreateNewLayout=function(p,c){for(var f=[],h=0,_=c[h],t=0,r=0;r<p.length;r++)if(_===r){var o=c[++h];p.onDeleteEmitter.fire({index:r-t,amount:o}),r+=o-1,t+=o,_=c[++h]}else f.push(r);return{layout:f,countRemoved:t}},u.reflowLargerApplyNewLayout=function(p,c){for(var f=[],h=0;h<c.length;h++)f.push(p.get(c[h]));for(h=0;h<f.length;h++)p.set(h,f[h]);p.length=c.length},u.reflowSmallerGetNewLineLengths=function(p,c,f){for(var h=[],_=p.map(function(a,s){return l(p,s,c)}).reduce(function(a,s){return a+s}),t=0,r=0,o=0;o<_;){if(_-o<f){h.push(_-o);break}t+=f;var i=l(p,r,c);t>i&&(t-=i,r++);var n=p[r].getWidth(t-1)===2;n&&t--;var e=n?f-1:f;h.push(e),o+=e}return h},u.getWrappedLineTrimmedLength=l},function(E,u,g){"use strict";var l,p=this&&this.__extends||(l=function(h,_){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(h,_)},function(h,_){function t(){this.constructor=h}l(h,_),h.prototype=_===null?Object.create(_):(t.prototype=_.prototype,new t)});Object.defineProperty(u,"__esModule",{value:!0});var c=g(0),f=function(h){function _(t){var r=h.call(this)||this;return r.line=t,r._id=_._nextId++,r.isDisposed=!1,r._onDispose=new c.EventEmitter,r}return p(_,h),Object.defineProperty(_.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!0,configurable:!0}),_.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire())},_._nextId=1,_}(g(2).Disposable);u.Marker=f},function(E,u,g){"use strict";var l=this&&this.__decorate||function(_,t,r,o){var i,n=arguments.length,e=n<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,r):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(_,t,r,o);else for(var a=_.length-1;a>=0;a--)(i=_[a])&&(e=(n<3?i(e):n>3?i(t,r,e):i(t,r))||e);return n>3&&e&&Object.defineProperty(t,r,e),e},p=this&&this.__param||function(_,t){return function(r,o){t(r,o,_)}};Object.defineProperty(u,"__esModule",{value:!0});var c=g(4),f=g(28),h=function(){function _(t,r){this._renderService=t,this._charSizeService=r}return _.prototype.getCoords=function(t,r,o,i,n){return f.getCoords(t,r,o,i,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,n)},_.prototype.getRawByteCoords=function(t,r,o,i){var n=this.getCoords(t,r,o,i);return f.getRawByteCoords(n)},l([p(0,c.IRenderService),p(1,c.ICharSizeService)],_)}();u.MouseService=h},function(E,u,g){"use strict";var l=this&&this.__decorate||function(r,o,i,n){var e,a=arguments.length,s=a<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,o,i,n);else for(var d=r.length-1;d>=0;d--)(e=r[d])&&(s=(a<3?e(s):a>3?e(o,i,s):e(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},p=this&&this.__param||function(r,o){return function(i,n){o(i,n,r)}};Object.defineProperty(u,"__esModule",{value:!0});var c=g(1),f=g(0),h=g(31),_=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,origin:!1,wraparound:!0}),t=function(){function r(o,i,n,e){this._scrollToBottom=o,this._bufferService=i,this._logService=n,this._optionsService=e,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=new f.EventEmitter,this._onUserInput=new f.EventEmitter,this._onBinary=new f.EventEmitter,this.decPrivateModes=h.clone(_)}return Object.defineProperty(r.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!0,configurable:!0}),r.prototype.reset=function(){this.decPrivateModes=h.clone(_)},r.prototype.triggerDataEvent=function(o,i){if(i===void 0&&(i=!1),!this._optionsService.options.disableStdin){var n=this._bufferService.buffer;n.ybase!==n.ydisp&&this._scrollToBottom(),i&&this._onUserInput.fire(),this._logService.debug('sending data "'+o+'"',function(){return o.split("").map(function(e){return e.charCodeAt(0)})}),this._onData.fire(o)}},r.prototype.triggerBinaryEvent=function(o){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+o+'"',function(){return o.split("").map(function(i){return i.charCodeAt(0)})}),this._onBinary.fire(o))},l([p(1,c.IBufferService),p(2,c.ILogService),p(3,c.IOptionsService)],r)}();u.CoreService=t},function(E,u,g){"use strict";var l=this&&this.__decorate||function(r,o,i,n){var e,a=arguments.length,s=a<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,o,i,n);else for(var d=r.length-1;d>=0;d--)(e=r[d])&&(s=(a<3?e(s):a>3?e(o,i,s):e(o,i))||s);return a>3&&s&&Object.defineProperty(o,i,s),s},p=this&&this.__param||function(r,o){return function(i,n){o(i,n,r)}},c=this&&this.__spreadArrays||function(){for(var r=0,o=0,i=arguments.length;o<i;o++)r+=arguments[o].length;var n=Array(r),e=0;for(o=0;o<i;o++)for(var a=arguments[o],s=0,d=a.length;s<d;s++,e++)n[e]=a[s];return n};Object.defineProperty(u,"__esModule",{value:!0});var f,h=g(1);(function(r){r[r.DEBUG=0]="DEBUG",r[r.INFO=1]="INFO",r[r.WARN=2]="WARN",r[r.ERROR=3]="ERROR",r[r.OFF=4]="OFF"})(f=u.LogLevel||(u.LogLevel={}));var _={debug:f.DEBUG,info:f.INFO,warn:f.WARN,error:f.ERROR,off:f.OFF},t=function(){function r(o){var i=this;this._optionsService=o,this._updateLogLevel(),this._optionsService.onOptionChange(function(n){n==="logLevel"&&i._updateLogLevel()})}return r.prototype._updateLogLevel=function(){this._logLevel=_[this._optionsService.options.logLevel]},r.prototype._evalLazyOptionalParams=function(o){for(var i=0;i<o.length;i++)typeof o[i]=="function"&&(o[i]=o[i]())},r.prototype._log=function(o,i,n){this._evalLazyOptionalParams(n),o.call.apply(o,c([console,"xterm.js: "+i],n))},r.prototype.debug=function(o){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this._logLevel<=f.DEBUG&&this._log(console.log,o,i)},r.prototype.info=function(o){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this._logLevel<=f.INFO&&this._log(console.info,o,i)},r.prototype.warn=function(o){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this._logLevel<=f.WARN&&this._log(console.warn,o,i)},r.prototype.error=function(o){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this._logLevel<=f.ERROR&&this._log(console.error,o,i)},l([p(0,h.IOptionsService)],r)}();u.LogService=t},function(E,u,g){"use strict";var l=this&&this.__decorate||function(h,_,t,r){var o,i=arguments.length,n=i<3?_:r===null?r=Object.getOwnPropertyDescriptor(_,t):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(h,_,t,r);else for(var e=h.length-1;e>=0;e--)(o=h[e])&&(n=(i<3?o(n):i>3?o(_,t,n):o(_,t))||n);return i>3&&n&&Object.defineProperty(_,t,n),n},p=this&&this.__param||function(h,_){return function(t,r){_(t,r,h)}};Object.defineProperty(u,"__esModule",{value:!0});var c=g(1),f=function(){function h(_){this._bufferService=_,this.clearRange()}return Object.defineProperty(h.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),h.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},h.prototype.markDirty=function(_){_<this._start?this._start=_:_>this._end&&(this._end=_)},h.prototype.markRangeDirty=function(_,t){if(_>t){var r=_;_=t,t=r}_<this._start&&(this._start=_),t>this._end&&(this._end=t)},h.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},l([p(0,c.IBufferService)],h)}();u.DirtyRowService=f},function(E,u,g){"use strict";var l=this&&this.__spreadArrays||function(){for(var _=0,t=0,r=arguments.length;t<r;t++)_+=arguments[t].length;var o=Array(_),i=0;for(t=0;t<r;t++)for(var n=arguments[t],e=0,a=n.length;e<a;e++,i++)o[i]=n[e];return o};Object.defineProperty(u,"__esModule",{value:!0});var p=g(1),c=g(14),f=function(){function _(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._entries=new Map;for(var o=0,i=t;o<i.length;o++){var n=i[o],e=n[0],a=n[1];this.set(e,a)}}return _.prototype.set=function(t,r){var o=this._entries.get(t);return this._entries.set(t,r),o},_.prototype.forEach=function(t){this._entries.forEach(function(r,o){return t(o,r)})},_.prototype.has=function(t){return this._entries.has(t)},_.prototype.get=function(t){return this._entries.get(t)},_}();u.ServiceCollection=f;var h=function(){function _(){this._services=new f,this._services.set(p.IInstantiationService,this)}return _.prototype.setService=function(t,r){this._services.set(t,r)},_.prototype.getService=function(t){return this._services.get(t)},_.prototype.createInstance=function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];for(var i=c.getServiceDependencies(t).sort(function(S,C){return S.index-C.index}),n=[],e=0,a=i;e<a.length;e++){var s=a[e],d=this._services.get(s.id);if(!d)throw new Error("[createInstance] "+t.name+" depends on UNKNOWN service "+s.id+".");n.push(d)}var y=i.length>0?i[0].index:r.length;if(r.length!==y)throw new Error("[createInstance] First service dependency of "+t.name+" at position "+(y+1)+" conflicts with "+r.length+" static arguments");return new(t.bind.apply(t,l([void 0],l(r,n))))},_}();u.InstantiationService=h},function(E,u,g){"use strict";var l=this&&this.__decorate||function(i,n,e,a){var s,d=arguments.length,y=d<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,e):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(i,n,e,a);else for(var S=i.length-1;S>=0;S--)(s=i[S])&&(y=(d<3?s(y):d>3?s(n,e,y):s(n,e))||y);return d>3&&y&&Object.defineProperty(n,e,y),y},p=this&&this.__param||function(i,n){return function(e,a){n(e,a,i)}};Object.defineProperty(u,"__esModule",{value:!0});var c=g(1),f=g(0),h={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(i){return i.button!==4&&i.action===1&&(i.ctrl=!1,i.alt=!1,i.shift=!1,!0)}},VT200:{events:19,restrict:function(i){return i.action!==32}},DRAG:{events:23,restrict:function(i){return i.action!==32||i.button!==3}},ANY:{events:31,restrict:function(i){return!0}}};function _(i,n){var e=(i.ctrl?16:0)|(i.shift?4:0)|(i.alt?8:0);return i.button===4?(e|=64,e|=i.action):(e|=3&i.button,4&i.button&&(e|=64),8&i.button&&(e|=128),i.action===32?e|=32:i.action!==0||n||(e|=3)),e}var t=String.fromCharCode,r={DEFAULT:function(i){var n=[_(i,!1)+32,i.col+32,i.row+32];return n[0]>255||n[1]>255||n[2]>255?"":"\x1B[M"+t(n[0])+t(n[1])+t(n[2])},SGR:function(i){var n=i.action===0&&i.button!==4?"m":"M";return"\x1B[<"+_(i,!0)+";"+i.col+";"+i.row+n}},o=function(){function i(n,e){var a=this;this._bufferService=n,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new f.EventEmitter,this._lastEvent=null,Object.keys(h).forEach(function(s){return a.addProtocol(s,h[s])}),Object.keys(r).forEach(function(s){return a.addEncoding(s,r[s])}),this.reset()}return i.prototype.addProtocol=function(n,e){this._protocols[n]=e},i.prototype.addEncoding=function(n,e){this._encodings[n]=e},Object.defineProperty(i.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(n){if(!this._protocols[n])throw new Error('unknown protocol "'+n+'"');this._activeProtocol=n,this._onProtocolChange.fire(this._protocols[n].events)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(n){if(!this._encodings[n])throw new Error('unknown encoding "'+n+'"');this._activeEncoding=n},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(i.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!0,configurable:!0}),i.prototype.triggerMouseEvent=function(n){if(n.col<0||n.col>=this._bufferService.cols||n.row<0||n.row>=this._bufferService.rows||n.button===4&&n.action===32||n.button===3&&n.action!==32||n.button!==4&&(n.action===2||n.action===3)||(n.col++,n.row++,n.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,n))||!this._protocols[this._activeProtocol].restrict(n))return!1;var e=this._encodings[this._activeEncoding](n);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=n,!0},i.prototype.explainEvents=function(n){return{down:!!(1&n),up:!!(2&n),drag:!!(4&n),move:!!(8&n),wheel:!!(16&n)}},i.prototype._compareEvents=function(n,e){return n.col===e.col&&n.row===e.row&&n.button===e.button&&n.action===e.action&&n.ctrl===e.ctrl&&n.alt===e.alt&&n.shift===e.shift},l([p(0,c.IBufferService),p(1,c.ICoreService)],i)}();u.CoreMouseService=o},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(c){this._action=c,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0}return p.prototype.writeSync=function(c){if(this._writeBuffer.length){for(var f=this._bufferOffset;f<this._writeBuffer.length;++f){var h=this._writeBuffer[f],_=this._callbacks[f];this._action(h),_&&_()}this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=2147483647}this._action(c)},p.prototype.write=function(c,f){var h=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return h._innerWrite()})),this._pendingData+=c.length,this._writeBuffer.push(c),this._callbacks.push(f)},p.prototype._innerWrite=function(){for(var c=this,f=Date.now();this._writeBuffer.length>this._bufferOffset;){var h=this._writeBuffer[this._bufferOffset],_=this._callbacks[this._bufferOffset];if(this._bufferOffset++,this._action(h),this._pendingData-=h.length,_&&_(),Date.now()-f>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return c._innerWrite()},0)):(this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0)},p}();u.WriteBuffer=l},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(0),p=function(){function c(f){this._bufferService=f,this._linkProviders=[],this._linkCacheDisposables=[],this._onLinkHover=new l.EventEmitter,this._onLinkLeave=new l.EventEmitter}return Object.defineProperty(c.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0}),c.prototype.registerLinkProvider=function(f){var h=this;return this._linkProviders.push(f),{dispose:function(){var _=h._linkProviders.indexOf(f);_!==-1&&h._linkProviders.splice(_,1)}}},c.prototype.attachToDom=function(f,h,_){this._element=f,this._mouseService=h,this._renderService=_,this._element.addEventListener("mousemove",this._onMouseMove.bind(this)),this._element.addEventListener("click",this._onMouseDown.bind(this))},c.prototype._onMouseMove=function(f){if(this._lastMouseEvent=f,this._element&&this._mouseService){var h=this._positionFromMouseEvent(f,this._element,this._mouseService);h&&(this._lastBufferCell&&h.x===this._lastBufferCell.x&&h.y===this._lastBufferCell.y||(this._onHover(h),this._lastBufferCell=h))}},c.prototype._onHover=function(f){this._currentLink?this._linkAtPosition(this._currentLink,f)||(this._clearCurrentLink(),this._askForLink(f)):this._askForLink(f)},c.prototype._askForLink=function(f){var h=this,_=new Map,t=!1;this._linkProviders.forEach(function(r,o){r.provideLink(f,function(i){_.set(o,i);for(var n=!1,e=0;e<o;e++)_.has(e)&&!_.get(e)||(n=!0);if(!n&&i&&(t=!0,h._handleNewLink(i)),_.size===h._linkProviders.length&&!t)for(e=0;e<_.size;e++){var a=_.get(e);if(a){h._handleNewLink(a);break}}})})},c.prototype._onMouseDown=function(f){if(this._element&&this._mouseService&&this._currentLink){var h=this._positionFromMouseEvent(f,this._element,this._mouseService);h&&this._linkAtPosition(this._currentLink,h)&&this._currentLink.activate(f,this._currentLink.text)}},c.prototype._clearCurrentLink=function(f,h){this._element&&this._currentLink&&this._lastMouseEvent&&(!f||!h||this._currentLink.range.start.y>=f&&this._currentLink.range.end.y<=h)&&(this._linkLeave(this._element,this._currentLink,this._lastMouseEvent),this._currentLink=void 0,this._linkCacheDisposables.forEach(function(_){return _.dispose()}),this._linkCacheDisposables=[])},c.prototype._handleNewLink=function(f){var h=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._linkAtPosition(f,_)&&(this._currentLink=f,this._linkHover(this._element,f,this._lastMouseEvent),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRender(function(t){h._clearCurrentLink(t.start+1+h._bufferService.buffer.ydisp,t.end+1+h._bufferService.buffer.ydisp)})))}},c.prototype._linkHover=function(f,h,_){var t=h.range,r=this._bufferService.buffer.ydisp;this._onLinkHover.fire(this._createLinkHoverEvent(t.start.x-1,t.start.y-r-1,t.end.x,t.end.y-r-1,void 0)),f.classList.add("xterm-cursor-pointer"),h.hover&&h.hover(_,h.text)},c.prototype._linkLeave=function(f,h,_){var t=h.range,r=this._bufferService.buffer.ydisp;this._onLinkLeave.fire(this._createLinkHoverEvent(t.start.x-1,t.start.y-r-1,t.end.x,t.end.y-r-1,void 0)),f.classList.remove("xterm-cursor-pointer"),h.leave&&h.leave(_,h.text)},c.prototype._linkAtPosition=function(f,h){var _=f.range.start.y===f.range.end.y,t=f.range.start.y<h.y,r=f.range.end.y>h.y;return(_&&f.range.start.x<=h.x&&f.range.end.x>=h.x||t&&f.range.end.x>=h.x||r&&f.range.start.x<=h.x||t&&r)&&f.range.start.y<=h.y&&f.range.end.y>=h.y},c.prototype._positionFromMouseEvent=function(f,h,_){var t=_.getCoords(f,h,this._bufferService.cols,this._bufferService.rows);if(t)return{x:t[0],y:t[1]+this._bufferService.buffer.ydisp}},c.prototype._createLinkHoverEvent=function(f,h,_,t,r){return{x1:f,y1:h,x2:_,y2:t,cols:this._bufferService.cols,fg:r}},c}();u.Linkifier2=p},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(c){this._textarea=c}return Object.defineProperty(p.prototype,"isFocused",{get:function(){return document.activeElement===this._textarea&&document.hasFocus()},enumerable:!0,configurable:!0}),p}();u.CoreBrowserService=l},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=g(0),p=g(79),c=function(){function f(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter;var h=new p.UnicodeV6;this.register(h),this._active=h.version,this._activeProvider=h}return Object.defineProperty(f.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"activeVersion",{get:function(){return this._active},set:function(h){if(!this._providers[h])throw new Error('unknown Unicode version "'+h+'"');this._active=h,this._activeProvider=this._providers[h],this._onChange.fire(h)},enumerable:!0,configurable:!0}),f.prototype.register=function(h){this._providers[h.version]=h},f.prototype.wcwidth=function(h){return this._activeProvider.wcwidth(h)},f.prototype.getStringCellWidth=function(h){for(var _=0,t=h.length,r=0;r<t;++r){var o=h.charCodeAt(r);if(55296<=o&&o<=56319){if(++r>=t)return _+this.wcwidth(o);var i=h.charCodeAt(r);56320<=i&&i<=57343?o=1024*(o-55296)+i-56320+65536:_+=this.wcwidth(i)}_+=this.wcwidth(o)}return _},f}();u.UnicodeService=c},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l,p=g(15),c=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],f=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],h=function(){function _(){if(this.version="6",!l){l=new Uint8Array(65536),p.fill(l,1),l[0]=0,p.fill(l,0,1,32),p.fill(l,0,127,160),p.fill(l,2,4352,4448),l[9001]=2,l[9002]=2,p.fill(l,2,11904,42192),l[12351]=1,p.fill(l,2,44032,55204),p.fill(l,2,63744,64256),p.fill(l,2,65040,65050),p.fill(l,2,65072,65136),p.fill(l,2,65280,65377),p.fill(l,2,65504,65511);for(var t=0;t<c.length;++t)p.fill(l,0,c[t][0],c[t][1]+1)}}return _.prototype.wcwidth=function(t){return t<32?0:t<127?1:t<65536?l[t]:function(r,o){var i,n=0,e=o.length-1;if(r<o[0][0]||r>o[e][1])return!1;for(;e>=n;)if(r>o[i=n+e>>1][1])n=i+1;else{if(!(r<o[i][0]))return!0;e=i-1}return!1}(t,f)?0:t>=131072&&t<=196605||t>=196608&&t<=262141?2:1},_}();u.UnicodeV6=h},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(){this.charsets=[],this.glevel=0}return p.prototype.reset=function(){this.charset=void 0,this.charsets=[],this.glevel=0},p.prototype.setgLevel=function(c){this.glevel=c,this.charset=this.charsets[c]},p.prototype.setgCharset=function(c,f){this.charsets[c]=f,this.glevel===c&&(this.charset=f)},p}();u.CharsetService=l},function(E,u,g){"use strict";Object.defineProperty(u,"__esModule",{value:!0});var l=function(){function p(){this._addons=[]}return p.prototype.dispose=function(){for(var c=this._addons.length-1;c>=0;c--)this._addons[c].instance.dispose()},p.prototype.loadAddon=function(c,f){var h=this,_={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(_),f.dispose=function(){return h._wrappedAddonDispose(_)},f.activate(c)},p.prototype._wrappedAddonDispose=function(c){if(!c.isDisposed){for(var f=-1,h=0;h<this._addons.length;h++)if(this._addons[h]===c){f=h;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0,c.dispose.apply(c.instance),this._addons.splice(f,1)}},p}();u.AddonManager=l}])},function(P,H,L){"use strict";var E=L(30),u=L(26);E({target:"Array",proto:!0,forced:[].forEach!=u},{forEach:u})},function(P,H,L){var E=L(1),u=L(10).f,g=L(6),l=L(34),p=L(9),c=L(39),f=L(49);P.exports=function(h,_){var t,r,o,i,n,e=h.target,a=h.global,s=h.stat;if(t=a?E:s?E[e]||p(e,{}):(E[e]||{}).prototype)for(r in _){if(i=_[r],o=h.noTargetGet?(n=u(t,r))&&n.value:t[r],!f(a?r:e+(s?".":"#")+r,h.forced)&&o!==void 0){if(typeof i==typeof o)continue;c(i,o)}(h.sham||o&&o.sham)&&g(i,"sham",!0),l(t,r,i,h)}}},function(P,H){var L;L=function(){return this}();try{L=L||new Function("return this")()}catch(E){typeof window=="object"&&(L=window)}P.exports=L},function(P,H,L){"use strict";var E={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,g=u&&!E.call({1:2},1);H.f=g?function(l){var p=u(this,l);return!!p&&p.enumerable}:E},function(P,H,L){var E=L(1),u=L(5),g=E.document,l=u(g)&&u(g.createElement);P.exports=function(p){return l?g.createElement(p):{}}},function(P,H,L){var E=L(1),u=L(6),g=L(3),l=L(9),p=L(19),c=L(35),f=c.get,h=c.enforce,_=String(String).split("String");(P.exports=function(t,r,o,i){var n=!!i&&!!i.unsafe,e=!!i&&!!i.enumerable,a=!!i&&!!i.noTargetGet;typeof o=="function"&&(typeof r!="string"||g(o,"name")||u(o,"name",r),h(o).source=_.join(typeof r=="string"?r:"")),t!==E?(n?!a&&t[r]&&(e=!0):delete t[r],e?t[r]=o:u(t,r,o)):e?t[r]=o:l(r,o)})(Function.prototype,"toString",function(){return typeof this=="function"&&f(this).source||p(this)})},function(P,H,L){var E,u,g,l=L(36),p=L(1),c=L(5),f=L(6),h=L(3),_=L(37),t=L(23),r=p.WeakMap;if(l){var o=new r,i=o.get,n=o.has,e=o.set;E=function(s,d){return e.call(o,s,d),d},u=function(s){return i.call(o,s)||{}},g=function(s){return n.call(o,s)}}else{var a=_("state");t[a]=!0,E=function(s,d){return f(s,a,d),d},u=function(s){return h(s,a)?s[a]:{}},g=function(s){return h(s,a)}}P.exports={set:E,get:u,has:g,enforce:function(s){return g(s)?u(s):E(s,{})},getterFor:function(s){return function(d){var y;if(!c(d)||(y=u(d)).type!==s)throw TypeError("Incompatible receiver, "+s+" required");return y}}}},function(P,H,L){var E=L(1),u=L(19),g=E.WeakMap;P.exports=typeof g=="function"&&/native code/.test(u(g))},function(P,H,L){var E=L(21),u=L(22),g=E("keys");P.exports=function(l){return g[l]||(g[l]=u(l))}},function(P,H){P.exports=!1},function(P,H,L){var E=L(3),u=L(40),g=L(10),l=L(17);P.exports=function(p,c){for(var f=u(c),h=l.f,_=g.f,t=0;t<f.length;t++){var r=f[t];E(p,r)||h(p,r,_(c,r))}}},function(P,H,L){var E=L(41),u=L(43),g=L(48),l=L(18);P.exports=E("Reflect","ownKeys")||function(p){var c=u.f(l(p)),f=g.f;return f?c.concat(f(p)):c}},function(P,H,L){var E=L(42),u=L(1),g=function(l){return typeof l=="function"?l:void 0};P.exports=function(l,p){return arguments.length<2?g(E[l])||g(u[l]):E[l]&&E[l][p]||u[l]&&u[l][p]}},function(P,H,L){var E=L(1);P.exports=E},function(P,H,L){var E=L(44),u=L(47).concat("length","prototype");H.f=Object.getOwnPropertyNames||function(g){return E(g,u)}},function(P,H,L){var E=L(3),u=L(8),g=L(45).indexOf,l=L(23);P.exports=function(p,c){var f,h=u(p),_=0,t=[];for(f in h)!E(l,f)&&E(h,f)&&t.push(f);for(;c.length>_;)E(h,f=c[_++])&&(~g(t,f)||t.push(f));return t}},function(P,H,L){var E=L(8),u=L(24),g=L(46),l=function(p){return function(c,f,h){var _,t=E(c),r=u(t.length),o=g(h,r);if(p&&f!=f){for(;r>o;)if((_=t[o++])!=_)return!0}else for(;r>o;o++)if((p||o in t)&&t[o]===f)return p||o||0;return!p&&-1}};P.exports={includes:l(!0),indexOf:l(!1)}},function(P,H,L){var E=L(25),u=Math.max,g=Math.min;P.exports=function(l,p){var c=E(l);return c<0?u(c+p,0):g(c,p)}},function(P,H){P.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(P,H){H.f=Object.getOwnPropertySymbols},function(P,H,L){var E=L(2),u=/#|\.prototype\./,g=function(h,_){var t=p[l(h)];return t==f||t!=c&&(typeof _=="function"?E(_):!!_)},l=g.normalize=function(h){return String(h).replace(u,".").toLowerCase()},p=g.data={},c=g.NATIVE="N",f=g.POLYFILL="P";P.exports=g},function(P,H,L){var E=L(51),u=L(12),g=L(53),l=L(24),p=L(54),c=[].push,f=function(h){var _=h==1,t=h==2,r=h==3,o=h==4,i=h==6,n=h==5||i;return function(e,a,s,d){for(var y,S,C=g(e),A=u(C),k=E(a,s,3),I=l(A.length),O=0,b=d||p,v=_?b(e,I):t?b(e,0):void 0;I>O;O++)if((n||O in A)&&(S=k(y=A[O],O,C),h)){if(_)v[O]=S;else if(S)switch(h){case 3:return!0;case 5:return y;case 6:return O;case 2:c.call(v,y)}else if(o)return!1}return i?-1:r||o?o:v}};P.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6)}},function(P,H,L){var E=L(52);P.exports=function(u,g,l){if(E(u),g===void 0)return u;switch(l){case 0:return function(){return u.call(g)};case 1:return function(p){return u.call(g,p)};case 2:return function(p,c){return u.call(g,p,c)};case 3:return function(p,c,f){return u.call(g,p,c,f)}}return function(){return u.apply(g,arguments)}}},function(P,H){P.exports=function(L){if(typeof L!="function")throw TypeError(String(L)+" is not a function");return L}},function(P,H,L){var E=L(14);P.exports=function(u){return Object(E(u))}},function(P,H,L){var E=L(5),u=L(55),g=L(56)("species");P.exports=function(l,p){var c;return u(l)&&(typeof(c=l.constructor)!="function"||c!==Array&&!u(c.prototype)?E(c)&&(c=c[g])===null&&(c=void 0):c=void 0),new(c===void 0?Array:c)(p===0?0:p)}},function(P,H,L){var E=L(13);P.exports=Array.isArray||function(u){return E(u)=="Array"}},function(P,H,L){var E=L(1),u=L(21),g=L(3),l=L(22),p=L(27),c=L(57),f=u("wks"),h=E.Symbol,_=c?h:h&&h.withoutSetter||l;P.exports=function(t){return g(f,t)||(p&&g(h,t)?f[t]=h[t]:f[t]=_("Symbol."+t)),f[t]}},function(P,H,L){var E=L(27);P.exports=E&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(P,H,L){"use strict";var E=L(2);P.exports=function(u,g){var l=[][u];return!!l&&E(function(){l.call(null,g||function(){throw 1},1)})}},function(P,H,L){var E=L(4),u=L(2),g=L(3),l=Object.defineProperty,p={},c=function(f){throw f};P.exports=function(f,h){if(g(p,f))return p[f];h||(h={});var _=[][f],t=!!g(h,"ACCESSORS")&&h.ACCESSORS,r=g(h,0)?h[0]:c,o=g(h,1)?h[1]:void 0;return p[f]=!!_&&!u(function(){if(t&&!E)return!0;var i={length:-1};t?l(i,1,{enumerable:!0,get:c}):i[1]=1,_.call(i,r,o)})}},function(P,H,L){var E=L(1),u=L(61),g=L(26),l=L(6);for(var p in u){var c=E[p],f=c&&c.prototype;if(f&&f.forEach!==g)try{l(f,"forEach",g)}catch(h){f.forEach=g}}},function(P,H){P.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(P,H,L){"use strict";var E=L(63),u=typeof Symbol=="function"&&Symbol.for,g=u?Symbol.for("react.element"):60103,l=u?Symbol.for("react.portal"):60106,p=u?Symbol.for("react.fragment"):60107,c=u?Symbol.for("react.strict_mode"):60108,f=u?Symbol.for("react.profiler"):60114,h=u?Symbol.for("react.provider"):60109,_=u?Symbol.for("react.context"):60110,t=u?Symbol.for("react.forward_ref"):60112,r=u?Symbol.for("react.suspense"):60113,o=u?Symbol.for("react.memo"):60115,i=u?Symbol.for("react.lazy"):60116,n=typeof Symbol=="function"&&Symbol.iterator;function e(j){for(var W="https://reactjs.org/docs/error-decoder.html?invariant="+j,B=1;B<arguments.length;B++)W+="&args[]="+encodeURIComponent(arguments[B]);return"Minified React error #"+j+"; visit "+W+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s={};function d(j,W,B){this.props=j,this.context=W,this.refs=s,this.updater=B||a}function y(){}function S(j,W,B){this.props=j,this.context=W,this.refs=s,this.updater=B||a}d.prototype.isReactComponent={},d.prototype.setState=function(j,W){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error(e(85));this.updater.enqueueSetState(this,j,W,"setState")},d.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")},y.prototype=d.prototype;var C=S.prototype=new y;C.constructor=S,E(C,d.prototype),C.isPureReactComponent=!0;var A={current:null},k=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function O(j,W,B){var Q,X={},te=null,ae=null;if(W!=null)for(Q in W.ref!==void 0&&(ae=W.ref),W.key!==void 0&&(te=""+W.key),W)k.call(W,Q)&&!I.hasOwnProperty(Q)&&(X[Q]=W[Q]);var oe=arguments.length-2;if(oe===1)X.children=B;else if(1<oe){for(var U=Array(oe),x=0;x<oe;x++)U[x]=arguments[x+2];X.children=U}if(j&&j.defaultProps)for(Q in oe=j.defaultProps)X[Q]===void 0&&(X[Q]=oe[Q]);return{$$typeof:g,type:j,key:te,ref:ae,props:X,_owner:A.current}}function b(j){return typeof j=="object"&&j!==null&&j.$$typeof===g}var v=/\/+/g,m=[];function w(j,W,B,Q){if(m.length){var X=m.pop();return X.result=j,X.keyPrefix=W,X.func=B,X.context=Q,X.count=0,X}return{result:j,keyPrefix:W,func:B,context:Q,count:0}}function D(j){j.result=null,j.keyPrefix=null,j.func=null,j.context=null,j.count=0,10>m.length&&m.push(j)}function T(j,W,B){return j==null?0:function Q(X,te,ae,oe){var U=typeof X;U!=="undefined"&&U!=="boolean"||(X=null);var x=!1;if(X===null)x=!0;else switch(U){case"string":case"number":x=!0;break;case"object":switch(X.$$typeof){case g:case l:x=!0}}if(x)return ae(oe,X,te===""?"."+F(X,0):te),1;if(x=0,te=te===""?".":te+":",Array.isArray(X))for(var M=0;M<X.length;M++){var q=te+F(U=X[M],M);x+=Q(U,q,ae,oe)}else if(X===null||typeof X!="object"?q=null:q=typeof(q=n&&X[n]||X["@@iterator"])=="function"?q:null,typeof q=="function")for(X=q.call(X),M=0;!(U=X.next()).done;)x+=Q(U=U.value,q=te+F(U,M++),ae,oe);else if(U==="object")throw ae=""+X,Error(e(31,ae==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ae,""));return x}(j,"",W,B)}function F(j,W){return typeof j=="object"&&j!==null&&j.key!=null?function(B){var Q={"=":"=0",":":"=2"};return"$"+(""+B).replace(/[=:]/g,function(X){return Q[X]})}(j.key):W.toString(36)}function N(j,W){j.func.call(j.context,W,j.count++)}function V(j,W,B){var Q=j.result,X=j.keyPrefix;j=j.func.call(j.context,W,j.count++),Array.isArray(j)?Z(j,Q,B,function(te){return te}):j!=null&&(b(j)&&(j=function(te,ae){return{$$typeof:g,type:te.type,key:ae,ref:te.ref,props:te.props,_owner:te._owner}}(j,X+(!j.key||W&&W.key===j.key?"":(""+j.key).replace(v,"$&/")+"/")+B)),Q.push(j))}function Z(j,W,B,Q,X){var te="";B!=null&&(te=(""+B).replace(v,"$&/")+"/"),T(j,V,W=w(W,te,Q,X)),D(W)}var K={current:null};function R(){var j=K.current;if(j===null)throw Error(e(321));return j}var Y={ReactCurrentDispatcher:K,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:A,IsSomeRendererActing:{current:!1},assign:E};H.Children={map:function(j,W,B){if(j==null)return j;var Q=[];return Z(j,Q,null,W,B),Q},forEach:function(j,W,B){if(j==null)return j;T(j,N,W=w(null,null,W,B)),D(W)},count:function(j){return T(j,function(){return null},null)},toArray:function(j){var W=[];return Z(j,W,null,function(B){return B}),W},only:function(j){if(!b(j))throw Error(e(143));return j}},H.Component=d,H.Fragment=p,H.Profiler=f,H.PureComponent=S,H.StrictMode=c,H.Suspense=r,H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,H.cloneElement=function(j,W,B){if(j==null)throw Error(e(267,j));var Q=E({},j.props),X=j.key,te=j.ref,ae=j._owner;if(W!=null){if(W.ref!==void 0&&(te=W.ref,ae=A.current),W.key!==void 0&&(X=""+W.key),j.type&&j.type.defaultProps)var oe=j.type.defaultProps;for(U in W)k.call(W,U)&&!I.hasOwnProperty(U)&&(Q[U]=W[U]===void 0&&oe!==void 0?oe[U]:W[U])}var U=arguments.length-2;if(U===1)Q.children=B;else if(1<U){oe=Array(U);for(var x=0;x<U;x++)oe[x]=arguments[x+2];Q.children=oe}return{$$typeof:g,type:j.type,key:X,ref:te,props:Q,_owner:ae}},H.createContext=function(j,W){return W===void 0&&(W=null),(j={$$typeof:_,_calculateChangedBits:W,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:j},j.Consumer=j},H.createElement=O,H.createFactory=function(j){var W=O.bind(null,j);return W.type=j,W},H.createRef=function(){return{current:null}},H.forwardRef=function(j){return{$$typeof:t,render:j}},H.isValidElement=b,H.lazy=function(j){return{$$typeof:i,_ctor:j,_status:-1,_result:null}},H.memo=function(j,W){return{$$typeof:o,type:j,compare:W===void 0?null:W}},H.useCallback=function(j,W){return R().useCallback(j,W)},H.useContext=function(j,W){return R().useContext(j,W)},H.useDebugValue=function(){},H.useEffect=function(j,W){return R().useEffect(j,W)},H.useImperativeHandle=function(j,W,B){return R().useImperativeHandle(j,W,B)},H.useLayoutEffect=function(j,W){return R().useLayoutEffect(j,W)},H.useMemo=function(j,W){return R().useMemo(j,W)},H.useReducer=function(j,W,B){return R().useReducer(j,W,B)},H.useRef=function(j){return R().useRef(j)},H.useState=function(j){return R().useState(j)},H.version="16.13.1"},function(P,H,L){"use strict";var E=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function l(p){if(p==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(p)}P.exports=function(){try{if(!Object.assign)return!1;var p=new String("abc");if(p[5]="de",Object.getOwnPropertyNames(p)[0]==="5")return!1;for(var c={},f=0;f<10;f++)c["_"+String.fromCharCode(f)]=f;if(Object.getOwnPropertyNames(c).map(function(_){return c[_]}).join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(_){h[_]=_}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch(_){return!1}}()?Object.assign:function(p,c){for(var f,h,_=l(p),t=1;t<arguments.length;t++){for(var r in f=Object(arguments[t]))u.call(f,r)&&(_[r]=f[r]);if(E){h=E(f);for(var o=0;o<h.length;o++)g.call(f,h[o])&&(_[h[o]]=f[h[o]])}}return _}},function(P,H,L){"use strict";var E=L(65);function u(){}function g(){}g.resetWarningCache=u,P.exports=function(){function l(f,h,_,t,r,o){if(o!==E){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function p(){return l}l.isRequired=l;var c={array:l,bool:l,func:l,number:l,object:l,string:l,symbol:l,any:l,arrayOf:p,element:l,elementType:l,instanceOf:p,node:l,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:g,resetWarningCache:u};return c.PropTypes=c,c}},function(P,H,L){"use strict";P.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(P,H,L){var E=L(67),u=L(68);typeof(u=u.__esModule?u.default:u)=="string"&&(u=[[P.i,u,""]]);var g={insert:"head",singleton:!1};E(u,g),P.exports=u.locals||{}},function(P,H,L){"use strict";var E,u=function(){return E===void 0&&(E=!!(window&&document&&document.all&&!window.atob)),E},g=function(){var e={};return function(a){if(e[a]===void 0){var s=document.querySelector(a);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(d){s=null}e[a]=s}return e[a]}}(),l=[];function p(e){for(var a=-1,s=0;s<l.length;s++)if(l[s].identifier===e){a=s;break}return a}function c(e,a){for(var s={},d=[],y=0;y<e.length;y++){var S=e[y],C=a.base?S[0]+a.base:S[0],A=s[C]||0,k="".concat(C," ").concat(A);s[C]=A+1;var I=p(k),O={css:S[1],media:S[2],sourceMap:S[3]};I!==-1?(l[I].references++,l[I].updater(O)):l.push({identifier:k,updater:n(O,a),references:1}),d.push(k)}return d}function f(e){var a=document.createElement("style"),s=e.attributes||{};if(s.nonce===void 0){var d=L.nc;d&&(s.nonce=d)}if(Object.keys(s).forEach(function(S){a.setAttribute(S,s[S])}),typeof e.insert=="function")e.insert(a);else{var y=g(e.insert||"head");if(!y)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");y.appendChild(a)}return a}var h,_=(h=[],function(e,a){return h[e]=a,h.filter(Boolean).join(`
`)});function t(e,a,s,d){var y=s?"":d.media?"@media ".concat(d.media," {").concat(d.css,"}"):d.css;if(e.styleSheet)e.styleSheet.cssText=_(a,y);else{var S=document.createTextNode(y),C=e.childNodes;C[a]&&e.removeChild(C[a]),C.length?e.insertBefore(S,C[a]):e.appendChild(S)}}function r(e,a,s){var d=s.css,y=s.media,S=s.sourceMap;if(y?e.setAttribute("media",y):e.removeAttribute("media"),S&&btoa&&(d+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(S))))," */")),e.styleSheet)e.styleSheet.cssText=d;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(d))}}var o=null,i=0;function n(e,a){var s,d,y;if(a.singleton){var S=i++;s=o||(o=f(a)),d=t.bind(null,s,S,!1),y=t.bind(null,s,S,!0)}else s=f(a),d=r.bind(null,s,a),y=function(){(function(C){if(C.parentNode===null)return!1;C.parentNode.removeChild(C)})(s)};return d(e),function(C){if(C){if(C.css===e.css&&C.media===e.media&&C.sourceMap===e.sourceMap)return;d(e=C)}else y()}}P.exports=function(e,a){(a=a||{}).singleton||typeof a.singleton=="boolean"||(a.singleton=u());var s=c(e=e||[],a);return function(d){if(d=d||[],Object.prototype.toString.call(d)==="[object Array]"){for(var y=0;y<s.length;y++){var S=p(s[y]);l[S].references--}for(var C=c(d,a),A=0;A<s.length;A++){var k=p(s[A]);l[k].references===0&&(l[k].updater(),l.splice(k,1))}s=C}}}},function(P,H,L){(H=L(69)(!1)).push([P.i,`/**
 * Copyright (c) 2014 The xterm.js authors. All rights reserved.
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * https://github.com/chjj/term.js
 * @license MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 *   The original design remains. The terminal itself
 *   has been extended to include xterm CSI codes, among
 *   other features.
 */

/**
 *  Default styles for xterm.js
 */

.xterm {
    font-feature-settings: "liga" 0;
    position: relative;
    user-select: none;
    -ms-user-select: none;
    -webkit-user-select: none;
}

.xterm.focus,
.xterm:focus {
    outline: none;
}

.xterm .xterm-helpers {
    position: absolute;
    top: 0;
    /**
     * The z-index of the helpers must be higher than the canvases in order for
     * IMEs to appear on top.
     */
    z-index: 5;
}

.xterm .xterm-helper-textarea {
    /*
     * HACK: to fix IE's blinking cursor
     * Move textarea out of the screen to the far left, so that the cursor is not visible.
     */
    position: absolute;
    opacity: 0;
    left: -9999em;
    top: 0;
    width: 0;
    height: 0;
    z-index: -5;
    /** Prevent wrapping so the IME appears against the textarea at the correct position */
    white-space: nowrap;
    overflow: hidden;
    resize: none;
}

.xterm .composition-view {
    /* TODO: Composition position got messed up somewhere */
    background: #000;
    color: #FFF;
    display: none;
    position: absolute;
    white-space: nowrap;
    z-index: 1;
}

.xterm .composition-view.active {
    display: block;
}

.xterm .xterm-viewport {
    /* On OS X this is required in order for the scroll bar to appear fully opaque */
    background-color: #000;
    overflow-y: scroll;
    cursor: default;
    position: absolute;
    right: 0;
    left: 0;
    top: 0;
    bottom: 0;
}

.xterm .xterm-screen {
    position: relative;
}

.xterm .xterm-screen canvas {
    position: absolute;
    left: 0;
    top: 0;
}

.xterm .xterm-scroll-area {
    visibility: hidden;
}

.xterm-char-measure-element {
    display: inline-block;
    visibility: hidden;
    position: absolute;
    top: 0;
    left: -9999em;
    line-height: normal;
}

.xterm {
    cursor: text;
}

.xterm.enable-mouse-events {
    /* When mouse events are enabled (eg. tmux), revert to the standard pointer cursor */
    cursor: default;
}

.xterm.xterm-cursor-pointer {
    cursor: pointer;
}

.xterm.column-select.focus {
    /* Column selection mode */
    cursor: crosshair;
}

.xterm .xterm-accessibility,
.xterm .xterm-message {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;
    z-index: 10;
    color: transparent;
}

.xterm .live-region {
    position: absolute;
    left: -9999px;
    width: 1px;
    height: 1px;
    overflow: hidden;
}

.xterm-dim {
    opacity: 0.5;
}

.xterm-underline {
    text-decoration: underline;
}
`,""]),P.exports=H},function(P,H,L){"use strict";P.exports=function(E){var u=[];return u.toString=function(){return this.map(function(g){var l=function(p,c){var f=p[1]||"",h=p[3];if(!h)return f;if(c&&typeof btoa=="function"){var _=(r=h,o=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(i," */")),t=h.sources.map(function(n){return"/*# sourceURL=".concat(h.sourceRoot||"").concat(n," */")});return[f].concat(t).concat([_]).join(`
`)}var r,o,i;return[f].join(`
`)}(g,E);return g[2]?"@media ".concat(g[2]," {").concat(l,"}"):l}).join("")},u.i=function(g,l,p){typeof g=="string"&&(g=[[null,g,""]]);var c={};if(p)for(var f=0;f<this.length;f++){var h=this[f][0];h!=null&&(c[h]=!0)}for(var _=0;_<g.length;_++){var t=[].concat(g[_]);p&&c[t[0]]||(l&&(t[2]?t[2]="".concat(l," and ").concat(t[2]):t[2]=l),u.push(t))}},u}},function(P,H,L){"use strict";L.r(H),L.d(H,"XTerm",function(){return f}),L(29),L(60);var E,u=L(7),g=L(0),l=L.n(g),p=(L(66),L(28)),c=(E=function(h,_){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(h,_)},function(h,_){function t(){this.constructor=h}E(h,_),h.prototype=_===null?Object.create(_):(t.prototype=_.prototype,new t)}),f=function(h){function _(t){var r=h.call(this,t)||this;return r.terminalRef=u.createRef(),r.onData=r.onData.bind(r),r.onCursorMove=r.onCursorMove.bind(r),r.onKey=r.onKey.bind(r),r.onBinary=r.onBinary.bind(r),r.onLineFeed=r.onLineFeed.bind(r),r.onScroll=r.onScroll.bind(r),r.onSelectionChange=r.onSelectionChange.bind(r),r.onRender=r.onRender.bind(r),r.onResize=r.onResize.bind(r),r.onTitleChange=r.onTitleChange.bind(r),r.setupTerminal(),r}return c(_,h),_.prototype.setupTerminal=function(){var t=this;this.terminal=new p.Terminal(this.props.options),this.props.addons&&this.props.addons.forEach(function(r){t.terminal.loadAddon(r)}),this.terminal.onBinary(this.onBinary),this.terminal.onCursorMove(this.onCursorMove),this.terminal.onData(this.onData),this.terminal.onKey(this.onKey),this.terminal.onLineFeed(this.onLineFeed),this.terminal.onScroll(this.onScroll),this.terminal.onSelectionChange(this.onSelectionChange),this.terminal.onRender(this.onRender),this.terminal.onResize(this.onResize),this.terminal.onTitleChange(this.onTitleChange),this.props.customKeyEventHandler&&this.terminal.attachCustomKeyEventHandler(this.props.customKeyEventHandler)},_.prototype.componentDidMount=function(){this.terminalRef.current&&this.terminal.open(this.terminalRef.current)},_.prototype.componentWillUnmount=function(){this.terminal.dispose()},_.prototype.onBinary=function(t){this.props.onBinary&&this.props.onBinary(t)},_.prototype.onCursorMove=function(){this.props.onCursorMove&&this.props.onCursorMove()},_.prototype.onData=function(t){this.props.onData&&this.props.onData(t)},_.prototype.onKey=function(t){this.props.onKey&&this.props.onKey(t)},_.prototype.onLineFeed=function(){this.props.onLineFeed&&this.props.onLineFeed()},_.prototype.onScroll=function(t){this.props.onScroll&&this.props.onScroll(t)},_.prototype.onSelectionChange=function(){this.props.onSelectionChange&&this.props.onSelectionChange()},_.prototype.onRender=function(t){this.props.onRender&&this.props.onRender(t)},_.prototype.onResize=function(t){this.props.onResize&&this.props.onResize(t)},_.prototype.onTitleChange=function(t){this.props.onTitleChange&&this.props.onTitleChange(t)},_.prototype.render=function(){return u.createElement("div",{className:this.props.className,ref:this.terminalRef})},_.propTypes={className:l.a.string,options:l.a.object,addons:l.a.array,onBinary:l.a.func,onCursorMove:l.a.func,onData:l.a.func,onKey:l.a.func,onLineFeed:l.a.func,onScroll:l.a.func,onSelectionChange:l.a.func,onRender:l.a.func,onResize:l.a.func,onTitleChange:l.a.func,customKeyEventHandler:l.a.func},_}(u.Component)}]);const J=$.XTerm},64836:function(re){function G(z){return z&&z.__esModule?z:{default:z}}re.exports=G,re.exports.__esModule=!0,re.exports.default=re.exports},18698:function(re){function G(z){"@babel/helpers - typeof";return re.exports=G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},re.exports.__esModule=!0,re.exports.default=re.exports,G(z)}re.exports=G,re.exports.__esModule=!0,re.exports.default=re.exports},15861:function(re,G,z){"use strict";z.d(G,{Z:function(){return J}});function $(P,H,L,E,u,g,l){try{var p=P[g](l),c=p.value}catch(f){L(f);return}p.done?H(c):Promise.resolve(c).then(E,u)}function J(P){return function(){var H=this,L=arguments;return new Promise(function(E,u){var g=P.apply(H,L);function l(c){$(g,E,u,l,p,"next",c)}function p(c){$(g,E,u,l,p,"throw",c)}l(void 0)})}}},74165:function(re,G,z){"use strict";z.d(G,{Z:function(){return J}});var $=z(71002);function J(){"use strict";J=function(){return P};var P={},H=Object.prototype,L=H.hasOwnProperty,E=Object.defineProperty||function(b,v,m){b[v]=m.value},u=typeof Symbol=="function"?Symbol:{},g=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",p=u.toStringTag||"@@toStringTag";function c(b,v,m){return Object.defineProperty(b,v,{value:m,enumerable:!0,configurable:!0,writable:!0}),b[v]}try{c({},"")}catch(b){c=function(m,w,D){return m[w]=D}}function f(b,v,m,w){var D=v&&v.prototype instanceof t?v:t,T=Object.create(D.prototype),F=new k(w||[]);return E(T,"_invoke",{value:y(b,m,F)}),T}function h(b,v,m){try{return{type:"normal",arg:b.call(v,m)}}catch(w){return{type:"throw",arg:w}}}P.wrap=f;var _={};function t(){}function r(){}function o(){}var i={};c(i,g,function(){return this});var n=Object.getPrototypeOf,e=n&&n(n(I([])));e&&e!==H&&L.call(e,g)&&(i=e);var a=o.prototype=t.prototype=Object.create(i);function s(b){["next","throw","return"].forEach(function(v){c(b,v,function(m){return this._invoke(v,m)})})}function d(b,v){function m(D,T,F,N){var V=h(b[D],b,T);if(V.type!=="throw"){var Z=V.arg,K=Z.value;return K&&(0,$.Z)(K)=="object"&&L.call(K,"__await")?v.resolve(K.__await).then(function(R){m("next",R,F,N)},function(R){m("throw",R,F,N)}):v.resolve(K).then(function(R){Z.value=R,F(Z)},function(R){return m("throw",R,F,N)})}N(V.arg)}var w;E(this,"_invoke",{value:function(T,F){function N(){return new v(function(V,Z){m(T,F,V,Z)})}return w=w?w.then(N,N):N()}})}function y(b,v,m){var w="suspendedStart";return function(D,T){if(w==="executing")throw new Error("Generator is already running");if(w==="completed"){if(D==="throw")throw T;return O()}for(m.method=D,m.arg=T;;){var F=m.delegate;if(F){var N=S(F,m);if(N){if(N===_)continue;return N}}if(m.method==="next")m.sent=m._sent=m.arg;else if(m.method==="throw"){if(w==="suspendedStart")throw w="completed",m.arg;m.dispatchException(m.arg)}else m.method==="return"&&m.abrupt("return",m.arg);w="executing";var V=h(b,v,m);if(V.type==="normal"){if(w=m.done?"completed":"suspendedYield",V.arg===_)continue;return{value:V.arg,done:m.done}}V.type==="throw"&&(w="completed",m.method="throw",m.arg=V.arg)}}}function S(b,v){var m=v.method,w=b.iterator[m];if(w===void 0)return v.delegate=null,m==="throw"&&b.iterator.return&&(v.method="return",v.arg=void 0,S(b,v),v.method==="throw")||m!=="return"&&(v.method="throw",v.arg=new TypeError("The iterator does not provide a '"+m+"' method")),_;var D=h(w,b.iterator,v.arg);if(D.type==="throw")return v.method="throw",v.arg=D.arg,v.delegate=null,_;var T=D.arg;return T?T.done?(v[b.resultName]=T.value,v.next=b.nextLoc,v.method!=="return"&&(v.method="next",v.arg=void 0),v.delegate=null,_):T:(v.method="throw",v.arg=new TypeError("iterator result is not an object"),v.delegate=null,_)}function C(b){var v={tryLoc:b[0]};1 in b&&(v.catchLoc=b[1]),2 in b&&(v.finallyLoc=b[2],v.afterLoc=b[3]),this.tryEntries.push(v)}function A(b){var v=b.completion||{};v.type="normal",delete v.arg,b.completion=v}function k(b){this.tryEntries=[{tryLoc:"root"}],b.forEach(C,this),this.reset(!0)}function I(b){if(b){var v=b[g];if(v)return v.call(b);if(typeof b.next=="function")return b;if(!isNaN(b.length)){var m=-1,w=function D(){for(;++m<b.length;)if(L.call(b,m))return D.value=b[m],D.done=!1,D;return D.value=void 0,D.done=!0,D};return w.next=w}}return{next:O}}function O(){return{value:void 0,done:!0}}return r.prototype=o,E(a,"constructor",{value:o,configurable:!0}),E(o,"constructor",{value:r,configurable:!0}),r.displayName=c(o,p,"GeneratorFunction"),P.isGeneratorFunction=function(b){var v=typeof b=="function"&&b.constructor;return!!v&&(v===r||(v.displayName||v.name)==="GeneratorFunction")},P.mark=function(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,o):(b.__proto__=o,c(b,p,"GeneratorFunction")),b.prototype=Object.create(a),b},P.awrap=function(b){return{__await:b}},s(d.prototype),c(d.prototype,l,function(){return this}),P.AsyncIterator=d,P.async=function(b,v,m,w,D){D===void 0&&(D=Promise);var T=new d(f(b,v,m,w),D);return P.isGeneratorFunction(v)?T:T.next().then(function(F){return F.done?F.value:T.next()})},s(a),c(a,p,"Generator"),c(a,g,function(){return this}),c(a,"toString",function(){return"[object Generator]"}),P.keys=function(b){var v=Object(b),m=[];for(var w in v)m.push(w);return m.reverse(),function D(){for(;m.length;){var T=m.pop();if(T in v)return D.value=T,D.done=!1,D}return D.done=!0,D}},P.values=I,k.prototype={constructor:k,reset:function(v){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!v)for(var m in this)m.charAt(0)==="t"&&L.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=void 0)},stop:function(){this.done=!0;var v=this.tryEntries[0].completion;if(v.type==="throw")throw v.arg;return this.rval},dispatchException:function(v){if(this.done)throw v;var m=this;function w(Z,K){return F.type="throw",F.arg=v,m.next=Z,K&&(m.method="next",m.arg=void 0),!!K}for(var D=this.tryEntries.length-1;D>=0;--D){var T=this.tryEntries[D],F=T.completion;if(T.tryLoc==="root")return w("end");if(T.tryLoc<=this.prev){var N=L.call(T,"catchLoc"),V=L.call(T,"finallyLoc");if(N&&V){if(this.prev<T.catchLoc)return w(T.catchLoc,!0);if(this.prev<T.finallyLoc)return w(T.finallyLoc)}else if(N){if(this.prev<T.catchLoc)return w(T.catchLoc,!0)}else{if(!V)throw new Error("try statement without catch or finally");if(this.prev<T.finallyLoc)return w(T.finallyLoc)}}}},abrupt:function(v,m){for(var w=this.tryEntries.length-1;w>=0;--w){var D=this.tryEntries[w];if(D.tryLoc<=this.prev&&L.call(D,"finallyLoc")&&this.prev<D.finallyLoc){var T=D;break}}T&&(v==="break"||v==="continue")&&T.tryLoc<=m&&m<=T.finallyLoc&&(T=null);var F=T?T.completion:{};return F.type=v,F.arg=m,T?(this.method="next",this.next=T.finallyLoc,_):this.complete(F)},complete:function(v,m){if(v.type==="throw")throw v.arg;return v.type==="break"||v.type==="continue"?this.next=v.arg:v.type==="return"?(this.rval=this.arg=v.arg,this.method="return",this.next="end"):v.type==="normal"&&m&&(this.next=m),_},finish:function(v){for(var m=this.tryEntries.length-1;m>=0;--m){var w=this.tryEntries[m];if(w.finallyLoc===v)return this.complete(w.completion,w.afterLoc),A(w),_}},catch:function(v){for(var m=this.tryEntries.length-1;m>=0;--m){var w=this.tryEntries[m];if(w.tryLoc===v){var D=w.completion;if(D.type==="throw"){var T=D.arg;A(w)}return T}}throw new Error("illegal catch attempt")},delegateYield:function(v,m,w){return this.delegate={iterator:I(v),resultName:m,nextLoc:w},this.method==="next"&&(this.arg=void 0),_}},P}},97582:function(re,G,z){"use strict";z.r(G),z.d(G,{__assign:function(){return P},__asyncDelegator:function(){return d},__asyncGenerator:function(){return s},__asyncValues:function(){return y},__await:function(){return a},__awaiter:function(){return f},__classPrivateFieldGet:function(){return I},__classPrivateFieldIn:function(){return b},__classPrivateFieldSet:function(){return O},__createBinding:function(){return _},__decorate:function(){return L},__esDecorate:function(){return u},__exportStar:function(){return t},__extends:function(){return J},__generator:function(){return h},__importDefault:function(){return k},__importStar:function(){return A},__makeTemplateObject:function(){return S},__metadata:function(){return c},__param:function(){return E},__propKey:function(){return l},__read:function(){return o},__rest:function(){return H},__runInitializers:function(){return g},__setFunctionName:function(){return p},__spread:function(){return i},__spreadArray:function(){return e},__spreadArrays:function(){return n},__values:function(){return r}});var $=function(v,m){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,D){w.__proto__=D}||function(w,D){for(var T in D)Object.prototype.hasOwnProperty.call(D,T)&&(w[T]=D[T])},$(v,m)};function J(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");$(v,m);function w(){this.constructor=v}v.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)}var P=function(){return P=Object.assign||function(m){for(var w,D=1,T=arguments.length;D<T;D++){w=arguments[D];for(var F in w)Object.prototype.hasOwnProperty.call(w,F)&&(m[F]=w[F])}return m},P.apply(this,arguments)};function H(v,m){var w={};for(var D in v)Object.prototype.hasOwnProperty.call(v,D)&&m.indexOf(D)<0&&(w[D]=v[D]);if(v!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,D=Object.getOwnPropertySymbols(v);T<D.length;T++)m.indexOf(D[T])<0&&Object.prototype.propertyIsEnumerable.call(v,D[T])&&(w[D[T]]=v[D[T]]);return w}function L(v,m,w,D){var T=arguments.length,F=T<3?m:D===null?D=Object.getOwnPropertyDescriptor(m,w):D,N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(v,m,w,D);else for(var V=v.length-1;V>=0;V--)(N=v[V])&&(F=(T<3?N(F):T>3?N(m,w,F):N(m,w))||F);return T>3&&F&&Object.defineProperty(m,w,F),F}function E(v,m){return function(w,D){m(w,D,v)}}function u(v,m,w,D,T,F){function N(te){if(te!==void 0&&typeof te!="function")throw new TypeError("Function expected");return te}for(var V=D.kind,Z=V==="getter"?"get":V==="setter"?"set":"value",K=!m&&v?D.static?v:v.prototype:null,R=m||(K?Object.getOwnPropertyDescriptor(K,D.name):{}),Y,j=!1,W=w.length-1;W>=0;W--){var B={};for(var Q in D)B[Q]=Q==="access"?{}:D[Q];for(var Q in D.access)B.access[Q]=D.access[Q];B.addInitializer=function(te){if(j)throw new TypeError("Cannot add initializers after decoration has completed");F.push(N(te||null))};var X=(0,w[W])(V==="accessor"?{get:R.get,set:R.set}:R[Z],B);if(V==="accessor"){if(X===void 0)continue;if(X===null||typeof X!="object")throw new TypeError("Object expected");(Y=N(X.get))&&(R.get=Y),(Y=N(X.set))&&(R.set=Y),(Y=N(X.init))&&T.unshift(Y)}else(Y=N(X))&&(V==="field"?T.unshift(Y):R[Z]=Y)}K&&Object.defineProperty(K,D.name,R),j=!0}function g(v,m,w){for(var D=arguments.length>2,T=0;T<m.length;T++)w=D?m[T].call(v,w):m[T].call(v);return D?w:void 0}function l(v){return typeof v=="symbol"?v:"".concat(v)}function p(v,m,w){return typeof m=="symbol"&&(m=m.description?"[".concat(m.description,"]"):""),Object.defineProperty(v,"name",{configurable:!0,value:w?"".concat(w," ",m):m})}function c(v,m){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(v,m)}function f(v,m,w,D){function T(F){return F instanceof w?F:new w(function(N){N(F)})}return new(w||(w=Promise))(function(F,N){function V(R){try{K(D.next(R))}catch(Y){N(Y)}}function Z(R){try{K(D.throw(R))}catch(Y){N(Y)}}function K(R){R.done?F(R.value):T(R.value).then(V,Z)}K((D=D.apply(v,m||[])).next())})}function h(v,m){var w={label:0,sent:function(){if(F[0]&1)throw F[1];return F[1]},trys:[],ops:[]},D,T,F,N;return N={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function V(K){return function(R){return Z([K,R])}}function Z(K){if(D)throw new TypeError("Generator is already executing.");for(;N&&(N=0,K[0]&&(w=0)),w;)try{if(D=1,T&&(F=K[0]&2?T.return:K[0]?T.throw||((F=T.return)&&F.call(T),0):T.next)&&!(F=F.call(T,K[1])).done)return F;switch(T=0,F&&(K=[K[0]&2,F.value]),K[0]){case 0:case 1:F=K;break;case 4:return w.label++,{value:K[1],done:!1};case 5:w.label++,T=K[1],K=[0];continue;case 7:K=w.ops.pop(),w.trys.pop();continue;default:if(F=w.trys,!(F=F.length>0&&F[F.length-1])&&(K[0]===6||K[0]===2)){w=0;continue}if(K[0]===3&&(!F||K[1]>F[0]&&K[1]<F[3])){w.label=K[1];break}if(K[0]===6&&w.label<F[1]){w.label=F[1],F=K;break}if(F&&w.label<F[2]){w.label=F[2],w.ops.push(K);break}F[2]&&w.ops.pop(),w.trys.pop();continue}K=m.call(v,w)}catch(R){K=[6,R],T=0}finally{D=F=0}if(K[0]&5)throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}}var _=Object.create?function(v,m,w,D){D===void 0&&(D=w);var T=Object.getOwnPropertyDescriptor(m,w);(!T||("get"in T?!m.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return m[w]}}),Object.defineProperty(v,D,T)}:function(v,m,w,D){D===void 0&&(D=w),v[D]=m[w]};function t(v,m){for(var w in v)w!=="default"&&!Object.prototype.hasOwnProperty.call(m,w)&&_(m,v,w)}function r(v){var m=typeof Symbol=="function"&&Symbol.iterator,w=m&&v[m],D=0;if(w)return w.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&D>=v.length&&(v=void 0),{value:v&&v[D++],done:!v}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(v,m){var w=typeof Symbol=="function"&&v[Symbol.iterator];if(!w)return v;var D=w.call(v),T,F=[],N;try{for(;(m===void 0||m-- >0)&&!(T=D.next()).done;)F.push(T.value)}catch(V){N={error:V}}finally{try{T&&!T.done&&(w=D.return)&&w.call(D)}finally{if(N)throw N.error}}return F}function i(){for(var v=[],m=0;m<arguments.length;m++)v=v.concat(o(arguments[m]));return v}function n(){for(var v=0,m=0,w=arguments.length;m<w;m++)v+=arguments[m].length;for(var D=Array(v),T=0,m=0;m<w;m++)for(var F=arguments[m],N=0,V=F.length;N<V;N++,T++)D[T]=F[N];return D}function e(v,m,w){if(w||arguments.length===2)for(var D=0,T=m.length,F;D<T;D++)(F||!(D in m))&&(F||(F=Array.prototype.slice.call(m,0,D)),F[D]=m[D]);return v.concat(F||Array.prototype.slice.call(m))}function a(v){return this instanceof a?(this.v=v,this):new a(v)}function s(v,m,w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D=w.apply(v,m||[]),T,F=[];return T={},N("next"),N("throw"),N("return"),T[Symbol.asyncIterator]=function(){return this},T;function N(j){D[j]&&(T[j]=function(W){return new Promise(function(B,Q){F.push([j,W,B,Q])>1||V(j,W)})})}function V(j,W){try{Z(D[j](W))}catch(B){Y(F[0][3],B)}}function Z(j){j.value instanceof a?Promise.resolve(j.value.v).then(K,R):Y(F[0][2],j)}function K(j){V("next",j)}function R(j){V("throw",j)}function Y(j,W){j(W),F.shift(),F.length&&V(F[0][0],F[0][1])}}function d(v){var m,w;return m={},D("next"),D("throw",function(T){throw T}),D("return"),m[Symbol.iterator]=function(){return this},m;function D(T,F){m[T]=v[T]?function(N){return(w=!w)?{value:a(v[T](N)),done:!1}:F?F(N):N}:F}}function y(v){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=v[Symbol.asyncIterator],w;return m?m.call(v):(v=typeof r=="function"?r(v):v[Symbol.iterator](),w={},D("next"),D("throw"),D("return"),w[Symbol.asyncIterator]=function(){return this},w);function D(F){w[F]=v[F]&&function(N){return new Promise(function(V,Z){N=v[F](N),T(V,Z,N.done,N.value)})}}function T(F,N,V,Z){Promise.resolve(Z).then(function(K){F({value:K,done:V})},N)}}function S(v,m){return Object.defineProperty?Object.defineProperty(v,"raw",{value:m}):v.raw=m,v}var C=Object.create?function(v,m){Object.defineProperty(v,"default",{enumerable:!0,value:m})}:function(v,m){v.default=m};function A(v){if(v&&v.__esModule)return v;var m={};if(v!=null)for(var w in v)w!=="default"&&Object.prototype.hasOwnProperty.call(v,w)&&_(m,v,w);return C(m,v),m}function k(v){return v&&v.__esModule?v:{default:v}}function I(v,m,w,D){if(w==="a"&&!D)throw new TypeError("Private accessor was defined without a getter");if(typeof m=="function"?v!==m||!D:!m.has(v))throw new TypeError("Cannot read private member from an object whose class did not declare it");return w==="m"?D:w==="a"?D.call(v):D?D.value:m.get(v)}function O(v,m,w,D,T){if(D==="m")throw new TypeError("Private method is not writable");if(D==="a"&&!T)throw new TypeError("Private accessor was defined without a setter");if(typeof m=="function"?v!==m||!T:!m.has(v))throw new TypeError("Cannot write private member to an object whose class did not declare it");return D==="a"?T.call(v,w):T?T.value=w:m.set(v,w),w}function b(v,m){if(m===null||typeof m!="object"&&typeof m!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof v=="function"?m===v:v.has(m)}G.default={__extends:J,__assign:P,__rest:H,__decorate:L,__param:E,__metadata:c,__awaiter:f,__generator:h,__createBinding:_,__exportStar:t,__values:r,__read:o,__spread:i,__spreadArrays:n,__spreadArray:e,__await:a,__asyncGenerator:s,__asyncDelegator:d,__asyncValues:y,__makeTemplateObject:S,__importStar:A,__importDefault:k,__classPrivateFieldGet:I,__classPrivateFieldSet:O,__classPrivateFieldIn:b}}}]);
